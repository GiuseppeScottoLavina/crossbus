{"version":3,"file":"crossbus.js","sources":["../src/core/event-emitter.js","../src/common/types.js","../src/core/message-types.js","../src/common/errors.js","../src/common/utils.js","../src/router/message-router.js","../src/router/pending-requests.js","../src/security/handshake.js","../src/security/origin-validator.js","../src/core/cross-bus.js","../src/core/stream.js","../src/core/presence.js","../src/common/serialization.js","../src/transports/postmessage.js","../src/transports/broadcast-channel.js","../src/transports/message-channel.js","../src/transports/shared-worker.js","../src/transports/service-worker.js","../src/transports/native-bridge.js","../src/transports/websocket.js","../src/ordering/vector-clock.js","../src/ordering/causal-orderer.js"],"sourcesContent":["/**\n * @fileoverview Local event emitter with wildcard support and AbortSignal integration.\n * Uses Symbol-based private storage for encapsulation.\n * @module core/event-emitter\n */\n\n/** @type {symbol} Private storage key for listeners map */\nconst LISTENERS = Symbol('listeners');\n\n/** @type {symbol} Private storage key for subscription counter */\nconst SUB_COUNTER = Symbol('subCounter');\n\n/** @type {symbol} Private storage key for max listeners setting */\nconst MAX_LISTENERS = Symbol('maxListeners');\n\n/** @type {symbol} Private storage key for fast callback cache (Object-based) */\nconst FAST_CACHE = Symbol('fastCache');\n\n/** @type {number} Default max listeners before warning */\nconst DEFAULT_MAX_LISTENERS = 10;\n\n/** @type {Object} Default source for local emissions */\nconst DEFAULT_SOURCE = Object.freeze({\n    peerId: 'self',\n    origin: typeof globalThis.location !== 'undefined' ? globalThis.location.origin : 'unknown',\n    type: 'local'\n});\n\n/**\n * @typedef {Object} ListenerOptions\n * @property {boolean} [once=false] - Auto-remove after first invocation.\n * @property {AbortSignal} [signal] - AbortController signal for cleanup.\n * @property {'sync'|'async'} [mode='async'] - Execution mode.\n * @property {number} [priority=0] - Execution order (higher = first).\n */\n\n/**\n * @typedef {Object} Subscription\n * @property {string} id - Unique subscription ID.\n * @property {string} signalName - The signal name subscribed to.\n * @property {Function} unsubscribe - Call to remove this listener.\n * @property {boolean} active - Whether subscription is active.\n */\n\n/**\n * @typedef {Object} SignalEvent\n * @property {string} name - Signal name that was emitted.\n * @property {*} data - The payload data.\n * @property {string} messageId - Unique message ID.\n * @property {number} timestamp - When the signal was emitted.\n * @property {SignalSource} source - Origin of the signal.\n */\n\n/**\n * @typedef {Object} SignalSource\n * @property {string} peerId - ID of the emitting peer ('self' if local).\n * @property {string} origin - Origin URL.\n * @property {'local'|'iframe'|'worker'|'service-worker'|'window'} type - Source type.\n */\n\n/**\n * @callback SignalHandler\n * @param {SignalEvent} event - The signal event object.\n * @returns {void|Promise<void>}\n */\n\n/**\n * @typedef {Object} ListenerEntry\n * @property {string} id - Subscription ID.\n * @property {SignalHandler} handler - The callback function.\n * @property {number} priority - Execution priority.\n * @property {'sync'|'async'} mode - Execution mode.\n * @property {boolean} once - Auto-remove after first invocation.\n * @property {AbortSignal|null} signal - Abort signal.\n */\n\n/**\n * @typedef {Object} RemoveResult\n * @property {boolean} success - True if at least one listener was removed.\n * @property {number} removedCount - Number of listeners removed.\n * @property {number} remainingCount - Listeners still registered for this signal.\n */\n\n/**\n * Local event emitter with wildcard support.\n * \n * Supports:\n * - Exact match: `on('user:login', handler)`\n * - Namespace wildcard: `on('user:*', handler)` matches `user:login`, `user:logout`\n * - Global wildcard: `on('*', handler)` matches all signals\n * \n * @example\n * const emitter = new EventEmitter();\n * \n * // Basic listener\n * emitter.on('message', (event) => console.log(event.data));\n * \n * // Wildcard listener\n * emitter.on('user:*', (event) => console.log('User event:', event.name));\n * \n * // Emit signal\n * emitter.emit('message', { text: 'Hello' });\n */\nexport class EventEmitter {\n    constructor() {\n        /** @type {Map<string, ListenerEntry[]>} */\n        this[LISTENERS] = new Map();\n\n        /** @type {number} */\n        this[SUB_COUNTER] = 0;\n\n        /** @type {number} Max listeners before memory leak warning */\n        this[MAX_LISTENERS] = DEFAULT_MAX_LISTENERS;\n\n        /** @type {Object<string, Function[]>} Fast Object-based cache for callbacks only */\n        this[FAST_CACHE] = Object.create(null);\n    }\n\n    /**\n     * Sets the max listeners threshold for memory leak warnings.\n     * @param {number} n - Max listeners (0 = unlimited)\n     */\n    setMaxListeners(n) {\n        this[MAX_LISTENERS] = n;\n        return this;\n    }\n\n    /**\n     * Gets the current max listeners setting.\n     * @returns {number}\n     */\n    getMaxListeners() {\n        return this[MAX_LISTENERS];\n    }\n\n    /**\n     * Registers a listener for a signal.\n     * \n     * @param {string} name - Signal name. Supports wildcards: '*', 'namespace:*'.\n     * @param {SignalHandler} handler - Callback function.\n     * @param {ListenerOptions} [options={}] - Configuration options.\n     * @returns {Subscription} Subscription object.\n     * @throws {TypeError} If name is not a string or handler is not a function.\n     * \n     * @example\n     * // Basic listener\n     * const sub = emitter.on('user:login', (event) => {\n     *   console.log(`User ${event.data.userId} logged in`);\n     * });\n     * \n     * @example\n     * // One-time listener\n     * emitter.on('init:complete', handler, { once: true });\n     * \n     * @example\n     * // With AbortController\n     * const controller = new AbortController();\n     * emitter.on('data:update', handler, { signal: controller.signal });\n     * controller.abort(); // Removes listener\n     * \n     * @example\n     * // Priority-based ordering\n     * emitter.on('event', lowPriorityHandler, { priority: 1 });\n     * emitter.on('event', highPriorityHandler, { priority: 10 }); // Runs first\n     */\n    on(name, handler, options = {}) {\n        if (typeof name !== 'string') {\n            throw new TypeError('Signal name must be a string');\n        }\n        if (typeof handler !== 'function') {\n            throw new TypeError('Handler must be a function');\n        }\n\n        const id = `sub_${++this[SUB_COUNTER]}`;\n\n        // V8 Optimization: Consistent object shape for hidden class caching\n        // All entries have same properties in same order\n        /** @type {ListenerEntry} */\n        const entry = {\n            id,\n            handler,\n            priority: options.priority ?? 0,\n            mode: options.mode ?? 'async',\n            once: options.once ?? false,\n            signal: options.signal ?? null\n        };\n\n        // Get or create listeners array for this signal\n        if (!this[LISTENERS].has(name)) {\n            this[LISTENERS].set(name, []);\n        }\n\n        const listeners = this[LISTENERS].get(name);\n\n        // Binary insert for O(log n) search instead of O(n log n) sort\n        if (listeners.length === 0 || entry.priority <= listeners[listeners.length - 1].priority) {\n            // Fast path: append (most common case with priority 0)\n            listeners.push(entry);\n        } else {\n            // Binary search for insert position (higher priority first)\n            let lo = 0, hi = listeners.length;\n            while (lo < hi) {\n                const mid = (lo + hi) >>> 1;\n                if (listeners[mid].priority >= entry.priority) {\n                    lo = mid + 1;\n                } else {\n                    hi = mid;\n                }\n            }\n            listeners.splice(lo, 0, entry);\n        }\n\n        // Sync FAST_CACHE for ultra-fast emitSync\n        this[FAST_CACHE][name] = listeners.map(e => e.handler);\n\n        // Memory leak detection: warn if too many listeners\n        const maxListeners = this[MAX_LISTENERS];\n        if (maxListeners > 0 && listeners.length > maxListeners) {\n            console.warn(\n                `[CrossBus] Possible memory leak: ${listeners.length} listeners for \"${name}\". ` +\n                `Use setMaxListeners(n) to increase limit.`\n            );\n        }\n\n        // Create subscription object\n        let active = true;\n        const subscription = {\n            id,\n            signalName: name,\n            get active() { return active; },\n            unsubscribe: () => {\n                if (active) {\n                    this.#removeListener(name, id);\n                    active = false;\n                }\n            }\n        };\n\n        // Handle AbortSignal\n        if (entry.signal) {\n            if (entry.signal.aborted) {\n                // Already aborted, remove immediately\n                this.#removeListener(name, id);\n                active = false;\n            } else {\n                entry.signal.addEventListener('abort', () => {\n                    subscription.unsubscribe();\n                }, { once: true });\n            }\n        }\n\n        return subscription;\n    }\n\n    /**\n     * Registers a one-time listener.\n     * Convenience method for `on(name, handler, { once: true })`.\n     * \n     * @param {string} name - Signal name.\n     * @param {SignalHandler} handler - Callback function.\n     * @param {ListenerOptions} [options={}] - Additional options.\n     * @returns {Subscription} Subscription object.\n     */\n    once(name, handler, options = {}) {\n        return this.on(name, handler, { ...options, once: true });\n    }\n\n    /**\n     * Ultra-fast listener registration for performance-critical paths.\n     * \n     * Unlike on(), this method:\n     * - No input validation (caller must ensure correct types)\n     * - No subscription object (returns unbind function directly)\n     * - No priority, once, or AbortSignal support\n     * - Direct push to FAST_CACHE (minimal overhead)\n     * \n     * Use when you need maximum subscribe performance.\n     * \n     * @param {string} name - Signal name.\n     * @param {EventListener} handler - Callback function.\n     * @returns {Function} Unbind function (call to remove listener).\n     * \n     * @example\n     * // 50M+ ops/sec subscribe/unsubscribe\n     * const off = emitter.onFast('tick', (data) => console.log(data));\n     * off(); // Remove listener\n     */\n    onFast(name, handler) {\n        // Match nanoevents exactly: ||= pattern, minimal code\n        (this[FAST_CACHE][name] ||= []).push(handler);\n        return () => {\n            this[FAST_CACHE][name] = this[FAST_CACHE][name]?.filter(h => h !== handler);\n        };\n    }\n\n    /**\n     * Ultra-fast listener removal for performance-critical paths.\n     * \n     * @param {string} name - Signal name.\n     * @param {EventListener} handler - Handler to remove.\n     */\n    offFast(name, handler) {\n        const cache = this[FAST_CACHE][name];\n        if (cache) {\n            const idx = cache.indexOf(handler);\n            if (idx !== -1) cache.splice(idx, 1);\n        }\n        // Also clean LISTENERS\n        const listeners = this[LISTENERS].get(name);\n        if (listeners) {\n            const idx = listeners.findIndex(e => e.handler === handler);\n            if (idx !== -1) listeners.splice(idx, 1);\n        }\n    }\n\n    /**\n     * Removes signal listener(s).\n     * \n     * @param {string} name - Signal name.\n     * @param {SignalHandler} [handler] - Specific handler to remove.\n     *                                    If omitted, removes ALL listeners.\n     * @returns {RemoveResult} Result of the removal.\n     * @throws {TypeError} If name is not a string.\n     * \n     * @example\n     * // Remove specific handler\n     * const result = emitter.off('msg', myHandler);\n     * // => { success: true, removedCount: 1, remainingCount: 0 }\n     * \n     * @example\n     * // Remove ALL listeners for a signal\n     * emitter.off('updates');\n     * // => { success: true, removedCount: 2, remainingCount: 0 }\n     */\n    off(name, handler) {\n        if (typeof name !== 'string') {\n            throw new TypeError('Signal name must be a string');\n        }\n\n        const listeners = this[LISTENERS].get(name);\n\n        if (!listeners || listeners.length === 0) {\n            return { success: false, removedCount: 0, remainingCount: 0 };\n        }\n\n        let removedCount = 0;\n\n        if (handler === undefined) {\n            // Remove all listeners for this signal\n            removedCount = listeners.length;\n            this[LISTENERS].delete(name);\n            delete this[FAST_CACHE][name];\n        } else {\n            // Remove specific handler\n            const initialLength = listeners.length;\n            const filtered = listeners.filter(entry => entry.handler !== handler);\n            removedCount = initialLength - filtered.length;\n\n            if (filtered.length === 0) {\n                this[LISTENERS].delete(name);\n                delete this[FAST_CACHE][name];\n            } else {\n                this[LISTENERS].set(name, filtered);\n                this[FAST_CACHE][name] = filtered.map(e => e.handler);\n            }\n        }\n\n        const remaining = this[LISTENERS].get(name)?.length ?? 0;\n\n        return {\n            success: removedCount > 0,\n            removedCount,\n            remainingCount: remaining\n        };\n    }\n\n    /**\n     * Ultra-fast synchronous emit for performance-critical paths.\n     * \n     * Unlike emit(), this method:\n     * - Is synchronous (no async/await overhead)\n     * - Passes data directly (no event envelope)\n     * - Skips messageId, timestamp generation\n     * - No wildcard matching (exact match only)\n     * \n     * Use for high-frequency events where metadata is not needed.\n     * \n     * @param {string} name - Signal name (exact match only).\n     * @param {*} data - Payload to pass directly to handlers.\n     * @returns {number} Number of listeners invoked.\n     * \n     * @example\n     * // 150M+ ops/sec - use for hot paths\n     * emitter.emitSync('tick', { x: 100, y: 200 });\n     */\n    emitSync(name, data) {\n        // Ultra-fast path: use Object-based cache (faster than Map.get)\n        const callbacks = this[FAST_CACHE][name];\n        if (!callbacks) return 0;\n\n        // Direct callback invocation (no .handler indirection)\n        const len = callbacks.length;\n        if (len === 1) {\n            callbacks[0](data);\n            return 1;\n        }\n        if (len === 2) {\n            callbacks[0](data);\n            callbacks[1](data);\n            return 2;\n        }\n        if (len === 3) {\n            callbacks[0](data);\n            callbacks[1](data);\n            callbacks[2](data);\n            return 3;\n        }\n        if (len === 4) {\n            callbacks[0](data);\n            callbacks[1](data);\n            callbacks[2](data);\n            callbacks[3](data);\n            return 4;\n        }\n\n        // General loop for 5+ listeners\n        for (let i = 0; i < len; i++) {\n            callbacks[i](data);\n        }\n        return len;\n    }\n\n    /**\n     * Emits a signal to local listeners.\n     * \n     * @param {string} name - Signal name.\n     * @param {*} data - Payload data.\n     * @param {Partial<SignalSource>} [source] - Signal source info.\n     * @returns {Promise<number>} Number of listeners invoked.\n     * @throws {TypeError} If name is not a string.\n     * \n     * @example\n     * const count = await emitter.emit('user:login', { userId: 123 });\n     * console.log(`Notified ${count} listeners`);\n     */\n    async emit(name, data, source) {\n        if (typeof name !== 'string') {\n            throw new TypeError('Signal name must be a string');\n        }\n\n        // Fast path: single exact-match listener, no wildcards\n        const exactListeners = this[LISTENERS].get(name);\n        const hasWildcard = this[LISTENERS].has('*');\n\n        if (exactListeners?.length === 1 && !hasWildcard && !source) {\n            const entry = exactListeners[0];\n            const event = {\n                name,\n                data,\n                messageId: crypto.randomUUID(),\n                timestamp: Date.now(),\n                source: DEFAULT_SOURCE\n            };\n\n            try {\n                if (entry.mode === 'sync') {\n                    await entry.handler(event);\n                } else {\n                    Promise.resolve().then(() => entry.handler(event));\n                }\n            } catch (error) {\n                console.error(`[CrossBus] Handler error for \"${name}\":`, error);\n            }\n\n            if (entry.once) {\n                this.#removeListener(name, entry.id);\n            }\n\n            return 1;\n        }\n\n        // Full path: multiple listeners or wildcards\n        const event = {\n            name,\n            data,\n            messageId: crypto.randomUUID(),\n            timestamp: Date.now(),\n            source: source ? { ...DEFAULT_SOURCE, ...source } : DEFAULT_SOURCE\n        };\n\n        // Collect matching listeners\n        const matchingEntries = this.#getMatchingListeners(name);\n\n        // Track entries to remove (once: true)\n        const toRemove = [];\n\n        // Invoke handlers\n        for (const { signalName, entry } of matchingEntries) {\n            try {\n                if (entry.mode === 'sync') {\n                    await entry.handler(event);\n                } else {\n                    // Fire async without blocking\n                    Promise.resolve().then(() => entry.handler(event));\n                }\n            } catch (error) {\n                // Log but don't throw - other listeners should still run\n                console.error(`[CrossBus] Handler error for \"${name}\":`, error);\n            }\n\n            if (entry.once) {\n                toRemove.push({ signalName, id: entry.id });\n            }\n        }\n\n        // Remove once listeners\n        for (const { signalName, id } of toRemove) {\n            this.#removeListener(signalName, id);\n        }\n\n        return matchingEntries.length;\n    }\n\n    /**\n     * Checks if there are any listeners for a signal.\n     * \n     * @param {string} name - Signal name (exact match only).\n     * @returns {boolean} True if listeners exist.\n     */\n    hasListeners(name) {\n        const listeners = this[LISTENERS].get(name);\n        return listeners !== undefined && listeners.length > 0;\n    }\n\n    /**\n     * Gets the count of listeners for a signal.\n     * \n     * @param {string} name - Signal name (exact match only).\n     * @returns {number} Number of listeners.\n     */\n    listenerCount(name) {\n        return this[LISTENERS].get(name)?.length ?? 0;\n    }\n\n    /**\n     * Gets all registered signal names.\n     * \n     * @returns {string[]} Array of signal names.\n     */\n    getSignalNames() {\n        return Array.from(this[LISTENERS].keys());\n    }\n\n    /**\n     * Removes all listeners.\n     */\n    clear() {\n        this[LISTENERS].clear();\n        // Reset FAST_CACHE to empty object\n        for (const key in this[FAST_CACHE]) {\n            delete this[FAST_CACHE][key];\n        }\n    }\n\n    /**\n     * Gets all listeners matching a signal name (including wildcards).\n     * \n     * \n     * @param {string} name - Signal name to match.\n     * @returns {Array<{signalName: string, entry: ListenerEntry}>} Matching entries.\n     */\n    #getMatchingListeners(name) {\n        // Fast path: check exact match first and if no wildcards registered\n        const exactListeners = this[LISTENERS].get(name);\n        const globalWildcard = this[LISTENERS].get('*');\n\n        // Find namespace wildcards (e.g., 'user:*' for 'user:login')\n        let namespaceWildcard = null;\n        const colonIdx = name.indexOf(':');\n        if (colonIdx > 0) {\n            const wildcardPattern = name.slice(0, colonIdx + 1) + '*';\n            namespaceWildcard = this[LISTENERS].get(wildcardPattern);\n        }\n\n        // Super-fast path: only exact match, no wildcards\n        if (exactListeners && !globalWildcard && !namespaceWildcard) {\n            return exactListeners.map(entry => ({ signalName: name, entry }));\n        }\n\n        // Fast path: single source, already sorted\n        const sources = [\n            exactListeners && { signalName: name, entries: exactListeners },\n            globalWildcard && { signalName: '*', entries: globalWildcard },\n            namespaceWildcard && { signalName: name.slice(0, colonIdx + 1) + '*', entries: namespaceWildcard }\n        ].filter(Boolean);\n\n        if (sources.length === 0) {\n            return [];\n        }\n\n        if (sources.length === 1) {\n            // Single source: already sorted, no merge needed\n            return sources[0].entries.map(entry => ({ signalName: sources[0].signalName, entry }));\n        }\n\n        // Multiple sources: collect and merge-sort by priority\n        const results = [];\n        for (const { signalName, entries } of sources) {\n            for (const entry of entries) {\n                results.push({ signalName, entry });\n            }\n        }\n\n        // Only sort when merging multiple sources\n        results.sort((a, b) => b.entry.priority - a.entry.priority);\n\n        return results;\n    }\n\n\n\n    /**\n     * Removes a listener by ID.\n     * \n     * \n     * @param {string} name - Signal name.\n     * @param {string} id - Subscription ID.\n     */\n    #removeListener(name, id) {\n        const listeners = this[LISTENERS].get(name);\n        if (!listeners) return;\n\n        const filtered = listeners.filter(entry => entry.id !== id);\n\n        if (filtered.length === 0) {\n            this[LISTENERS].delete(name);\n            delete this[FAST_CACHE][name];\n        } else {\n            this[LISTENERS].set(name, filtered);\n            this[FAST_CACHE][name] = filtered.map(e => e.handler);\n        }\n    }\n}\n\n/**\n * Creates an ultra-fast plain object emitter that beats nanoevents.\n * \n * Unlike EventEmitter class, this is a minimal plain object with:\n * - No class overhead\n * - No Symbol lookups\n * - No validation\n * - Direct property access\n * \n * Benchmarks:\n * - on/off cycle: 45M ops/sec (vs nanoevents 38M) = 1.18x faster\n * - emit (10 listeners): 82M ops/sec (vs nanoevents 65M) = 1.26x faster\n * \n * @returns {Object} Fast emitter with on(), emit() methods\n * \n * @example\n * const emitter = createFastEmitter();\n * const off = emitter.on('event', (data) => console.log(data));\n * emitter.emit('event', { value: 42 });\n * off(); // Remove listener\n */\nexport const createFastEmitter = () => ({\n    events: {},\n\n    /**\n     * Subscribe to an event. Returns unbind function.\n     * @param {string} event - Event name\n     * @param {EventListener} cb - Callback function\n     * @returns {Function} Unbind function\n     */\n    on(event, cb) {\n        (this.events[event] ||= []).push(cb);\n        return () => {\n            this.events[event] = this.events[event]?.filter(i => cb !== i);\n        };\n    },\n\n    /**\n     * Emit an event to all listeners.\n     * @param {string} event - Event name\n     * @param {*} data - Data to pass to listeners\n     */\n    emit(event, data) {\n        const c = this.events[event];\n        if (!c) return;\n        const len = c.length;\n        // Unrolled for 1-4 (most common)\n        if (len === 1) { c[0](data); return; }\n        if (len === 2) { c[0](data); c[1](data); return; }\n        if (len === 3) { c[0](data); c[1](data); c[2](data); return; }\n        if (len === 4) { c[0](data); c[1](data); c[2](data); c[3](data); return; }\n        // Loop for 5+\n        for (let i = 0; i < len; i++) c[i](data);\n    },\n\n    /**\n     * Remove all listeners for an event or all events.\n     * @param {string} [event] - Event name (omit to clear all)\n     */\n    off(event) {\n        if (event) {\n            delete this.events[event];\n        } else {\n            this.events = {};\n        }\n    }\n});\n\n","/**\n * @fileoverview Common types and constants shared across all modules.\n * This module is included in the common bundle to avoid duplication.\n * @module common/types\n */\n\n/**\n * Protocol marker for CrossBus messages.\n * @constant {string}\n */\nexport const PROTOCOL_MARKER = '_cb';\n\n/**\n * Current protocol version.\n * @constant {number}\n */\nexport const PROTOCOL_VERSION = 1;\n\n/**\n * Message type codes (compact for wire efficiency).\n * @readonly\n * @enum {string}\n */\nexport const MessageType = Object.freeze({\n    /** Signal - one-way message */\n    SIGNAL: 'sig',\n    /** Request - expects response */\n    REQUEST: 'req',\n    /** Response - reply to request */\n    RESPONSE: 'res',\n    /** Acknowledge - delivery confirmation */\n    ACK: 'ack',\n    /** Handshake - connection negotiation */\n    HANDSHAKE: 'hsk',\n    HANDSHAKE_INIT: 'hsk_init',\n    HANDSHAKE_ACK: 'hsk_ack',\n    HANDSHAKE_COMPLETE: 'hsk_done',\n    /** Ping - heartbeat */\n    PING: 'png',\n    /** Pong - heartbeat response */\n    PONG: 'pog',\n    /** Goodbye - graceful disconnect */\n    BYE: 'bye',\n    /** Broadcast - message for all peers */\n    BROADCAST: 'bc'\n});\n\n/**\n * Handshake phase codes.\n * @readonly\n * @enum {string}\n */\nexport const HandshakePhase = Object.freeze({\n    INIT: 'init',\n    INIT_SENT: 'init_sent',\n    ACK: 'ack',\n    ACK_SENT: 'ack_sent',\n    DONE: 'done'\n});\n\n/**\n * Peer connection status.\n * @readonly\n * @enum {string}\n */\nexport const PeerStatus = Object.freeze({\n    CONNECTING: 'connecting',\n    CONNECTED: 'connected',\n    DISCONNECTED: 'disconnected',\n    RECONNECTING: 'reconnecting',\n    FAILED: 'failed'\n});\n\n/**\n * Peer type (transport mechanism).\n * @readonly\n * @enum {string}\n */\nexport const PeerType = Object.freeze({\n    IFRAME: 'iframe',\n    WORKER: 'worker',\n    SERVICE_WORKER: 'sw',\n    WINDOW: 'window',\n    PORT: 'port'\n});\n\n/**\n * Delivery status for emit results.\n * @readonly\n * @enum {string}\n */\nexport const DeliveryStatus = Object.freeze({\n    /** Delivered to local listeners only */\n    LOCAL: 'local',\n    /** Sent to peer (no ACK requested) */\n    SENT: 'sent',\n    /** Sent and ACK received */\n    ACKED: 'acked',\n    /** Queued for offline peer */\n    QUEUED: 'queued',\n    /** ACK timeout */\n    TIMEOUT: 'timeout',\n    /** Delivery failed */\n    FAILED: 'failed'\n});\n\n/**\n * Default configuration values.\n * @readonly\n * @type {Object}\n */\nexport const Defaults = Object.freeze({\n    ACK_TIMEOUT: 5000,\n    REQUEST_TIMEOUT: 30000,\n    HANDSHAKE_TIMEOUT: 10000,\n    HEARTBEAT_INTERVAL: 15000,\n    HEARTBEAT_TIMEOUT: 5000,\n    RECONNECT_INTERVAL: 3000,\n    MAX_RECONNECT_ATTEMPTS: 5,\n    MAX_PEERS: 100,\n    MAX_PENDING_REQUESTS: 1000,\n    MAX_QUEUE_SIZE: 100,\n    MAX_MESSAGE_SIZE: 1048576, // 1MB\n    TTL: 5\n});\n\n/**\n * Checks if an object is a valid CrossBus message.\n * \n * @param {*} obj - Object to check.\n * @returns {boolean} True if valid protocol message.\n */\nexport function isProtocolMessage(obj) {\n    return (\n        obj !== null &&\n        typeof obj === 'object' &&\n        obj[PROTOCOL_MARKER] === PROTOCOL_VERSION &&\n        typeof obj.id === 'string' &&\n        (typeof obj.type === 'string' || typeof obj.t === 'string')\n    );\n}\n\n/**\n * List of transferable types for auto-detection.\n * @constant {Function[]}\n */\nexport const TransferableTypes = [\n    ArrayBuffer,\n    MessagePort,\n    // ImageBitmap and OffscreenCanvas are checked dynamically\n    // as they may not exist in all contexts\n];\n\n/**\n * Checks if a value is transferable.\n * \n * @param {*} value - Value to check.\n * @returns {boolean} True if transferable.\n */\nexport function isTransferable(value) {\n    if (value instanceof ArrayBuffer) return true;\n    if (value instanceof MessagePort) return true;\n    if (typeof ImageBitmap !== 'undefined' && value instanceof ImageBitmap) return true;\n    if (typeof OffscreenCanvas !== 'undefined' && value instanceof OffscreenCanvas) return true;\n    if (typeof ReadableStream !== 'undefined' && value instanceof ReadableStream) return true;\n    if (typeof WritableStream !== 'undefined' && value instanceof WritableStream) return true;\n    if (typeof TransformStream !== 'undefined' && value instanceof TransformStream) return true;\n    return false;\n}\n\n/**\n * Recursively finds all transferable objects in a value.\n * \n * @param {*} value - Value to search.\n * @param {Set<Transferable>} [found] - Set to collect transferables.\n * @returns {Transferable[]} Array of transferables found.\n */\nexport function findTransferables(value, found = new Set()) {\n    if (value === null || value === undefined) return Array.from(found);\n\n    if (isTransferable(value)) {\n        found.add(value);\n        return Array.from(found);\n    }\n\n    if (Array.isArray(value)) {\n        for (const item of value) {\n            findTransferables(item, found);\n        }\n    } else if (typeof value === 'object') {\n        for (const key of Object.keys(value)) {\n            findTransferables(value[key], found);\n        }\n    }\n\n    return Array.from(found);\n}\n","/**\n * @fileoverview Protocol message schemas for CrossBus.\n * All message types are frozen for immutability.\n * @module core/message-types\n */\n\n// Import MessageType from common/types to ensure consistent type codes\nimport { MessageType, PROTOCOL_MARKER as PROTOCOL_PREFIX, PROTOCOL_VERSION } from '../common/types.js';\n\n// Re-export for convenience\nexport { MessageType };\n\n/**\n * Delivery status constants.\n * @readonly\n * @enum {string}\n */\nexport const DeliveryStatus = Object.freeze({\n  /** Delivered to local listeners only */\n  LOCAL: 'local',\n  /** Sent to remote peer */\n  REMOTE: 'remote',\n  /** Queued for offline peer */\n  QUEUED: 'queued',\n  /** Delivery failed */\n  FAILED: 'failed'\n});\n\n/**\n * Peer connection status constants.\n * @readonly\n * @enum {string}\n */\nexport const PeerStatus = Object.freeze({\n  /** Connection in progress */\n  CONNECTING: 'connecting',\n  /** Successfully connected */\n  CONNECTED: 'connected',\n  /** Disconnected */\n  DISCONNECTED: 'disconnected',\n  /** Connection failed */\n  FAILED: 'failed'\n});\n\n/**\n * Peer type constants.\n * @readonly\n * @enum {string}\n */\nexport const PeerType = Object.freeze({\n  /** iframe element */\n  IFRAME: 'iframe',\n  /** Web Worker */\n  WORKER: 'worker',\n  /** Service Worker */\n  SERVICE_WORKER: 'service-worker',\n  /** Window (popup, tab) */\n  WINDOW: 'window',\n  /** MessagePort direct connection */\n  PORT: 'port',\n  /** Local (self) */\n  LOCAL: 'local'\n});\n\n// PROTOCOL_PREFIX and PROTOCOL_VERSION are imported from common/types.js\n\n/**\n * Creates a protocol message envelope.\n * \n * @param {MessageType} type - Message type.\n * @param {Object} payload - Message payload.\n * @param {Object} [meta={}] - Additional metadata.\n * @param {string|null} [id=null] - Optional custom message ID.\n * @returns {ProtocolMessage} Frozen message object.\n * \n * @typedef {Object} ProtocolMessage\n * @property {number} _cb - Protocol marker version (compact wire format).\n * @property {number} version - Protocol version.\n * @property {string} id - Unique message ID (UUID v4).\n * @property {MessageType} type - Message type.\n * @property {number} timestamp - Unix timestamp (ms).\n * @property {Object} payload - Message payload.\n * @property {Object} meta - Additional metadata.\n */\nexport function createMessage(type, payload, meta = {}, id = null) {\n  return Object.freeze({\n    [PROTOCOL_PREFIX]: PROTOCOL_VERSION,\n    version: PROTOCOL_VERSION,\n    id: id || crypto.randomUUID(),\n    type,\n    timestamp: Date.now(),\n    payload: Object.freeze({ ...payload }),\n    meta: Object.freeze({ ...meta })\n  });\n}\n\n/**\n * Creates a signal message.\n * \n * @param {string} name - Signal name.\n * @param {*} data - Signal data.\n * @param {string} sourcePeerId - Source peer ID.\n * @param {string|null} [destPeerId] - Destination peer ID.\n * @returns {ProtocolMessage} Signal message.\n */\nexport function createSignalMessage(name, data, sourcePeerId, destPeerId = null) {\n  return createMessage(MessageType.SIGNAL, {\n    name,\n    data,\n    source: sourcePeerId,\n    dest: destPeerId\n  });\n}\n\n/**\n * Creates a broadcast message.\n * \n * @param {string} name - Signal name.\n * @param {*} data - Signal data.\n * @param {string} sourcePeerId - Source peer ID.\n * @param {Object} [options={}] - Broadcast options.\n * @returns {ProtocolMessage} Broadcast message.\n */\nexport function createBroadcastMessage(name, data, sourcePeerId, options = {}) {\n  return createMessage(MessageType.BROADCAST, {\n    name,\n    data,\n    source: sourcePeerId,\n    options\n  });\n}\n\n/**\n * Creates a handshake init message.\n * \n * @param {string} peerId - Initiating peer ID.\n * @param {string} origin - Initiating peer origin.\n * @param {string} challenge - Random challenge string.\n * @returns {ProtocolMessage} Handshake init message.\n */\nexport function createHandshakeInit(peerId, origin, challenge) {\n  return createMessage(MessageType.HANDSHAKE_INIT, {\n    peerId,\n    origin,\n    challenge\n  });\n}\n\n/**\n * Creates a handshake acknowledgment message.\n * \n * @param {string} peerId - Responding peer ID.\n * @param {string} origin - Responding peer origin.\n * @param {string} challenge - Original challenge.\n * @param {string} response - Challenge response.\n * @returns {ProtocolMessage} Handshake ack message.\n */\nexport function createHandshakeAck(peerId, origin, challenge, response) {\n  return createMessage(MessageType.HANDSHAKE_ACK, {\n    peerId,\n    origin,\n    challenge,\n    response\n  });\n}\n\n/**\n * Creates a handshake complete message.\n * \n * @param {string} peerId - Confirming peer ID.\n * @param {boolean} success - Whether handshake succeeded.\n * @returns {ProtocolMessage} Handshake complete message.\n */\nexport function createHandshakeComplete(peerId, success) {\n  return createMessage(MessageType.HANDSHAKE_COMPLETE, {\n    peerId,\n    success\n  });\n}\n\n/**\n * Creates a request message (expecting response).\n * \n * @param {string} name - Request name.\n * @param {*} data - Request data.\n * @param {string} sourcePeerId - Source peer ID.\n * @param {string} destPeerId - Destination peer ID.\n * @param {string|null} [id=null] - Optional custom request ID.\n * @returns {ProtocolMessage} Request message.\n */\nexport function createRequestMessage(name, data, sourcePeerId, destPeerId, id = null) {\n  return createMessage(MessageType.REQUEST, {\n    name,\n    data,\n    source: sourcePeerId,\n    dest: destPeerId\n  }, {}, id);\n}\n\n/**\n * Creates a response message.\n * \n * @param {string} requestId - Original request message ID.\n * @param {*} data - Response data.\n * @param {string} sourcePeerId - Source peer ID.\n * @param {boolean} [success=true] - Whether request succeeded.\n * @param {Object|null} [error] - Error object if failed.\n * @returns {ProtocolMessage} Response message.\n */\nexport function createResponseMessage(requestId, data, sourcePeerId, success = true, error = null) {\n  return createMessage(MessageType.RESPONSE, {\n    requestId,\n    data,\n    source: sourcePeerId,\n    success,\n    error\n  });\n}\n\n/**\n * Validates if an object is a valid CrossBus protocol message.\n * \n * @param {*} obj - Object to validate.\n * @returns {boolean} True if valid protocol message.\n */\nexport function isProtocolMessage(obj) {\n  return (\n    obj !== null &&\n    typeof obj === 'object' &&\n    obj[PROTOCOL_PREFIX] === PROTOCOL_VERSION &&\n    typeof obj.version === 'number' &&\n    typeof obj.id === 'string' &&\n    (typeof obj.type === 'string' || typeof obj.t === 'string') &&\n    typeof obj.timestamp === 'number' &&\n    obj.payload !== undefined\n  );\n}\n\n/**\n * Validates protocol version compatibility.\n * \n * @param {ProtocolMessage} message - Message to check.\n * @returns {boolean} True if version is compatible.\n */\nexport function isCompatibleVersion(message) {\n  return message.version === PROTOCOL_VERSION;\n}\n","/**\n * @fileoverview Centralized error handling for CrossBus.\n * @module common/errors\n */\n\n/**\n * Error codes for CrossBus.\n * @readonly\n * @enum {string}\n */\nexport const ErrorCode = Object.freeze({\n    // Connection errors\n    HANDSHAKE_TIMEOUT: 'ERR_HANDSHAKE_TIMEOUT',\n    HANDSHAKE_REJECTED: 'ERR_HANDSHAKE_REJECTED',\n    ORIGIN_FORBIDDEN: 'ERR_ORIGIN_FORBIDDEN',\n    PEER_EXISTS: 'ERR_PEER_EXISTS',\n    PEER_NOT_FOUND: 'ERR_PEER_NOT_FOUND',\n    PEER_DISCONNECTED: 'ERR_PEER_DISCONNECTED',\n    RECONNECT_FAILED: 'ERR_RECONNECT_FAILED',\n    UNSUPPORTED: 'ERR_UNSUPPORTED',\n    NOT_CONNECTED: 'ERR_NOT_CONNECTED',\n\n    // Message errors\n    ACK_TIMEOUT: 'ERR_ACK_TIMEOUT',\n    RESPONSE_TIMEOUT: 'ERR_RESPONSE_TIMEOUT',\n    QUEUE_FULL: 'ERR_QUEUE_FULL',\n    INVALID_MESSAGE: 'ERR_INVALID_MESSAGE',\n    VERSION_MISMATCH: 'ERR_VERSION_MISMATCH',\n    CLONE_ERROR: 'ERR_CLONE_ERROR',\n    TRANSFER_ERROR: 'ERR_TRANSFER_ERROR',\n    MESSAGE_TOO_LARGE: 'ERR_MESSAGE_TOO_LARGE',\n\n    // Routing errors\n    UNREACHABLE: 'ERR_UNREACHABLE',\n    TTL_EXCEEDED: 'ERR_TTL_EXCEEDED',\n    NO_ROUTE: 'ERR_NO_ROUTE',\n\n    // Handler errors\n    NO_HANDLER: 'ERR_NO_HANDLER',\n    HANDLER_ERROR: 'ERR_HANDLER_ERROR',\n    HANDLER_TIMEOUT: 'ERR_HANDLER_TIMEOUT',\n    HANDLER_EXISTS: 'ERR_HANDLER_EXISTS',\n    SEND_FAILED: 'ERR_SEND_FAILED',\n\n    // Channel errors\n    CHANNEL_FAILED: 'ERR_CHANNEL_FAILED',\n    CHANNEL_CLOSED: 'ERR_CHANNEL_CLOSED',\n\n    // Resource errors\n    MAX_PEERS: 'ERR_MAX_PEERS',\n    MAX_PENDING: 'ERR_MAX_PENDING',\n    DESTROYED: 'ERR_DESTROYED',\n\n    // Circuit Breaker\n    CIRCUIT_OPEN: 'ERR_CIRCUIT_OPEN',\n\n    // Security errors\n    PAYLOAD_TOO_LARGE: 'ERR_PAYLOAD_TOO_LARGE',\n    RATE_LIMITED: 'ERR_RATE_LIMITED',\n    UNAUTHORIZED: 'ERR_UNAUTHORIZED',\n    INVALID_PAYLOAD: 'ERR_INVALID_PAYLOAD'\n});\n\n/**\n * Error metadata including default messages, retryability, and AI-friendly suggestions.\n * @type {Object<ErrorCode, {message: string, retryable: boolean, suggestion: string}>}\n */\nconst ERROR_META = Object.freeze({\n    [ErrorCode.HANDSHAKE_TIMEOUT]: {\n        message: 'Handshake timed out',\n        retryable: true,\n        suggestion: 'Increase timeout or check if target is loaded. Use iframe.onload before connecting.'\n    },\n    [ErrorCode.HANDSHAKE_REJECTED]: {\n        message: 'Handshake rejected by peer',\n        retryable: false,\n        suggestion: 'Check targetOrigin matches the peer\\'s origin. Verify peer allows your origin.'\n    },\n    [ErrorCode.ORIGIN_FORBIDDEN]: {\n        message: 'Origin not in allowed origins list',\n        retryable: false,\n        suggestion: 'Add your origin to allowedOrigins option or use targetOrigin: \"*\" for development.'\n    },\n    [ErrorCode.PEER_EXISTS]: {\n        message: 'Peer with this ID already exists',\n        retryable: false,\n        suggestion: 'Use unique peerId for each context. Try: peerId: `agent-${Date.now()}`'\n    },\n    [ErrorCode.PEER_NOT_FOUND]: {\n        message: 'Peer not found',\n        retryable: false,\n        suggestion: 'Check if peer is connected using bus.peers. Wait for peer connection before request.'\n    },\n    [ErrorCode.PEER_DISCONNECTED]: {\n        message: 'Peer is disconnected',\n        retryable: true,\n        suggestion: 'Wait for peer to reconnect. Listen for \"peer:join\" event before retry.'\n    },\n    [ErrorCode.RECONNECT_FAILED]: {\n        message: 'Max reconnection attempts reached',\n        retryable: false,\n        suggestion: 'Check network connectivity. Consider increasing maxRetries option.'\n    },\n    [ErrorCode.UNSUPPORTED]: {\n        message: 'Operation not supported by this environment',\n        retryable: false,\n        suggestion: 'This feature requires a browser environment. Check for feature availability first.'\n    },\n    [ErrorCode.NOT_CONNECTED]: {\n        message: 'Transport is not connected',\n        retryable: true,\n        suggestion: 'Call addTransport() and wait for connection before sending messages.'\n    },\n    [ErrorCode.ACK_TIMEOUT]: {\n        message: 'ACK not received within timeout',\n        retryable: true,\n        suggestion: 'Increase ackTimeout option or check peer availability.'\n    },\n    [ErrorCode.RESPONSE_TIMEOUT]: {\n        message: 'Response not received within timeout',\n        retryable: true,\n        suggestion: 'Increase timeout in request options: { timeout: 10000 }. Check if handler exists on peer.'\n    },\n    [ErrorCode.QUEUE_FULL]: {\n        message: 'Message queue is full',\n        retryable: false,\n        suggestion: 'Increase maxQueueSize or wait for queue to drain. Consider using batching plugin.'\n    },\n    [ErrorCode.INVALID_MESSAGE]: {\n        message: 'Invalid message format',\n        retryable: false,\n        suggestion: 'Ensure message data is JSON-serializable. Avoid DOM nodes and functions.'\n    },\n    [ErrorCode.VERSION_MISMATCH]: {\n        message: 'Protocol version mismatch',\n        retryable: false,\n        suggestion: 'Update CrossBus to same version on both sides.'\n    },\n    [ErrorCode.CLONE_ERROR]: {\n        message: 'Data cannot be cloned (contains functions or DOM nodes)',\n        retryable: false,\n        suggestion: 'Remove functions, DOM nodes, and circular references from message data.'\n    },\n    [ErrorCode.TRANSFER_ERROR]: {\n        message: 'Failed to transfer object ownership',\n        retryable: false,\n        suggestion: 'Ensure ArrayBuffers are not detached. Each buffer can only be transferred once.'\n    },\n    [ErrorCode.MESSAGE_TOO_LARGE]: {\n        message: 'Message exceeds maximum size',\n        retryable: false,\n        suggestion: 'Use streaming for large payloads or increase maxMessageSize option.'\n    },\n    [ErrorCode.UNREACHABLE]: {\n        message: 'Destination peer is unreachable',\n        retryable: true,\n        suggestion: 'Check if peer is still connected. Use bus.peers to list available peers.'\n    },\n    [ErrorCode.TTL_EXCEEDED]: {\n        message: 'Message TTL exceeded (possible routing loop)',\n        retryable: false,\n        suggestion: 'Check for circular transport configurations. Increase maxTTL if needed.'\n    },\n    [ErrorCode.NO_ROUTE]: {\n        message: 'No route to destination',\n        retryable: false,\n        suggestion: 'Add transport connecting to target peer. Set isHub: true on orchestrator.'\n    },\n    [ErrorCode.NO_HANDLER]: {\n        message: 'No handler registered for this request',\n        retryable: false,\n        suggestion: 'Register handler on target: bus.handle(\"handlerName\", fn). Check handler name spelling.'\n    },\n    [ErrorCode.HANDLER_ERROR]: {\n        message: 'Handler threw an exception',\n        retryable: false,\n        suggestion: 'Check target peer logs for error. Wrap handler in try/catch.'\n    },\n    [ErrorCode.HANDLER_TIMEOUT]: {\n        message: 'Handler did not respond within timeout',\n        retryable: true,\n        suggestion: 'Handler is slow. Increase timeout or optimize handler performance.'\n    },\n    [ErrorCode.HANDLER_EXISTS]: {\n        message: 'Handler already registered with this name',\n        retryable: false,\n        suggestion: 'Use different handler name or call bus.removeHandler() first.'\n    },\n    [ErrorCode.SEND_FAILED]: {\n        message: 'Failed to send message to peer',\n        retryable: true,\n        suggestion: 'Check transport status. Target window may be closed or blocked.'\n    },\n    [ErrorCode.CHANNEL_FAILED]: {\n        message: 'Failed to create direct channel',\n        retryable: true,\n        suggestion: 'Check browser support for MessageChannel. Retry after short delay.'\n    },\n    [ErrorCode.CHANNEL_CLOSED]: {\n        message: 'Channel was closed unexpectedly',\n        retryable: false,\n        suggestion: 'Target context was destroyed. Check if iframe/worker still exists.'\n    },\n    [ErrorCode.MAX_PEERS]: {\n        message: 'Maximum number of peers reached',\n        retryable: false,\n        suggestion: 'Increase maxPeers option or disconnect unused peers first.'\n    },\n    [ErrorCode.MAX_PENDING]: {\n        message: 'Maximum pending requests reached',\n        retryable: false,\n        suggestion: 'Wait for pending requests to complete. Increase maxPendingRequests option.'\n    },\n    [ErrorCode.DESTROYED]: {\n        message: 'CrossBus instance has been destroyed',\n        retryable: false,\n        suggestion: 'Create new CrossBus instance. Do not use bus after calling destroy().'\n    },\n    [ErrorCode.CIRCUIT_OPEN]: {\n        message: 'Circuit breaker is open',\n        retryable: false,\n        suggestion: 'Too many failures. Wait for circuit to reset or call circuit.reset().'\n    },\n    [ErrorCode.PAYLOAD_TOO_LARGE]: {\n        message: 'Payload exceeds maximum allowed size',\n        retryable: false,\n        suggestion: 'Reduce payload size or increase maxPayloadSize option. Consider using streaming for large data.'\n    },\n    [ErrorCode.RATE_LIMITED]: {\n        message: 'Request rate limit exceeded',\n        retryable: true,\n        suggestion: 'Wait before retrying. Consider adding delay or using exponential backoff.'\n    },\n    [ErrorCode.UNAUTHORIZED]: {\n        message: 'Peer is not authorized to call this handler',\n        retryable: false,\n        suggestion: 'Add peer to handler allowedPeers list or remove peer restrictions.'\n    },\n    [ErrorCode.INVALID_PAYLOAD]: {\n        message: 'Payload validation failed',\n        retryable: false,\n        suggestion: 'Check payload structure against handler requirements.'\n    }\n});\n\n/**\n * Custom error class for CrossBus.\n * \n * @extends Error\n * \n * @example\n * try {\n *   await bus.emit('msg', data, 'unknown-peer');\n * } catch (err) {\n *   if (err instanceof CrossBusError) {\n *     console.log(err.code);      // 'ERR_PEER_NOT_FOUND'\n *     console.log(err.message);   // 'Peer not found'\n *     console.log(err.details);   // { peerId: 'unknown-peer' }\n *     console.log(err.retryable); // false\n *   }\n * }\n */\nexport class CrossBusError extends Error {\n    /**\n     * Error code.\n     * @type {ErrorCode}\n     */\n    code;\n\n    /**\n     * Additional error context.\n     * @type {Object}\n     */\n    details;\n\n    /**\n     * Whether the operation can be retried.\n     * @type {boolean}\n     */\n    retryable;\n\n    /**\n     * Original error that caused this error.\n     * @type {Error|undefined}\n     */\n    cause;\n\n    /**\n     * Timestamp when error occurred.\n     * @type {number}\n     */\n    timestamp;\n\n    /**\n     * Creates a new CrossBusError.\n     * \n     * @param {ErrorCode} code - Error code.\n     * @param {string} [message] - Custom message (uses default if omitted).\n     * @param {Object} [options] - Additional options.\n     * @param {Object} [options.details={}] - Error context.\n     * @param {boolean} [options.retryable] - Override default retryable.\n     * @param {Error} [options.cause] - Original error.\n     */\n    constructor(code, message, options = {}) {\n        const meta = ERROR_META[code] ?? { message: 'Unknown error', retryable: false };\n        super(message ?? meta.message);\n\n        this.name = 'CrossBusError';\n        this.code = code;\n        this.details = options.details ?? {};\n        this.retryable = options.retryable ?? meta.retryable;\n        this.cause = options.cause;\n        this.timestamp = Date.now();\n\n        // Maintain proper stack trace in V8\n        if (Error.captureStackTrace) {\n            Error.captureStackTrace(this, CrossBusError);\n        }\n    }\n\n    /**\n     * Creates error from code with default message.\n     * \n     * @param {ErrorCode} code - Error code.\n     * @param {Object} [details] - Error context.\n     * @returns {CrossBusError}\n     */\n    static from(code, details = {}) {\n        return new CrossBusError(code, undefined, { details });\n    }\n\n    /**\n     * Creates error from another error.\n     * \n     * @param {ErrorCode} code - Error code.\n     * @param {Error} cause - Original error.\n     * @param {Object} [details] - Additional context.\n     * @returns {CrossBusError}\n     */\n    static wrap(code, cause, details = {}) {\n        return new CrossBusError(code, cause.message, { cause, details });\n    }\n\n    /**\n     * Converts error to JSON-serializable object.\n     * @returns {Object}\n     */\n    toJSON() {\n        return {\n            name: this.name,\n            code: this.code,\n            message: this.message,\n            details: this.details,\n            retryable: this.retryable,\n            timestamp: this.timestamp\n        };\n    }\n\n    /**\n     * String representation.\n     * @returns {string}\n     */\n    toString() {\n        return `${this.name} [${this.code}]: ${this.message}`;\n    }\n}\n\n/**\n * Checks if an error is a CrossBusError.\n * \n * @param {*} err - Value to check.\n * @returns {boolean}\n */\nexport function isCrossBusError(err) {\n    return err instanceof CrossBusError;\n}\n\n/**\n * Checks if an error is retryable.\n * \n * @param {Error} err - Error to check.\n * @returns {boolean}\n */\nexport function isRetryable(err) {\n    if (err instanceof CrossBusError) {\n        return err.retryable;\n    }\n    return false;\n}\n","/**\n * @fileoverview Utility functions shared across modules.\n * @module common/utils\n */\n\n/**\n * Generates a UUID v4.\n * Uses crypto.randomUUID() when available, falls back to manual generation.\n * \n * @returns {string} UUID v4 string.\n */\nexport function uuid() {\n    if (typeof crypto !== 'undefined' && crypto.randomUUID) {\n        return crypto.randomUUID();\n    }\n    // Fallback for older browsers\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\n        const r = Math.random() * 16 | 0;\n        const v = c === 'x' ? r : (r & 0x3 | 0x8);\n        return v.toString(16);\n    });\n}\n\n/**\n * Checks if data can be structured cloned.\n * \n * @param {*} data - Data to check.\n * @returns {boolean} True if cloneable.\n */\nexport function isCloneable(data) {\n    if (data === null || data === undefined) return true;\n\n    const type = typeof data;\n\n    // Primitives are always cloneable\n    if (type === 'boolean' || type === 'number' || type === 'string') {\n        return true;\n    }\n\n    // Functions and symbols are not cloneable\n    if (type === 'function' || type === 'symbol') {\n        return false;\n    }\n\n    // Check for DOM nodes\n    if (typeof Node !== 'undefined' && data instanceof Node) {\n        return false;\n    }\n\n    // Check for WeakMap/WeakSet\n    if (data instanceof WeakMap || data instanceof WeakSet) {\n        return false;\n    }\n\n    // For objects/arrays, we'd need to recursively check\n    // For performance, we assume they're cloneable and let postMessage fail\n    return true;\n}\n\n/**\n * Creates a deferred promise (Promise.withResolvers polyfill).\n * Uses native Promise.withResolvers() when available (ES2024+).\n * \n * @template T\n * @returns {{promise: Promise<T>, resolve: (value: T) => void, reject: (reason: any) => void}}\n */\nexport function deferred() {\n    // Use native Promise.withResolvers if available (ES2024+, ~10x faster)\n    // @ts-ignore\n    if (typeof Promise.withResolvers === 'function') {\n        // @ts-ignore\n        return Promise.withResolvers();\n    }\n    // Fallback for older engines\n    let resolve, reject;\n    const promise = new Promise((res, rej) => {\n        resolve = res;\n        reject = rej;\n    });\n    // @ts-ignore\n    return { promise, resolve, reject };\n}\n\n/**\n * Creates a promise that resolves after a timeout.\n * \n * @param {number} ms - Timeout in milliseconds.\n * @param {AbortSignal} [signal] - Optional abort signal.\n * @returns {Promise<void>}\n */\nexport function sleep(ms, signal) {\n    return new Promise((resolve, reject) => {\n        if (signal?.aborted) {\n            reject(signal.reason ?? new Error('Aborted'));\n            return;\n        }\n\n        const timeoutId = setTimeout(resolve, ms);\n\n        if (signal) {\n            signal.addEventListener('abort', () => {\n                clearTimeout(timeoutId);\n                reject(signal.reason ?? new Error('Aborted'));\n            }, { once: true });\n        }\n    });\n}\n\n/**\n * Creates a promise that rejects after a timeout.\n * \n * @template T\n * @param {Promise<T>} promise - Promise to race against.\n * @param {number} ms - Timeout in milliseconds.\n * @param {string} [message='Operation timed out'] - Timeout error message.\n * @returns {Promise<T>}\n */\nexport function withTimeout(promise, ms, message = 'Operation timed out') {\n    return Promise.race([\n        promise,\n        new Promise((_, reject) => {\n            setTimeout(() => reject(new Error(message)), ms);\n        })\n    ]);\n}\n\n\n\n/**\n * Detects the type of a peer target.\n * \n * @param {*} target - Target to check.\n * @returns {'iframe'|'worker'|'sw'|'window'|'port'|'unknown'}\n */\nexport function detectPeerType(target) {\n    // MessagePort\n    if (target instanceof MessagePort) {\n        return 'port';\n    }\n\n    // Worker\n    if (typeof Worker !== 'undefined' && target instanceof Worker) {\n        return 'worker';\n    }\n\n    // ServiceWorker\n    if (typeof ServiceWorker !== 'undefined' && target instanceof ServiceWorker) {\n        return 'sw';\n    }\n\n    // Window (iframe or popup)\n    if (typeof Window !== 'undefined' && target instanceof Window) {\n        return 'window';\n    }\n\n    // HTMLIFrameElement\n    if (typeof HTMLIFrameElement !== 'undefined' && target instanceof HTMLIFrameElement) {\n        return 'iframe';\n    }\n\n    // DedicatedWorkerGlobalScope (inside worker)\n    if (typeof DedicatedWorkerGlobalScope !== 'undefined' &&\n        target instanceof DedicatedWorkerGlobalScope) {\n        return 'worker';\n    }\n\n    return 'unknown';\n}\n\n\n\n/**\n * Creates a frozen timestamp object.\n * \n * @returns {{timestamp: number, iso: string}}\n */\nexport function timestamp() {\n    const ts = Date.now();\n    return Object.freeze({\n        timestamp: ts,\n        iso: new Date(ts).toISOString()\n    });\n}\n\n\n","/**\n * @fileoverview Message router for hub-based routing.\n * Routes messages between peers through a central hub.\n * @module router/message-router\n */\n\nimport { MessageType, PeerStatus } from '../common/types.js';\nimport { CrossBusError, ErrorCode } from '../common/errors.js';\nimport { EventEmitter } from '../core/event-emitter.js';\n\n/**\n * @typedef {Object} RoutingEntry\n * @property {string} peerId - Peer identifier.\n * @property {Function} sendFn - Function to send to this peer.\n * @property {Object} meta - Peer metadata.\n * @property {string} origin - Peer origin.\n * @property {PeerStatus} status - Connection status.\n * @property {number} connectedAt - Connection timestamp.\n */\n\n/**\n * @typedef {Object} RouteResult\n * @property {boolean} success - Whether routing succeeded.\n * @property {number} delivered - Number of peers message was delivered to.\n * @property {string[]} failed - Peer IDs that failed delivery.\n */\n\n/**\n * Message router for hub-based communication pattern.\n * \n * In hub mode, all messages flow through a central router which:\n * - Maintains peer registry\n * - Routes unicast messages to specific peers\n * - Broadcasts messages to all/selected peers\n * - Tracks message delivery\n * \n * Performance optimizations:\n * - Object-based cache for fast peer lookup (faster than Map.get)\n * - Direct sendFn cache to avoid property indirection\n * - Unrolled loops for common broadcast patterns\n * \n * @example\n * const router = new MessageRouter();\n * \n * // Register peers\n * router.addPeer('widget-1', (msg) => iframe1.postMessage(msg));\n * router.addPeer('widget-2', (msg) => iframe2.postMessage(msg));\n * \n * // Route unicast\n * router.route({ target: 'widget-1', payload: data });\n * \n * // Route broadcast\n * router.broadcast({ payload: data });\n */\nexport class MessageRouter extends EventEmitter {\n    /** @type {Map<string, RoutingEntry>} Full feature storage */\n    #peers = new Map();\n\n    /** @type {number} */\n    #messageSeq = 0;\n\n    /** @type {Map<string, number>} Per-peer sequence numbers */\n    #peerSeq = new Map();\n\n    /** @type {Object<string, RoutingEntry>} Fast Object-based cache for peer lookup */\n    #peerCache = Object.create(null);\n\n    /** @type {Object<string, Function>} Fast Object-based cache for sendFn direct access */\n    #sendFnCache = Object.create(null);\n\n    /** @type {string[]} Cached peer IDs array for fast iteration */\n    #peerIds = [];\n\n    /**\n     * Creates a new message router.\n     */\n    constructor() {\n        super();\n    }\n\n    /**\n     * Adds a peer to the routing table.\n     * \n     * @param {string} peerId - Unique peer identifier.\n     * @param {EventListener} sendFn - Function to send messages to peer.\n     * @param {Object} [options={}] - Additional options.\n     * @param {Object} [options.meta={}] - Peer metadata.\n     * @param {string} [options.origin='unknown'] - Peer origin.\n     * @throws {CrossBusError} If peer already exists.\n     * \n     * @example\n     * router.addPeer('iframe-widget', (msg) => {\n     *   iframe.contentWindow.postMessage(msg, '*');\n     * }, { meta: { type: 'widget' } });\n     */\n    addPeer(peerId, sendFn, options = {}) {\n        if (this.#peers.has(peerId)) {\n            throw CrossBusError.from(ErrorCode.PEER_EXISTS, { peerId });\n        }\n\n        if (typeof sendFn !== 'function') {\n            throw new TypeError('sendFn must be a function');\n        }\n\n        /** @type {RoutingEntry} */\n        const entry = {\n            peerId,\n            sendFn,\n            meta: options.meta ?? {},\n            origin: options.origin ?? 'unknown',\n            status: PeerStatus.CONNECTED,\n            connectedAt: Date.now()\n        };\n\n        // Full feature storage\n        this.#peers.set(peerId, entry);\n        this.#peerSeq.set(peerId, 0);\n\n        // Sync fast caches for O(1) lookup\n        this.#peerCache[peerId] = entry;\n        this.#sendFnCache[peerId] = sendFn;\n        this.#peerIds.push(peerId);\n\n        // Emit peer added event\n        this.emit('peer:added', { peerId, meta: entry.meta });\n    }\n\n    /**\n     * Removes a peer from the routing table.\n     * \n     * @param {string} peerId - Peer to remove.\n     * @returns {boolean} True if peer was removed.\n     */\n    removePeer(peerId) {\n        const peer = this.#peerCache[peerId];\n        if (!peer) return false;\n\n        // Full storage cleanup\n        this.#peers.delete(peerId);\n        this.#peerSeq.delete(peerId);\n\n        // Sync fast caches\n        delete this.#peerCache[peerId];\n        delete this.#sendFnCache[peerId];\n        const idx = this.#peerIds.indexOf(peerId);\n        if (idx !== -1) this.#peerIds.splice(idx, 1);\n\n        // Emit peer removed event\n        this.emit('peer:removed', { peerId, meta: peer.meta });\n\n        return true;\n    }\n\n    /**\n     * Gets a peer by ID.\n     * \n     * @param {string} peerId\n     * @returns {RoutingEntry|undefined}\n     */\n    getPeer(peerId) {\n        // Fast Object-based lookup (faster than Map.get)\n        return this.#peerCache[peerId];\n    }\n\n    /**\n     * Gets all connected peer IDs.\n     * \n     * @returns {string[]}\n     */\n    getPeerIds() {\n        // Return cached array (avoids Array.from overhead)\n        return this.#peerIds.slice();\n    }\n\n    /**\n     * Gets count of connected peers.\n     * \n     * @returns {number}\n     */\n    get peerCount() {\n        return this.#peers.size;\n    }\n\n    /**\n     * Routes a message to a specific peer or broadcasts.\n     * \n     * @param {Object} message - Message to route.\n     * @param {string} [message.target] - Target peer ID (omit for broadcast).\n     * @param {Object} message.payload - Message payload.\n     * @param {Object} [options] - Broadcast options\n     * @param {string[]} [options.exclude] - Peer IDs to exclude from broadcast.\n     * @returns {RouteResult}\n     */\n    route(message, options = {}) {\n        const { target, payload } = message;\n\n        if (target) {\n            // Unicast to specific peer\n            return this.#routeUnicast(target, payload);\n        } else {\n            // Broadcast to all peers - lazy Set creation\n            const excludeArr = options.exclude;\n            const exclude = excludeArr?.length ? new Set(excludeArr) : null;\n            return this.#routeBroadcast(payload, exclude);\n        }\n    }\n\n    /**\n     * Broadcasts a message to all peers.\n     * \n     * @param {Object} payload - Message payload.\n     * @param {Object} [options={}] - Broadcast options.\n     * @param {string[]} [options.exclude] - Peers to exclude.\n     * @param {string[]} [options.include] - Only include these peers.\n     * @returns {RouteResult}\n     */\n    broadcast(payload, options = {}) {\n        // Lazy Set creation - skip allocation when not needed\n        const excludeArr = options.exclude;\n        const exclude = excludeArr?.length ? new Set(excludeArr) : null;\n        const includeArr = options.include;\n        const include = includeArr?.length ? new Set(includeArr) : null;\n\n        let delivered = 0;\n        const failed = [];\n\n        for (const [peerId, peer] of this.#peers) {\n            // Skip excluded peers\n            if (exclude?.has(peerId)) continue;\n\n            // Skip if not in include list (when specified)\n            if (include && !include.has(peerId)) continue;\n\n            // Skip disconnected peers\n            if (peer.status !== PeerStatus.CONNECTED) continue;\n\n            try {\n                const envelope = this.#createEnvelope(peerId, payload, MessageType.BROADCAST);\n                peer.sendFn(envelope);\n                delivered++;\n            } catch (error) {\n                console.error(`[Router] Failed to send to ${peerId}:`, error);\n                failed.push(peerId);\n            }\n        }\n\n        return { success: failed.length === 0, delivered, failed };\n    }\n\n    /**\n     * Gets the next sequence number for a peer.\n     * Used for causal ordering in SignalStore.\n     * \n     * @param {string} peerId\n     * @returns {number}\n     */\n    getSequence(peerId) {\n        return this.#peerSeq.get(peerId) ?? 0;\n    }\n\n    /**\n     * Updates peer status.\n     * \n     * @param {string} peerId\n     * @param {PeerStatus} status\n     */\n    setPeerStatus(peerId, status) {\n        const peer = this.#peerCache[peerId];\n        if (peer) {\n            peer.status = status;\n            this.emit('peer:status', { peerId, status });\n        }\n    }\n\n    /**\n     * Clears all peers.\n     */\n    clearPeers() {\n        // Fast iteration using cached array\n        const peerIds = this.#peerIds.slice();\n        for (const peerId of peerIds) {\n            this.removePeer(peerId);\n        }\n    }\n\n    // \n    // Private methods\n    // \n\n    /**\n     * Routes to a single peer.\n     * \n     */\n    #routeUnicast(peerId, payload) {\n        const peer = this.#peerCache[peerId];\n\n        if (!peer) {\n            return {\n                success: false,\n                delivered: 0,\n                failed: [peerId],\n                error: ErrorCode.PEER_NOT_FOUND\n            };\n        }\n\n        if (peer.status !== PeerStatus.CONNECTED) {\n            return {\n                success: false,\n                delivered: 0,\n                failed: [peerId],\n                error: ErrorCode.PEER_DISCONNECTED\n            };\n        }\n\n        try {\n            // If payload is already a protocol message (has the marker), send directly\n            // Otherwise wrap in envelope for signals/broadcasts\n            const messageToSend = (payload && payload._cb)\n                ? payload\n                : this.#createEnvelope(peerId, payload, MessageType.SIGNAL);\n            peer.sendFn(messageToSend);\n            return { success: true, delivered: 1, failed: [] };\n        } catch (error) {\n            console.error(`[Router] Failed to send to ${peerId}:`, error);\n            return { success: false, delivered: 0, failed: [peerId] };\n        }\n    }\n\n    /**\n     * Broadcasts to multiple peers.\n     * \n     */\n    #routeBroadcast(payload, exclude) {\n        // exclude is already a Set or null from route()\n        return this.broadcast(payload, exclude ? { exclude: Array.from(exclude) } : {});\n    }\n\n    /**\n     * Creates a message envelope with routing info.\n     * \n     */\n    #createEnvelope(peerId, payload, type) {\n        // Increment per-peer sequence\n        const seq = (this.#peerSeq.get(peerId) ?? 0) + 1;\n        this.#peerSeq.set(peerId, seq);\n\n        return {\n            id: `msg_${++this.#messageSeq}`,\n            t: type,\n            ts: Date.now(),\n            seq,\n            p: payload\n        };\n    }\n}\n","/**\n * @fileoverview Pending requests tracker for request/response pattern.\n * Tracks outgoing requests and matches them with responses.\n * @module router/pending-requests\n */\n\nimport { CrossBusError, ErrorCode } from '../common/errors.js';\nimport { deferred, withTimeout } from '../common/utils.js';\n\n/**\n * @typedef {Object} PendingRequest\n * @property {string} id - Request ID.\n * @property {string} targetPeer - Target peer ID.\n * @property {string} handlerName - Name of the handler.\n * @property {number} createdAt - When request was created.\n * @property {number} timeout - Timeout in ms.\n * @property {Function} resolve - Promise resolve function.\n * @property {Function} reject - Promise reject function.\n * @property {*} [defaultValue] - Value to return on timeout.\n */\n\n/**\n * @typedef {Object} RequestOptions\n * @property {number} [timeout=30000] - Request timeout in ms.\n * @property {*} [defaultValue] - Value to return on timeout instead of throwing.\n */\n\n/**\n * @typedef {Object} ResponseData\n * @property {string} requestId - Original request ID.\n * @property {boolean} success - Whether handler succeeded.\n * @property {*} [data] - Response data if successful.\n * @property {Object} [error] - Error if failed.\n */\n\n/**\n * Tracks pending requests and matches responses.\n * \n * Supports:\n * - Timeout handling\n * - Automatic cleanup\n * - Error propagation\n * - Request cancellation\n * \n * @example\n * const tracker = new PendingRequests();\n * \n * // Create request\n * const { requestId, promise } = tracker.create('peer-1', 'getData', {\n *   timeout: 5000\n * });\n * \n * // Send request via transport...\n * transport.send({ id: requestId, type: 'request', handler: 'getData' });\n * \n * // When response arrives:\n * tracker.resolve(requestId, responseData);\n * \n * // Or wait for response:\n * const result = await promise;\n */\nexport class PendingRequests {\n    /** @type {Map<string, PendingRequest>} Full feature storage */\n    #pending = new Map();\n\n    /** @type {Object<string, PendingRequest>} Fast Object-based cache for lookup */\n    #cache = Object.create(null);\n\n    /** @type {number} */\n    #requestCounter = 0;\n\n    /** @type {number} Default timeout */\n    #defaultTimeout;\n\n    /** @type {number} Maximum pending requests */\n    #maxPending;\n\n    /**\n     * Creates a new pending requests tracker.\n     * \n     * @param {Object} [options={}]\n     * @param {number} [options.defaultTimeout=30000] - Default timeout in ms.\n     * @param {number} [options.maxPending=1000] - Maximum pending requests (0 = unlimited).\n     */\n    constructor(options = {}) {\n        this.#defaultTimeout = options.defaultTimeout ?? 30000;\n        this.#maxPending = options.maxPending ?? 1000;\n    }\n\n    /**\n     * Creates a new pending request.\n     * \n     * @param {string} targetPeer - Target peer ID.\n     * @param {string} handlerName - Name of the handler to invoke.\n     * @param {RequestOptions} [options={}] - Request options.\n     * @returns {{ requestId: string, promise: Promise<*> }}\n     * \n     * @example\n     * const { requestId, promise } = tracker.create('widget', 'getState');\n     * const result = await promise;\n     */\n    create(targetPeer, handlerName, options = {}) {\n        // Enforce max pending limit to prevent memory exhaustion\n        if (this.#maxPending > 0 && this.#pending.size >= this.#maxPending) {\n            throw CrossBusError.from(ErrorCode.MAX_PENDING, {\n                current: this.#pending.size,\n                max: this.#maxPending,\n                targetPeer,\n                handlerName\n            });\n        }\n\n        const now = Date.now();\n        const requestId = `req_${++this.#requestCounter}_${now}`;\n        const timeout = options.timeout ?? this.#defaultTimeout;\n        const { promise, resolve, reject } = deferred();\n\n        /** @type {PendingRequest} */\n        const pending = {\n            id: requestId,\n            targetPeer,\n            handlerName,\n            createdAt: now,\n            timeout,\n            resolve,\n            reject,\n            defaultValue: options.defaultValue\n        };\n\n        this.#pending.set(requestId, pending);\n        this.#cache[requestId] = pending;  // Sync fast cache\n\n        // Set up timeout\n        const timeoutPromise = withTimeout(promise, timeout).catch(error => {\n            // Cleanup on timeout - use cache for fast check\n            if (requestId in this.#cache) {\n                this.#pending.delete(requestId);\n                delete this.#cache[requestId];\n\n                // Return default value if provided\n                if ('defaultValue' in options) {\n                    return options.defaultValue;\n                }\n\n                throw CrossBusError.from(ErrorCode.RESPONSE_TIMEOUT, {\n                    requestId,\n                    targetPeer,\n                    handlerName,\n                    timeout\n                });\n            }\n            throw error;\n        });\n\n        return { requestId, promise: timeoutPromise };\n    }\n\n    /**\n     * Resolves a pending request with response data.\n     * \n     * @param {string} requestId - Request ID to resolve.\n     * @param {ResponseData} response - Response data.\n     * @returns {boolean} True if request was found and resolved.\n     */\n    resolve(requestId, response) {\n        const pending = this.#cache[requestId];\n        if (!pending) return false;\n\n        // Sync both storages\n        this.#pending.delete(requestId);\n        delete this.#cache[requestId];\n\n        if (response.success) {\n            pending.resolve(response.data);\n        } else {\n            const error = CrossBusError.from(\n                response.error?.code ?? ErrorCode.HANDLER_ERROR,\n                {\n                    requestId,\n                    targetPeer: pending.targetPeer,\n                    handlerName: pending.handlerName,\n                    originalError: response.error\n                }\n            );\n            error.message = response.error?.message ?? 'Handler error';\n            pending.reject(error);\n        }\n\n        return true;\n    }\n\n    /**\n     * Rejects a pending request with an error.\n     * \n     * @param {string} requestId - Request ID to reject.\n     * @param {Error|string} error - Error or error message.\n     * @returns {boolean} True if request was found and rejected.\n     */\n    reject(requestId, error) {\n        const pending = this.#cache[requestId];\n        if (!pending) return false;\n\n        // Sync both storages\n        this.#pending.delete(requestId);\n        delete this.#cache[requestId];\n\n        const err = error instanceof Error ? error : new Error(error);\n        pending.reject(err);\n\n        return true;\n    }\n\n    /**\n     * Cancels a pending request.\n     * \n     * @param {string} requestId - Request ID to cancel.\n     * @returns {boolean} True if request was found and cancelled.\n     */\n    cancel(requestId) {\n        const pending = this.#cache[requestId];\n        if (!pending) return false;\n\n        // Sync both storages\n        this.#pending.delete(requestId);\n        delete this.#cache[requestId];\n        pending.reject(new Error('Request cancelled'));\n\n        return true;\n    }\n\n    /**\n     * Cancels all pending requests for a peer.\n     * Used when peer disconnects.\n     * \n     * @param {string} peerId - Peer ID.\n     * @returns {number} Number of requests cancelled.\n     */\n    cancelForPeer(peerId) {\n        let count = 0;\n\n        for (const [requestId, pending] of this.#pending) {\n            if (pending.targetPeer === peerId) {\n                this.#pending.delete(requestId);\n                delete this.#cache[requestId];  // Sync cache\n                pending.reject(CrossBusError.from(ErrorCode.PEER_DISCONNECTED, {\n                    peerId,\n                    requestId\n                }));\n                count++;\n            }\n        }\n\n        return count;\n    }\n\n    /**\n     * Cancels all pending requests.\n     * \n     * @returns {number} Number of requests cancelled.\n     */\n    cancelAll() {\n        const count = this.#pending.size;\n\n        for (const [requestId, pending] of this.#pending) {\n            pending.reject(new Error('All requests cancelled'));\n        }\n\n        this.#pending.clear();\n        // Reset cache to empty object\n        for (const key in this.#cache) {\n            delete this.#cache[key];\n        }\n        return count;\n    }\n\n    /**\n     * Checks if a request is pending.\n     * \n     * @param {string} requestId\n     * @returns {boolean}\n     */\n    has(requestId) {\n        // Fast Object-based check (faster than Map.has)\n        return requestId in this.#cache;\n    }\n\n    /**\n     * Gets a pending request.\n     * \n     * @param {string} requestId\n     * @returns {PendingRequest|undefined}\n     */\n    get(requestId) {\n        // Fast Object-based lookup\n        return this.#cache[requestId];\n    }\n\n    /**\n     * Gets count of pending requests.\n     * @returns {number}\n     */\n    get size() {\n        return this.#pending.size;\n    }\n\n    /**\n     * Gets all pending request IDs.\n     * @returns {string[]}\n     */\n    getRequestIds() {\n        return Array.from(this.#pending.keys());\n    }\n\n    /**\n     * Gets pending requests for a specific peer.\n     * \n     * @param {string} peerId\n     * @returns {PendingRequest[]}\n     */\n    getForPeer(peerId) {\n        const requests = [];\n        for (const pending of this.#pending.values()) {\n            if (pending.targetPeer === peerId) {\n                requests.push(pending);\n            }\n        }\n        return requests;\n    }\n}\n","/**\n * @fileoverview Secure handshake protocol for peer negotiation.\n * Handles connection establishment, authentication, and capability exchange.\n * @module security/handshake\n */\n\nimport { MessageType, HandshakePhase } from '../common/types.js';\nimport { ErrorCode } from '../common/errors.js';\nimport { uuid, deferred, withTimeout } from '../common/utils.js';\n\n/**\n * @typedef {Object} HandshakeConfig\n * @property {string} [peerId] - Our peer ID (auto-generated if not specified).\n * @property {number} [timeout=10000] - Handshake timeout in ms.\n * @property {Object} [meta={}] - Metadata to share with peer.\n * @property {string[]} [capabilities=[]] - Supported capabilities.\n */\n\n/**\n * @typedef {Object} PeerInfo\n * @property {string} peerId - Remote peer's ID.\n * @property {string} origin - Remote peer's origin.\n * @property {string} type - Remote peer's type (iframe, worker, etc).\n * @property {Object} meta - Remote peer's metadata.\n * @property {string[]} capabilities - Remote peer's capabilities.\n * @property {number} connectedAt - Connection timestamp.\n */\n\n/**\n * @typedef {Object} HandshakeResult\n * @property {boolean} success - Whether handshake succeeded.\n * @property {PeerInfo} [peer] - Peer info if successful.\n * @property {string} [error] - Error code if failed.\n * @property {string} [reason] - Error reason if failed.\n */\n\n/**\n * Handshake protocol for secure peer establishment.\n * \n * Protocol flow:\n * ```\n * INITIATOR                          RESPONDER\n *                                        \n *       HANDSHAKE_INIT                   \n *       { peerId, meta, caps }           \n *         \n *                                        \n *       HANDSHAKE_ACK                    \n *       { peerId, meta, caps, accept }   \n *         \n *                                        \n *       HANDSHAKE_COMPLETE               \n *       { confirmed: true }              \n *         \n *                                        \n *        Connected                      \n * ```\n */\nexport class Handshake {\n    /** @type {string} */\n    #localPeerId;\n\n    /** @type {Object} */\n    #meta;\n\n    /** @type {string[]} */\n    #capabilities;\n\n    /** @type {number} */\n    #timeout;\n\n    /** @type {Map<string, Object>} */\n    #pendingHandshakes = new Map();\n\n    /**\n     * Creates a new Handshake handler.\n     * \n     * @param {HandshakeConfig} [config={}]\n     */\n    constructor(config = {}) {\n        this.#localPeerId = config.peerId ?? uuid();\n        this.#meta = config.meta ?? {};\n        this.#capabilities = config.capabilities ?? [];\n        this.#timeout = config.timeout ?? 10000;\n    }\n\n    /**\n     * Gets the local peer ID.\n     * @returns {string}\n     */\n    get peerId() {\n        return this.#localPeerId;\n    }\n\n    /**\n     * Creates a handshake initiation message.\n     * \n     * @returns {Object} Handshake init message.\n     */\n    createInitMessage() {\n        return {\n            type: MessageType.HANDSHAKE_INIT,\n            handshakeId: uuid(),\n            peerId: this.#localPeerId,\n            meta: this.#meta,\n            capabilities: this.#capabilities,\n            timestamp: Date.now()\n        };\n    }\n\n    /**\n     * Creates a handshake acknowledgment message.\n     * \n     * @param {Object} initMessage - The received init message.\n     * @param {boolean} accept - Whether to accept the connection.\n     * @param {string} [reason] - Rejection reason if not accepted.\n     * @returns {Object} Handshake ack message.\n     */\n    createAckMessage(initMessage, accept, reason) {\n        return {\n            type: MessageType.HANDSHAKE_ACK,\n            handshakeId: initMessage.handshakeId,\n            peerId: this.#localPeerId,\n            meta: this.#meta,\n            capabilities: this.#capabilities,\n            accept,\n            reason: accept ? undefined : reason,\n            timestamp: Date.now()\n        };\n    }\n\n    /**\n     * Creates a handshake completion message.\n     * \n     * @param {string} handshakeId - The handshake ID.\n     * @returns {Object} Handshake complete message.\n     */\n    createCompleteMessage(handshakeId) {\n        return {\n            type: MessageType.HANDSHAKE_COMPLETE,\n            handshakeId,\n            confirmed: true,\n            timestamp: Date.now()\n        };\n    }\n\n    /**\n     * Initiates a handshake with a peer.\n     * \n     * @param {EventListener} sendFn - Function to send messages to peer.\n     * @returns {Promise<HandshakeResult>} Result of handshake attempt.\n     */\n    async initiate(sendFn) {\n        const initMsg = this.createInitMessage();\n        const { promise, resolve, reject } = deferred();\n\n        // Store pending handshake\n        this.#pendingHandshakes.set(initMsg.handshakeId, {\n            phase: HandshakePhase.INIT_SENT,\n            resolve,\n            reject,\n            initMsg,\n            startTime: Date.now()\n        });\n\n        // Send init message\n        sendFn(initMsg);\n\n        // Wait for response with timeout\n        try {\n            const result = await withTimeout(promise, this.#timeout);\n            return result;\n        } catch (/** @type {any} */ error) {\n            this.#pendingHandshakes.delete(initMsg.handshakeId);\n\n            if (error.code === ErrorCode.HANDSHAKE_TIMEOUT) {\n                return {\n                    success: false,\n                    error: ErrorCode.HANDSHAKE_TIMEOUT,\n                    reason: `Handshake timeout after ${this.#timeout}ms`\n                };\n            }\n\n            return {\n                success: false,\n                error: ErrorCode.HANDSHAKE_REJECTED,\n                reason: error.message\n            };\n        }\n    }\n\n    /**\n     * Handles a received handshake message.\n     * \n     * @param {Object} message - Received handshake message.\n     * @param {string} origin - Origin of the message.\n     * @param {EventListener} sendFn - Function to send response.\n     * @param {EventListener} [validateFn] - Optional validation function.\n     * @returns {PeerInfo|null} Peer info if handshake completes, null otherwise.\n     */\n    handleMessage(message, origin, sendFn, validateFn) {\n        switch (message.type) {\n            case MessageType.HANDSHAKE_INIT:\n                return this.#handleInit(message, origin, sendFn, validateFn);\n\n            case MessageType.HANDSHAKE_ACK:\n                return this.#handleAck(message, origin, sendFn);\n\n            case MessageType.HANDSHAKE_COMPLETE:\n                return this.#handleComplete(message, origin);\n\n            default:\n                return null;\n        }\n    }\n\n    /**\n     * Checks if a handshake is pending.\n     * \n     * @param {string} handshakeId\n     * @returns {boolean}\n     */\n    hasPending(handshakeId) {\n        return this.#pendingHandshakes.has(handshakeId);\n    }\n\n    /**\n     * Cancels a pending handshake.\n     * \n     * @param {string} handshakeId\n     */\n    cancel(handshakeId) {\n        const pending = this.#pendingHandshakes.get(handshakeId);\n        if (pending) {\n            pending.reject(new Error('Handshake cancelled'));\n            this.#pendingHandshakes.delete(handshakeId);\n        }\n    }\n\n    /**\n     * Cancels all pending handshakes.\n     */\n    cancelAll() {\n        for (const [id, pending] of this.#pendingHandshakes) {\n            pending.reject(new Error('All handshakes cancelled'));\n        }\n        this.#pendingHandshakes.clear();\n    }\n\n    // \n    // Private handlers\n    // \n\n    /**\n     * Handles HANDSHAKE_INIT message (we are responder).\n     * \n     */\n    #handleInit(message, origin, sendFn, validateFn) {\n        // Validate if validator provided\n        if (validateFn && !validateFn(message, origin)) {\n            const ack = this.createAckMessage(message, false, 'Validation failed');\n            sendFn(ack);\n            return null;\n        }\n\n        // Accept the connection\n        const ack = this.createAckMessage(message, true);\n        sendFn(ack);\n\n        // Store awaiting complete\n        this.#pendingHandshakes.set(message.handshakeId, {\n            phase: HandshakePhase.ACK_SENT,\n            remotePeer: {\n                peerId: message.peerId,\n                origin,\n                meta: message.meta,\n                capabilities: message.capabilities\n            }\n        });\n\n        return null; // Wait for complete message\n    }\n\n    /**\n     * Handles HANDSHAKE_ACK message (we are initiator).\n     * \n     */\n    #handleAck(message, origin, sendFn) {\n        const pending = this.#pendingHandshakes.get(message.handshakeId);\n        if (!pending) {\n            return null; // Unknown handshake\n        }\n\n        if (!message.accept) {\n            // Rejected\n            pending.reject(new Error(message.reason || 'Connection rejected'));\n            this.#pendingHandshakes.delete(message.handshakeId);\n            return null;\n        }\n\n        // Send complete message\n        const complete = this.createCompleteMessage(message.handshakeId);\n        sendFn(complete);\n\n        // Create peer info\n        const peerInfo = {\n            peerId: message.peerId,\n            origin,\n            meta: message.meta,\n            capabilities: message.capabilities,\n            type: 'unknown', // Will be updated by PeerRegistry\n            connectedAt: Date.now()\n        };\n\n        // Resolve the promise\n        pending.resolve({\n            success: true,\n            peer: peerInfo\n        });\n\n        this.#pendingHandshakes.delete(message.handshakeId);\n        return peerInfo;\n    }\n\n    /**\n     * Handles HANDSHAKE_COMPLETE message (we are responder).\n     * \n     */\n    #handleComplete(message, origin) {\n        const pending = this.#pendingHandshakes.get(message.handshakeId);\n        if (!pending || pending.phase !== HandshakePhase.ACK_SENT) {\n            return null;\n        }\n\n        if (!message.confirmed) {\n            this.#pendingHandshakes.delete(message.handshakeId);\n            return null;\n        }\n\n        // Handshake complete!\n        const peerInfo = {\n            ...pending.remotePeer,\n            connectedAt: Date.now()\n        };\n\n        this.#pendingHandshakes.delete(message.handshakeId);\n        return peerInfo;\n    }\n}\n","/**\n * @fileoverview Origin validation for cross-origin security.\n * Validates message origins against an allowlist.\n * @module security/origin-validator\n */\n\n/**\n * @typedef {Object} OriginValidatorOptions\n * @property {string[]} [allowed=[]] - Allowed origins. Empty = same-origin only.\n * @property {boolean} [allowAll=false] - Allow all origins (dangerous!).\n */\n\n/**\n * Validates message origins against a configured allowlist.\n * \n * Supports:\n * - Exact matches: 'https://example.com'\n * - Wildcards: 'https://*.example.com' (subdomains only)\n * - Protocols: 'chrome-extension://*', 'file://*'\n * \n * @example\n * const validator = new OriginValidator({\n *   allowed: [\n *     'https://app.example.com',\n *     'https://*.widgets.com'\n *   ]\n * });\n * \n * validator.isAllowed('https://app.example.com');     // true\n * validator.isAllowed('https://foo.widgets.com');     // true\n * validator.isAllowed('https://evil.com');            // false\n */\nexport class OriginValidator {\n    /** @type {Set<string>} */\n    #exactOrigins = new Set();\n\n    /** @type {RegExp[]} */\n    #patterns = [];\n\n    /** @type {boolean} */\n    #allowAll = false;\n\n    /** @type {string|undefined} */\n    #selfOrigin;\n\n    /**\n     * Creates a new origin validator.\n     * \n     * @param {OriginValidatorOptions} [options={}] - Configuration.\n     */\n    constructor(options = {}) {\n        this.#allowAll = options.allowAll ?? false;\n        this.#selfOrigin = globalThis.location?.origin;\n\n        // Process allowed origins\n        if (options.allowed) {\n            for (const origin of options.allowed) {\n                this.#addOrigin(origin);\n            }\n        }\n    }\n\n    /**\n     * Checks if an origin is allowed.\n     * \n     * @param {string} origin - Origin to check (e.g., 'https://example.com').\n     * @returns {boolean} True if allowed.\n     * \n     * @example\n     * validator.isAllowed('https://trusted.com');  // true\n     * validator.isAllowed('https://unknown.com');  // false\n     */\n    isAllowed(origin) {\n        // Allow-all mode (dangerous but sometimes needed)\n        if (this.#allowAll) {\n            return true;\n        }\n\n        // Null origin (file://, sandboxed iframes, etc.)\n        if (origin === 'null' || origin === null) {\n            return this.#exactOrigins.has('null');\n        }\n\n        // Empty/no allowed origins = same-origin only\n        if (this.#exactOrigins.size === 0 && this.#patterns.length === 0) {\n            return origin === this.#selfOrigin;\n        }\n\n        // Check exact match first (fast path)\n        if (this.#exactOrigins.has(origin)) {\n            return true;\n        }\n\n        // Check pattern matches\n        for (const pattern of this.#patterns) {\n            if (pattern.test(origin)) {\n                return true;\n            }\n        }\n\n        return false;\n    }\n\n    /**\n     * Adds an origin to the allowlist.\n     * \n     * @param {string} origin - Origin to add (supports wildcards).\n     * @returns {this} For chaining.\n     */\n    allow(origin) {\n        this.#addOrigin(origin);\n        return this;\n    }\n\n    /**\n     * Removes an origin from the allowlist.\n     * \n     * @param {string} origin - Origin to remove.\n     * @returns {boolean} True if removed.\n     */\n    disallow(origin) {\n        // For exact origins\n        if (this.#exactOrigins.has(origin)) {\n            this.#exactOrigins.delete(origin);\n            return true;\n        }\n\n        // For patterns, we'd need to store the original string\n        // For simplicity, patterns cannot be removed individually\n        return false;\n    }\n\n    /**\n     * Gets all exact (non-pattern) allowed origins.\n     * \n     * @returns {string[]} Array of allowed origins.\n     */\n    getAllowed() {\n        return Array.from(this.#exactOrigins);\n    }\n\n    /**\n     * Clears all allowed origins.\n     */\n    clear() {\n        this.#exactOrigins.clear();\n        this.#patterns = [];\n    }\n\n    /**\n     * Gets the current origin (if available).\n     * @returns {string|undefined}\n     */\n    get selfOrigin() {\n        return this.#selfOrigin;\n    }\n\n    // \n    // Private methods\n    // \n\n    /**\n     * Adds an origin to the appropriate collection.\n     * \n     * @param {string} origin\n     */\n    #addOrigin(origin) {\n        if (typeof origin !== 'string') {\n            throw new TypeError('Origin must be a string');\n        }\n\n        // Wildcard '*' means allow all\n        if (origin === '*') {\n            this.#allowAll = true;\n            return;\n        }\n\n        // Contains wildcards - create pattern\n        if (origin.includes('*')) {\n            const pattern = this.#createPattern(origin);\n            this.#patterns.push(pattern);\n        } else {\n            // Exact origin\n            this.#exactOrigins.add(origin);\n        }\n    }\n\n    /**\n     * Creates a RegExp from a wildcard pattern.\n     * Uses bounded quantifiers to prevent ReDoS attacks.\n     * \n     * @param {string} pattern - Pattern with wildcards.\n     * @returns {RegExp}\n     */\n    #createPattern(pattern) {\n        // Escape special regex characters except *\n        const escaped = pattern\n            .replace(/[.+?^${}()|[\\]\\\\]/g, '\\\\$&')\n            // Use bounded quantifier to prevent catastrophic backtracking\n            // Allows up to 253 chars per segment (max DNS label)\n            .replace(/\\*/g, '[a-zA-Z0-9.-]{0,253}');\n\n        return new RegExp(`^${escaped}$`);\n    }\n}\n\n/**\n * Creates an origin validator with common configurations.\n */\nexport const OriginValidatorPresets = {\n    /**\n     * Same-origin only (most secure).\n     * @returns {OriginValidator}\n     */\n    sameOrigin() {\n        return new OriginValidator();\n    },\n\n    /**\n     * Allow all origins (use with caution!).\n     * @returns {OriginValidator}\n     */\n    allowAll() {\n        return new OriginValidator({ allowAll: true });\n    },\n\n    /**\n     * Allow specific domains.\n     * @param {string[]} origins\n     * @returns {OriginValidator}\n     */\n    fromList(origins) {\n        return new OriginValidator({ allowed: origins });\n    }\n};\n","/**\n * @fileoverview CrossBus - Main facade for cross-context messaging.\n * Provides a unified API for inter-context communication.\n * @module core/cross-bus\n */\n\nimport { EventEmitter } from './event-emitter.js';\nimport { MessageType, PeerStatus } from '../common/types.js';\nimport { createSignalMessage, createRequestMessage, createResponseMessage } from './message-types.js';\nimport { CrossBusError, ErrorCode } from '../common/errors.js';\nimport { uuid } from '../common/utils.js';\nimport { MessageRouter } from '../router/message-router.js';\nimport { PendingRequests } from '../router/pending-requests.js';\nimport { Handshake } from '../security/handshake.js';\nimport { OriginValidator } from '../security/origin-validator.js';\n\n/**\n * @typedef {Object} CrossBusOptions\n * @property {string} [peerId] - Unique peer identifier (auto-generated if not specified).\n * @property {boolean} [isHub=false] - Whether this instance is the hub.\n * @property {number} [requestTimeout=30000] - Default request timeout in ms.\n * @property {number} [handshakeTimeout=10000] - Handshake timeout in ms.\n * @property {string[]} [allowedOrigins=[]] - Allowed origins for incoming connections.\n * @property {Object} [meta={}] - Metadata to share with peers.\n * @property {string[]} [capabilities=[]] - Supported capabilities.\n * @property {string} [contentType='application/json'] - Preferred serialization format.\n * @property {number} [maxPayloadSize=1048576] - Maximum payload size in bytes (default: 1MB).\n * @property {number} [maxPendingRequests=100] - Maximum concurrent pending requests.\n * @property {boolean} [strictMode=false] - Enforce strict security (disallows wildcard origins).\n * @property {boolean} [debug=false] - Enable verbose debug logging.\n * @property {string} [debugPrefix='[CrossBus]'] - Prefix for debug log messages.\n */\n\n/**\n * @typedef {Object} HandlerOptions\n * @property {string[]} [allowedPeers] - Peer IDs allowed to call this handler.\n * @property {number} [rateLimit] - Max calls per second from each peer.\n * @property {Function} [validatePayload] - Custom payload validator function.\n */\n\n/**\n * @typedef {Object} PeerInfo\n * @property {string} peerId - Peer identifier.\n * @property {string} origin - Peer origin.\n * @property {Object} meta - Peer metadata.\n * @property {PeerStatus} status - Connection status.\n * @property {number} connectedAt - Connection timestamp.\n */\n\n/**\n * @typedef {Object} RequestOptions\n * @property {number} [timeout] - Request timeout in ms.\n * @property {*} [defaultValue] - Value to return on timeout instead of throwing.\n */\n\n/**\n * @typedef {Object} BroadcastRequestOptions\n * @property {number} [timeout] - Per-peer timeout in ms.\n * @property {string[]} [exclude] - Peer IDs to exclude.\n * @property {boolean} [ignoreErrors=true] - Whether to ignore peer errors.\n */\n\n/**\n * @typedef {Object} HookContext\n * @property {'signal'|'request'|'response'} type - Message type.\n * @property {string} [peerId] - Peer ID (if applicable).\n * @property {string} [handlerName] - Handler name (for requests).\n * @property {'inbound'|'outbound'} direction - Hook direction.\n */\n\n/**\n * @callback MessageHook\n * @param {*} payload - Payload to transform.\n * @param {HookContext} context - Hook context.\n * @returns {*|Promise<*>} Transformed payload.\n */\n\n/**\n * @typedef {Object} HookEntry\n * @property {MessageHook} fn - Hook function.\n * @property {number} priority - Execution priority (lower = first).\n */\n\n/**\n * @callback RequestHandler\n * @param {*} payload - Request payload.\n * @param {Object} context - Request context (peerId, meta, etc).\n * @returns {Promise<*>|*} - Response data.\n */\n\n/**\n * CrossBus - Zero-leak, high-performance cross-context messaging.\n * \n * Features:\n * - Hub/Mesh routing\n * - Request/Response pattern\n * - Broadcast to all peers\n * - ACK-based reliability\n * - Origin validation\n * - Resource lifecycle management\n * \n * @example\n * // Hub (main page)\n * const hub = new CrossBus({ isHub: true });\n * \n * // Connect iframe\n * hub.connect(iframe.contentWindow, {\n *   targetOrigin: 'https://widget.example.com'\n * });\n * \n * // Register handler\n * hub.handle('getData', async (payload, ctx) => {\n *   return { items: await fetchItems() };\n * });\n * \n * // Emit signal\n * hub.emit('user:login', { userId: 123 });\n * \n * // Request/Response\n * const result = await hub.request('widget-1', 'getStatus');\n * \n * // Cleanup\n * hub.destroy();\n */\nexport class CrossBus extends EventEmitter {\n    /** @type {string} */\n    #peerId;\n\n    /** @type {boolean} */\n    #isHub;\n\n    /** @type {MessageRouter} */\n    #router;\n\n    /** @type {PendingRequests} */\n    #pendingRequests;\n\n    /** @type {Handshake} */\n    #handshake;\n\n    /** @type {OriginValidator} */\n    #originValidator;\n\n    /** @type {string} */\n    #contentType;\n\n    /** @type {Map<string, RequestHandler>} */\n    #handlers = new Map();\n\n    /** @type {HookEntry[]} */\n    #inboundHooks = [];\n\n    /** @type {HookEntry[]} */\n    #outboundHooks = [];\n\n    /** @type {Object} */\n    #meta;\n\n    /** @type {string[]} */\n    #capabilities;\n\n    /** @type {number} */\n    #requestTimeout;\n\n    /** @type {number} */\n    #maxPayloadSize;\n\n    /** @type {number} */\n    #maxPendingRequests;\n\n    /** @type {boolean} */\n    #strictMode;\n\n    /** @type {Map<string, { count: number, resetAt: number }>} */\n    #rateLimitCounters = new Map();\n\n    /** @type {Map<string, HandlerOptions>} */\n    #handlerOptions = new Map();\n\n    /** @type {boolean} */\n    #debug = false;\n\n    /** @type {string} */\n    #debugPrefix = '[CrossBus]';\n\n    /** @type {number} */\n    #createdAt;\n\n    /** @type {boolean} */\n    #destroyed = false;\n\n    /**\n     * Creates a new CrossBus instance.\n     * \n     * @param {CrossBusOptions} [options={}]\n     */\n    constructor(options = {}) {\n        super();\n\n        this.#peerId = options.peerId ?? uuid();\n        this.#isHub = options.isHub ?? false;\n        this.#meta = options.meta ?? {};\n        this.#capabilities = options.capabilities ?? [];\n        this.#requestTimeout = options.requestTimeout ?? 30000;\n\n        // Initialize components\n        this.#router = new MessageRouter();\n        this.#pendingRequests = new PendingRequests({\n            defaultTimeout: this.#requestTimeout\n        });\n        this.#handshake = new Handshake({\n            peerId: this.#peerId,\n            meta: this.#meta,\n            capabilities: this.#capabilities,\n            timeout: options.handshakeTimeout ?? 10000\n        });\n        this.#originValidator = new OriginValidator({\n            allowed: options.allowedOrigins ?? []\n        });\n\n        // Serialization setup\n        this.#contentType = options.contentType ?? 'application/json';\n        // this.#serializer = getSerializer(this.#contentType);\n\n        // Security settings\n        this.#maxPayloadSize = options.maxPayloadSize ?? 1024 * 1024; // 1MB\n        this.#maxPendingRequests = options.maxPendingRequests ?? 100;\n        this.#strictMode = options.strictMode ?? false;\n\n        // Debug settings\n        this.#debug = options.debug ?? false;\n        this.#debugPrefix = options.debugPrefix ?? '[CrossBus]';\n        this.#createdAt = Date.now();\n\n        // Development security warnings\n        this.#emitSecurityWarnings(options);\n\n        // Initialize handshake capability\n        this.#capabilities.push(`serializer:${this.#contentType}`);\n\n        // Wire up router events\n        this.#router.on('peer:added', (e) => { this.emit('peer:connected', e.data); });\n        this.#router.on('peer:removed', (e) => { this.emit('peer:disconnected', e.data); });\n        this.#router.on('peer:status', (e) => { this.emit('peer:status', e.data); });\n\n        if (this.#debug) {\n            this.#log('info', `Initialized (isHub: ${this.#isHub})`);\n        }\n    }\n\n    /**\n     * Gets the local peer ID.\n     * @returns {string}\n     */\n    get peerId() {\n        return this.#peerId;\n    }\n\n    /**\n     * Gets whether this instance is the hub.\n     * @returns {boolean}\n     */\n    get isHub() {\n        return this.#isHub;\n    }\n\n    /**\n     * Gets connected peer count.\n     * @returns {number}\n     */\n    get peerCount() {\n        return this.#router.peerCount;\n    }\n\n    /**\n     * Gets all connected peer IDs.\n     * @returns {string[]}\n     */\n    get peers() {\n        return this.#router.getPeerIds();\n    }\n\n    /**\n     * Gets peer info by ID.\n     * \n     * @param {string} peerId\n     * @returns {PeerInfo|undefined}\n     */\n    getPeer(peerId) {\n        return this.#router.getPeer(peerId);\n    }\n\n    // \n    // Messaging API\n    // \n\n    /**\n     * Sends a signal to all connected peers.\n     * \n     * @param {string} signalName - Signal name (e.g., 'user:login').\n     * @param {*} [payload] - Signal payload.\n     * @param {Object} [options={}] - Send options.\n     * @param {string[]} [options.exclude] - Peer IDs to exclude.\n     * @returns {Promise<{ delivered: number, failed: string[] }>}\n     *  \n     * @example\n     * bus.signal('user:login', { userId: 123 });\n     */\n    async signal(signalName, payload, options = {}) {\n        this.#assertNotDestroyed();\n\n        // Apply outbound hooks\n        const transformedPayload = await this.#runHooks(\n            this.#outboundHooks,\n            payload,\n            { type: 'signal', direction: 'outbound' }\n        );\n\n        const message = createSignalMessage(\n            signalName,\n            transformedPayload,\n            this.#peerId\n        );\n\n        const result = await this.#router.broadcast(message, options);\n\n        this.#log('out', `SIGNAL \"${signalName}\" to ${result.delivered} peers`);\n\n        return result;\n    }\n\n    /**\n     * Sends a request to a specific peer and waits for response.\n     * \n     * @param {string} peerId - Target peer ID.\n     * @param {string} handlerName - Handler to invoke.\n     * @param {*} [payload] - Request payload.\n     * @param {RequestOptions} [options={}]\n     * @returns {Promise<*>} Handler response.\n     * \n     * @example\n     * const data = await bus.request('widget-1', 'getData', { id: 5 });\n     */\n    async request(peerId, handlerName, payload, options = {}) {\n        this.#assertNotDestroyed();\n\n        this.#log('out', `REQUEST \"${handlerName}\" to ${peerId}`);\n\n        const peer = this.#router.getPeer(peerId);\n        if (!peer) {\n            throw CrossBusError.from(ErrorCode.PEER_NOT_FOUND, { peerId });\n        }\n\n        // Create pending request\n        const { requestId, promise } = this.#pendingRequests.create(\n            peerId,\n            handlerName,\n            { timeout: options.timeout ?? this.#requestTimeout }\n        );\n\n        // Apply outbound hooks\n        const transformedPayload = await this.#runHooks(\n            this.#outboundHooks,\n            payload,\n            { type: 'request', peerId, handlerName, direction: 'outbound' }\n        );\n\n        // Build request message\n        const message = createRequestMessage(\n            handlerName,\n            transformedPayload,\n            this.#peerId,\n            peerId,\n            requestId // Pass the tracking ID\n        );\n\n        // Send request\n        const result = this.#router.route({ target: peerId, payload: message });\n\n        if (!result.success) {\n            this.#pendingRequests.cancel(requestId);\n            throw CrossBusError.from(ErrorCode.SEND_FAILED, { peerId });\n        }\n\n        return promise;\n    }\n\n    /**\n     * Broadcasts a request to all peers and collects responses.\n     * \n     * @param {string} handlerName - Handler to invoke on all peers.\n     * @param {*} [payload] - Request payload.\n     * @param {BroadcastRequestOptions} [options={}]\n     * @returns {Promise<Map<string, *>>} Map of peerId -> response.\n     * \n     * @example\n     * const responses = await bus.broadcastRequest('getStatus');\n     * for (const [peerId, status] of responses) {\n     *   console.log(`${peerId}: ${status.state}`);\n     * }\n     */\n    async broadcastRequest(handlerName, payload, options = {}) {\n        this.#assertNotDestroyed();\n\n        const timeout = options.timeout ?? this.#requestTimeout;\n        const ignoreErrors = options.ignoreErrors ?? true;\n        const exclude = new Set(options.exclude ?? []);\n\n        const results = new Map();\n        const promises = [];\n\n        for (const peerId of this.#router.getPeerIds()) {\n            if (exclude.has(peerId)) continue;\n\n            const requestPromise = this.request(peerId, handlerName, payload, { timeout })\n                .then(response => {\n                    results.set(peerId, { success: true, data: response });\n                })\n                .catch(error => {\n                    if (ignoreErrors) {\n                        results.set(peerId, { success: false, error: error.message });\n                    } else {\n                        throw error;\n                    }\n                });\n\n            promises.push(requestPromise);\n        }\n\n        await Promise.all(promises);\n        return results;\n    }\n\n    // \n    // Handler API\n    // \n\n    /**\n     * Registers a request handler.\n     * \n     * @param {string} handlerName - Handler name.\n     * @param {RequestHandler} handler - Handler function.\n     * @param {HandlerOptions} [options={}] - Security options.\n     * @returns {Function} Unregister function.\n     * \n     * @example\n     * // Basic handler\n     * const unhandle = bus.handle('getData', async (payload, ctx) => {\n     *   return await fetchData(payload.id);\n     * });\n     * \n     * // Secure handler with restrictions\n     * bus.handle('sensitiveData', async (payload) => { ... }, {\n     *   allowedPeers: ['trusted-agent'],  // Only these peers can call\n     *   rateLimit: 10,                    // Max 10 calls/second per peer\n     *   validatePayload: (p) => p.id != null  // Custom validation\n     * });\n     */\n    handle(handlerName, handler, options = {}) {\n        if (this.#handlers.has(handlerName)) {\n            throw CrossBusError.from(ErrorCode.HANDLER_EXISTS, { handlerName });\n        }\n\n        // Store handler options for security checks\n        if (options.allowedPeers || options.rateLimit || options.validatePayload) {\n            this.#handlerOptions.set(handlerName, options);\n        }\n\n        this.#handlers.set(handlerName, handler);\n\n        return () => {\n            this.#handlers.delete(handlerName);\n            this.#handlerOptions.delete(handlerName);\n        };\n    }\n\n    /**\n     * Removes a handler.\n     * \n     * @param {string} handlerName\n     * @returns {boolean} True if handler was removed.\n     */\n    unhandle(handlerName) {\n        return this.#handlers.delete(handlerName);\n    }\n\n    /**\n     * Checks if a handler is registered.\n     * \n     * @param {string} handlerName\n     * @returns {boolean}\n     */\n    hasHandler(handlerName) {\n        return this.#handlers.has(handlerName);\n    }\n\n    // \n    // Hook API\n    // \n\n    /**\n     * Adds an inbound hook to transform incoming payloads.\n     * \n     * @param {MessageHook} hookFn - Hook function.\n     * @param {number} [priority=10] - Execution priority (lower = first).\n     * @returns {Function} Unregister function.\n     * \n     * @example\n     * // Decrypt incoming messages\n     * const unhook = bus.addInboundHook(async (payload, ctx) => {\n     *   return await decrypt(payload);\n     * });\n     */\n    addInboundHook(hookFn, priority = 10) {\n        if (typeof hookFn !== 'function') {\n            throw new TypeError('hookFn must be a function');\n        }\n\n        const entry = { fn: hookFn, priority };\n        this.#inboundHooks.push(entry);\n        this.#inboundHooks.sort((a, b) => a.priority - b.priority);\n\n        return () => this.removeInboundHook(hookFn);\n    }\n\n    /**\n     * Adds an outbound hook to transform outgoing payloads.\n     * \n     * @param {MessageHook} hookFn - Hook function.\n     * @param {number} [priority=10] - Execution priority (lower = first).\n     * @returns {Function} Unregister function.\n     * \n     * @example\n     * // Encrypt outgoing messages\n     * const unhook = bus.addOutboundHook(async (payload, ctx) => {\n     *   return await encrypt(payload);\n     * });\n     */\n    addOutboundHook(hookFn, priority = 10) {\n        if (typeof hookFn !== 'function') {\n            throw new TypeError('hookFn must be a function');\n        }\n\n        const entry = { fn: hookFn, priority };\n        this.#outboundHooks.push(entry);\n        this.#outboundHooks.sort((a, b) => a.priority - b.priority);\n\n        return () => this.removeOutboundHook(hookFn);\n    }\n\n    /**\n     * Removes an inbound hook.\n     * \n     * @param {MessageHook} hookFn\n     * @returns {boolean} True if removed.\n     */\n    removeInboundHook(hookFn) {\n        const index = this.#inboundHooks.findIndex(e => e.fn === hookFn);\n        if (index !== -1) {\n            this.#inboundHooks.splice(index, 1);\n            return true;\n        }\n        return false;\n    }\n\n    /**\n     * Removes an outbound hook.\n     * \n     * @param {MessageHook} hookFn\n     * @returns {boolean} True if removed.\n     */\n    removeOutboundHook(hookFn) {\n        const index = this.#outboundHooks.findIndex(e => e.fn === hookFn);\n        if (index !== -1) {\n            this.#outboundHooks.splice(index, 1);\n            return true;\n        }\n        return false;\n    }\n\n    // \n    // Connection API\n    // \n\n    /**\n     * Adds a peer with a send function.\n     * Used for hub mode when managing connections manually.\n     * \n     * @param {string} peerId - Peer identifier.\n     * @param {EventListener} sendFn - Function to send messages.\n     * @param {Object} [options={}] - Additional options.\n     */\n    addPeer(peerId, sendFn, options = {}) {\n        this.#assertNotDestroyed();\n        this.#router.addPeer(peerId, sendFn, options);\n    }\n\n    /**\n     * Removes a peer.\n     * \n     * @param {string} peerId\n     * @returns {boolean}\n     */\n    removePeer(peerId) {\n        this.#pendingRequests.cancelForPeer(peerId);\n        return this.#router.removePeer(peerId);\n    }\n\n    /**\n     * Adds a transport and automatically wires up message handling.\n     * This is the recommended way to connect transports for AI agents.\n     * \n     * @param {Object} transport - Transport instance with send() and onMessage() methods.\n     * @param {Object} [options={}] - Additional options.\n     * @param {string} [options.peerId] - Override peer ID (defaults to transport's peerId or auto-generated).\n     * @param {string} [options.origin='*'] - Origin for message validation.\n     * @returns {Function} Cleanup function to remove the transport.\n     * \n     * @example\n     * // Simple usage\n     * const cleanup = bus.addTransport(new PostMessageTransport(iframe.contentWindow));\n     * \n     * // With options\n     * const cleanup = bus.addTransport(transport, { peerId: 'my-agent' });\n     * \n     * // Cleanup when done\n     * cleanup();\n     */\n    addTransport(transport, options = {}) {\n        this.#assertNotDestroyed();\n\n        if (!transport || typeof transport.send !== 'function') {\n            throw new TypeError('Transport must have a send() method');\n        }\n\n        const peerId = options.peerId || transport.peerId || `transport-${uuid()}`;\n        const origin = options.origin || '*';\n\n        // Wire up inbound: transport -> CrossBus\n        if (typeof transport.onMessage === 'function') {\n            transport.onMessage((message) => {\n                this.handleMessage(message, origin, peerId);\n            });\n        }\n\n        // Wire up outbound: CrossBus -> transport\n        this.addPeer(peerId, (message) => {\n            transport.send(message);\n        }, options);\n\n        // Return cleanup function\n        return () => {\n            this.removePeer(peerId);\n            if (typeof transport.destroy === 'function') {\n                transport.destroy();\n            }\n        };\n    }\n\n    /**\n     * Handles an incoming message.\n     * Call this when receiving a message from any transport.\n     * \n     * @param {Object} message - The received message.\n     * @param {string} origin - Origin of the message.\n     * @param {string} [peerId] - Source peer ID if known.\n     * @param {Function} [replyFn] - Function to reply to the sender.\n     */\n    async handleMessage(message, origin, peerId, replyFn) {\n        if (this.#destroyed) return;\n\n        // Validate origin\n        if (!this.#originValidator.isAllowed(origin)) {\n            console.warn(`[CrossBus] Blocked message from unauthorized origin: ${origin}`);\n            return;\n        }\n\n        // Apply inbound hooks to payload\n        // Apply inbound hooks to payload\n        // Support both standard 'payload'/'data' and legacy 'p'\n        const rawPayload = message.payload ?? message.data ?? message.p;\n        const msgType = message.type ?? message.t;\n\n        // Normalize fields based on schema\n        let handlerOrName = message.handler ?? message.name;\n        let dataContent = rawPayload;\n\n        // If ProtocolMessage (has 'payload' object containing metadata), extract from it\n        if (message.payload && typeof message.payload === 'object' && !message.p) {\n            if (msgType === MessageType.SIGNAL || msgType === MessageType.BROADCAST) {\n                handlerOrName = message.payload.name;\n                dataContent = message.payload.data;\n            } else if (msgType === MessageType.REQUEST) {\n                handlerOrName = message.payload.name;\n                dataContent = message.payload.data;\n            } else if (msgType === MessageType.RESPONSE) {\n                // Response payload structure? createResponseMessage puts 'data' in payload\n                dataContent = message.payload.data;\n            }\n        }\n        // Handle envelope format: { t, p: { type, payload: { name, data } } }\n        // Router creates envelopes with 'p' containing the original signal message\n        // Detect by: has 't' (not 'type'), has 'p' with nested 'payload' (ProtocolMessage structure)\n        else if (message.t && !message.type && message.p && typeof message.p === 'object' && message.p.payload) {\n            const innerMsg = message.p;\n            // Extract from nested ProtocolMessage\n            handlerOrName = innerMsg.payload.name ?? innerMsg.name;\n            dataContent = innerMsg.payload.data ?? innerMsg.data;\n        }\n\n        if (dataContent !== undefined) {\n            const hookContext = {\n                type: msgType === MessageType.SIGNAL ? 'signal' :\n                    msgType === MessageType.REQUEST ? 'request' : 'response',\n                peerId,\n                handlerName: handlerOrName,\n                direction: 'inbound'\n            };\n            // Run hooks\n            dataContent = await this.#runHooks(this.#inboundHooks, dataContent, hookContext);\n        }\n\n        switch (msgType) {\n            case MessageType.BROADCAST:  // Broadcast has same structure as signal\n            case MessageType.SIGNAL:\n                if (typeof handlerOrName !== 'string') {\n                    console.warn('[CrossBus] Invalid signal name type');\n                    return;\n                }\n                await this.#handleSignal(handlerOrName, dataContent, peerId);\n                break;\n\n            case MessageType.REQUEST:\n                if (typeof handlerOrName !== 'string') {\n                    console.warn('[CrossBus] Invalid handler name type');\n                    return;\n                }\n                // Pass normalized ID\n                // const reqId = message.id ?? (message.payload ? message.payload.id : undefined);\n                // Wait, 'id' is top level in ProtocolMessage AND legacy.\n\n                await this.#handleRequest(message.id, handlerOrName, dataContent, peerId, replyFn);\n                break;\n\n            case MessageType.RESPONSE: {\n                let success = message.success;\n                let error = message.error;\n\n                // Extract from ProtocolMessage payload if needed\n                if (message.payload && message.payload.success !== undefined) {\n                    success = message.payload.success;\n                    error = message.payload.error;\n                }\n\n                // If legacy response structure inside payload?\n                this.#handleResponse(message.payload?.requestId ?? message.id, success, dataContent, error);\n                break;\n            }\n\n            case MessageType.HANDSHAKE_INIT:\n            case MessageType.HANDSHAKE_ACK:\n            case MessageType.HANDSHAKE_COMPLETE:\n                this.#handshake.handleMessage(message, origin, /** @type {EventListener} */(replyFn));\n                break;\n\n            default:\n                console.warn(`[CrossBus] Unknown message type: ${msgType}`);\n        }\n    }\n\n    // \n    // Lifecycle\n    // \n\n    /**\n     * Destroys the CrossBus, cleaning up all resources.\n     */\n    destroy() {\n        if (this.#destroyed) return;\n\n        this.#destroyed = true;\n\n        // Cancel all pending requests\n        this.#pendingRequests.cancelAll();\n\n        // Clear handlers\n        this.#handlers.clear();\n\n        // Clear peers\n        this.#router.clearPeers();\n\n        // Clear event listeners\n        this.clear();\n\n        this.emit('destroyed', {});\n    }\n\n    /**\n     * Checks if the bus has been destroyed.\n     * @returns {boolean}\n     */\n    get isDestroyed() {\n        return this.#destroyed;\n    }\n\n    // \n    // Private handlers\n    // \n\n    /**\n     * Handles incoming signal.\n     * \n     */\n    async #handleSignal(name, data, peerId) {\n        await this.emit(name, {\n            payload: data,\n            source: peerId\n        });\n    }\n\n    /**\n     * Handles incoming request.\n     * \n     */\n    async #handleRequest(requestId, handlerName, data, peerId, replyFn) {\n        const handler = this.#handlers.get(handlerName);\n\n        let response;\n\n        if (!handler) {\n            response = createResponseMessage(\n                requestId,\n                null,\n                this.#peerId,\n                false,\n                {\n                    code: ErrorCode.NO_HANDLER,\n                    message: 'Handler not found'\n                }\n            );\n        } else {\n            // Check handler security (allowedPeers, rateLimit, validatePayload)\n            const securityCheck = this.#checkHandlerSecurity(handlerName, peerId, data);\n            if (!securityCheck.allowed) {\n                response = createResponseMessage(\n                    requestId,\n                    null,\n                    this.#peerId,\n                    false,\n                    {\n                        code: securityCheck.error?.code ?? ErrorCode.UNAUTHORIZED,\n                        message: securityCheck.error?.message ?? 'Security check failed'\n                    }\n                );\n            } else {\n                try {\n                    const result = await handler(data, {\n                        peerId,\n                        requestId: requestId,\n                        handlerName: handlerName\n                    });\n\n                    // Apply outbound hooks to response\n                    const transformedResult = await this.#runHooks(\n                        this.#outboundHooks,\n                        result,\n                        { type: 'response', peerId, handlerName: handlerName, direction: 'outbound' }\n                    );\n\n                    response = createResponseMessage(\n                        requestId,\n                        transformedResult,\n                        this.#peerId,\n                        true\n                    );\n                } catch (/** @type {any} */ error) {\n                    response = createResponseMessage(\n                        requestId,\n                        null,\n                        this.#peerId,\n                        false,\n                        {\n                            code: error.code ?? ErrorCode.HANDLER_ERROR,\n                            message: error.message\n                        }\n                    );\n                }\n            }\n        }\n\n        // Send response\n        if (replyFn) {\n            replyFn(response);\n        } else if (peerId) {\n            this.#router.route({ target: peerId, payload: response });\n        }\n    }\n\n    /**\n     * Handles incoming response.\n     * \n     */\n    #handleResponse(requestId, success, data, error) {\n        this.#pendingRequests.resolve(requestId, {\n            requestId,\n            success,\n            data,\n            error\n        });\n    }\n\n    /**\n     * Asserts the bus is not destroyed.\n     * \n     */\n    #assertNotDestroyed() {\n        if (this.#destroyed) {\n            throw CrossBusError.from(ErrorCode.DESTROYED, {\n                context: 'CrossBus operation'\n            });\n        }\n    }\n\n    /**\n     * Runs a chain of hooks on a payload.\n     * \n     */\n    async #runHooks(hooks, payload, context) {\n        let current = payload;\n        for (const { fn } of hooks) {\n            try {\n                current = await fn(current, context);\n            } catch (error) {\n                console.error('[CrossBus] Hook error:', error);\n                // Continue with unmodified payload on error\n            }\n        }\n        return current;\n    }\n\n    // \n    // Security Methods\n    // \n\n    /**\n     * Emits security warnings in development mode.\n     * @param {CrossBusOptions} options\n     */\n    #emitSecurityWarnings(options) {\n        // Only warn in development\n        const isDev = typeof process !== 'undefined'\n            ? process.env?.NODE_ENV !== 'production'\n            : typeof window !== 'undefined' && window.location?.hostname === 'localhost';\n\n        if (!isDev) return;\n\n        // Warn if allowedOrigins is not specified\n        if (!options.allowedOrigins || options.allowedOrigins.length === 0) {\n            console.warn(\n                '[CrossBus Security]  No allowedOrigins specified.\\n' +\n                'This bus will REJECT all incoming messages from transports.\\n' +\n                'To receive messages, specify allowed origins:\\n' +\n                '  allowedOrigins: [\"https://trusted-domain.com\"]\\n' +\n                'For development only: allowedOrigins: [\"*\"]'\n            );\n        }\n\n        // Warn about wildcard origins\n        if (options.allowedOrigins?.includes('*')) {\n            console.warn(\n                '[CrossBus Security]  allowedOrigins: [\"*\"] accepts messages from ANY origin.\\n' +\n                'This is INSECURE in production. Use specific origins instead:\\n' +\n                '  allowedOrigins: [\"https://trusted-domain.com\"]\\n' +\n                'For production, use:\\n' +\n                '  CrossBus.createSecure({ allowedOrigins: [\"https://...\"] })\\n' +\n                'Suppress this warning with NODE_ENV=production'\n            );\n\n            // In strict mode, throw error\n            if (this.#strictMode) {\n                throw new Error(\n                    'strictMode: allowedOrigins: [\"*\"] is not allowed. ' +\n                    'Use specific origins for security.'\n                );\n            }\n        }\n    }\n\n    /**\n     * Checks handler security before execution.\n     * @param {string} handlerName\n     * @param {string} peerId\n     * @param {*} payload\n     * @returns {{ allowed: boolean, error?: CrossBusError }}\n     */\n    #checkHandlerSecurity(handlerName, peerId, payload) {\n        const options = this.#handlerOptions.get(handlerName);\n        if (!options) {\n            return { allowed: true };\n        }\n\n        // Check peer allowlist\n        if (options.allowedPeers && !options.allowedPeers.includes(peerId)) {\n            return {\n                allowed: false,\n                error: CrossBusError.from(ErrorCode.UNAUTHORIZED, {\n                    handler: handlerName,\n                    peer: peerId,\n                    allowedPeers: options.allowedPeers\n                })\n            };\n        }\n\n        // Check rate limit\n        if (options.rateLimit) {\n            const limitKey = `${handlerName}:${peerId}`;\n            if (!this.#checkRateLimit(limitKey, options.rateLimit)) {\n                return {\n                    allowed: false,\n                    error: CrossBusError.from(ErrorCode.RATE_LIMITED, {\n                        handler: handlerName,\n                        peer: peerId,\n                        limit: options.rateLimit\n                    })\n                };\n            }\n        }\n\n        // Validate payload\n        if (options.validatePayload) {\n            try {\n                const isValid = options.validatePayload(payload);\n                if (!isValid) {\n                    return {\n                        allowed: false,\n                        error: CrossBusError.from(ErrorCode.INVALID_PAYLOAD, {\n                            handler: handlerName\n                        })\n                    };\n                }\n            } catch (/** @type {any} */ e) {\n                return {\n                    allowed: false,\n                    error: CrossBusError.from(ErrorCode.INVALID_PAYLOAD, {\n                        handler: handlerName,\n                        reason: e?.message ?? 'Validation error'\n                    })\n                };\n            }\n        }\n\n        return { allowed: true };\n    }\n\n    /**\n     * Checks rate limit for a key.\n     * @param {string} key - Rate limit key (e.g., \"handlerName:peerId\")\n     * @param {number} maxPerSecond - Maximum calls per second\n     * @returns {boolean} - True if allowed, false if rate limited\n     */\n    #checkRateLimit(key, maxPerSecond) {\n        const now = Date.now();\n        const counter = this.#rateLimitCounters.get(key);\n\n        if (!counter || now >= counter.resetAt) {\n            // Start new window\n            this.#rateLimitCounters.set(key, {\n                count: 1,\n                resetAt: now + 1000\n            });\n            return true;\n        }\n\n        if (counter.count >= maxPerSecond) {\n            return false;\n        }\n\n        counter.count++;\n        return true;\n    }\n\n\n\n    /**\n     * Gets the maximum payload size.\n     * @returns {number}\n     */\n    get maxPayloadSize() {\n        return this.#maxPayloadSize;\n    }\n\n    /**\n     * Gets whether strict mode is enabled.\n     * @returns {boolean}\n     */\n    get strictMode() {\n        return this.#strictMode;\n    }\n\n    /**\n     * Gets whether debug mode is enabled.\n     * @returns {boolean}\n     */\n    get debug() {\n        return this.#debug;\n    }\n\n    /**\n     * Gets the uptime in milliseconds.\n     * @returns {number}\n     */\n    get uptime() {\n        return Date.now() - this.#createdAt;\n    }\n\n    // \n    // Debug Logging\n    // \n\n    /**\n     * Logs a debug message if debug mode is enabled.\n     * @param {'in'|'out'|'info'|'warn'|'error'} type - Log type\n     * @param {string} message - Message to log\n     */\n    #log(type, message) {\n        if (!this.#debug) return;\n\n        const arrow = type === 'out' ? '' :\n            type === 'in' ? '' :\n                type === 'warn' ? '' :\n                    type === 'error' ? '' : '';\n\n        // eslint-disable-next-line no-console\n        console.log(`${this.#debugPrefix} ${arrow} ${message}`);\n    }\n\n    // \n    // Health Check\n    // \n\n    /**\n     * Returns the health status of the CrossBus instance.\n     * Useful for monitoring and diagnostics.\n     * \n     * @returns {Object} Health status object\n     * \n     * @example\n     * const health = bus.healthCheck();\n     * // {\n     * //   status: 'healthy',\n     * //   peerId: 'hub-1',\n     * //   uptime: 123456,\n     * //   peers: { total: 5, connected: 4 },\n     * //   handlers: ['getData', 'setData'],\n     * //   memory: { heapUsed: 12345678 }\n     * // }\n     */\n    healthCheck() {\n        const peerIds = this.#router.getPeerIds();\n        const connectedCount = peerIds.length;\n\n        // Determine status\n        let status = 'healthy';\n        if (this.#destroyed) {\n            status = 'unhealthy';\n        } else if (connectedCount === 0 && this.#isHub) {\n            status = 'degraded';\n        }\n\n        // Get memory usage if available\n        let memory;\n        if (typeof process !== 'undefined' && process.memoryUsage) {\n            try {\n                const mem = process.memoryUsage();\n                memory = {\n                    heapUsed: mem.heapUsed,\n                    heapTotal: mem.heapTotal,\n                    rss: mem.rss\n                };\n            } catch {\n                // Memory info not available\n            }\n        }\n\n        return {\n            status,\n            peerId: this.#peerId,\n            isHub: this.#isHub,\n            uptime: this.uptime,\n            peers: {\n                total: connectedCount,\n                ids: peerIds\n            },\n            handlers: Array.from(this.#handlers.keys()),\n            pendingRequests: this.#pendingRequests.size ?? 0,\n            destroyed: this.#destroyed,\n            ...(memory && { memory })\n        };\n    }\n\n    // \n    // Static Factory Methods\n    // \n\n    /**\n     * Creates a pre-configured secure CrossBus instance.\n     * Recommended for production use by AI agents.\n     * \n     * Enforces:\n     * - strictMode (no wildcard origins)\n     * - 1MB max payload size\n     * - 100 max pending requests\n     * - 30s request timeout\n     * \n     * @param {CrossBusOptions} options - Configuration options\n     * @returns {CrossBus} Configured instance\n     * @throws {Error} If allowedOrigins contains '*' or is missing\n     * \n     * @example\n     * // For production use\n     * const hub = CrossBus.createSecure({\n     *   peerId: 'my-hub',\n     *   isHub: true,\n     *   allowedOrigins: ['https://trusted-domain.com']\n     * });\n     */\n    static createSecure(options = {}) {\n        if (!options.allowedOrigins || options.allowedOrigins.length === 0) {\n            throw new Error(\n                'createSecure() requires allowedOrigins to be specified. ' +\n                'For development, use: new CrossBus({ allowedOrigins: [\"*\"] })'\n            );\n        }\n\n        if (options.allowedOrigins.includes('*')) {\n            throw new Error(\n                'createSecure() does not allow wildcard origins. ' +\n                'Specify exact origins: allowedOrigins: [\"https://example.com\"]'\n            );\n        }\n\n        return new CrossBus({\n            strictMode: true,\n            maxPayloadSize: 1024 * 1024,\n            maxPendingRequests: 100,\n            requestTimeout: 30000,\n            ...options\n        });\n    }\n\n    // \n    // Diagnostics (AI Agent Helper)\n    // \n\n    /**\n     * Performs diagnostics and returns troubleshooting suggestions.\n     * Designed to help AI agents identify and fix common issues.\n     * \n     * @returns {Object} Diagnostic report with issues and suggestions\n     * \n     * @example\n     * const report = bus.diagnose();\n     * if (report.issues.length > 0) {\n     *   console.log('Issues found:', report.issues);\n     *   console.log('Suggestions:', report.suggestions);\n     * }\n     */\n    diagnose() {\n        const issues = [];\n        const suggestions = [];\n        const warnings = [];\n\n        // Check if destroyed\n        if (this.#destroyed) {\n            issues.push('Instance is destroyed');\n            suggestions.push('Create a new CrossBus instance');\n            return { status: 'error', issues, suggestions, warnings };\n        }\n\n        // Check peer connections\n        const peerCount = this.#router.getPeerIds().length;\n        if (peerCount === 0) {\n            if (this.#isHub) {\n                warnings.push('Hub has no connected peers');\n                suggestions.push('Add transports with addTransport() or wait for agents to connect');\n            } else {\n                issues.push('Agent has no connected peers');\n                suggestions.push('Add a transport to connect to hub: bus.addTransport(transport, {peerId: \"hub\"})');\n            }\n        }\n\n        // Check handlers\n        const handlerCount = this.#handlers.size;\n        if (this.#isHub && handlerCount === 0) {\n            warnings.push('Hub has no registered handlers');\n            suggestions.push('Register handlers with bus.handle(\"name\", fn)');\n        }\n\n        // Check pending requests\n        const pendingCount = this.#pendingRequests.size ?? 0;\n        if (pendingCount > this.#maxPendingRequests * 0.8) {\n            warnings.push(`High pending request count: ${pendingCount}/${this.#maxPendingRequests}`);\n            suggestions.push('Consider increasing maxPendingRequests or check for slow handlers');\n        }\n\n        // Check strict mode in production hints\n        if (!this.#strictMode) {\n            warnings.push('strictMode is disabled');\n            suggestions.push('For production, use CrossBus.createSecure() or set strictMode: true');\n        }\n\n        // Determine overall status\n        let status = 'healthy';\n        if (issues.length > 0) {\n            status = 'error';\n        } else if (warnings.length > 0) {\n            status = 'warning';\n        }\n\n        return {\n            status,\n            peerId: this.#peerId,\n            isHub: this.#isHub,\n            peerCount,\n            handlerCount,\n            pendingRequests: pendingCount,\n            uptime: this.uptime,\n            issues,\n            warnings,\n            suggestions\n        };\n    }\n}\n","/**\n * @fileoverview Streaming support for CrossBus.\n * Enables efficient transfer of large payloads (files, LLM responses) via chunked messages.\n * @module core/stream\n */\n\nimport { PROTOCOL_MARKER, PROTOCOL_VERSION } from '../common/types.js';\nimport { uuid } from '../common/utils.js';\n\n/**\n * @typedef {Object} StreamOptions\n * @property {number} [chunkSize=64000] - Size of each chunk in bytes.\n * @property {number} [timeout=30000] - Timeout for stream operations in ms.\n */\n\n/**\n * @typedef {Object} StreamMeta\n * @property {string} streamId - Unique stream identifier.\n * @property {string} name - Stream name/type.\n * @property {number} [totalSize] - Total size if known.\n * @property {string} [contentType] - MIME type if applicable.\n * @property {Object} [meta] - Additional metadata.\n */\n\n/**\n * @typedef {'open' | 'data' | 'end' | 'error' | 'ack'} StreamMessageType\n */\n\n/**\n * Writable stream for sending large payloads in chunks.\n * \n * @example\n * const stream = new WritableSignalStream(sendFn, 'upload', {\n *   meta: { filename: 'data.json' }\n * });\n * \n * for await (const chunk of readFile(file)) {\n *   await stream.write(chunk);\n * }\n * await stream.end();\n */\nexport class WritableSignalStream {\n    /** @type {string} */\n    #streamId;\n\n    /** @type {string} */\n    #name;\n\n    /** @type {Function} */\n    #sendFn;\n\n    /** @type {number} */\n    #chunkSize;\n\n    /** @type {number} */\n    #seq = 0;\n\n    /** @type {boolean} */\n    #ended = false;\n\n    /** @type {boolean} */\n    #opened = false;\n\n    /** @type {Object} */\n    #meta;\n\n    /**\n     * Creates a new writable stream.\n     * \n     * @param {Function} sendFn - Function to send messages.\n     * @param {string} name - Stream name/type identifier.\n     * @param {StreamOptions & { meta?: Object }} [options={}] - Options.\n     */\n    constructor(sendFn, name, options = {}) {\n        this.#streamId = uuid();\n        this.#name = name;\n        this.#sendFn = sendFn;\n        this.#chunkSize = options.chunkSize ?? 64000;\n        this.#meta = options.meta ?? {};\n    }\n\n    /**\n     * Gets the stream ID.\n     * @returns {string}\n     */\n    get streamId() {\n        return this.#streamId;\n    }\n\n    /**\n     * Gets the stream name.\n     * @returns {string}\n     */\n    get name() {\n        return this.#name;\n    }\n\n    /**\n     * Opens the stream (called automatically on first write).\n     * \n     * @param {Object} [meta] - Additional metadata.\n     * @returns {Promise<void>}\n     */\n    async open(meta) {\n        if (this.#opened) return;\n\n        this.#opened = true;\n\n        await this.#send({\n            st: 'open',\n            name: this.#name,\n            meta: { ...this.#meta, ...meta }\n        });\n    }\n\n    /**\n     * Writes data to the stream.\n     * \n     * @param {string | ArrayBuffer | Uint8Array | Object} data - Data to write.\n     * @returns {Promise<void>}\n     */\n    async write(data) {\n        if (this.#ended) {\n            throw new Error('Stream already ended');\n        }\n\n        if (!this.#opened) {\n            await this.open();\n        }\n\n        // Convert data to sendable format\n        let payload;\n        let isBase64 = false;\n\n        if (data instanceof ArrayBuffer) {\n            payload = this.#arrayBufferToBase64(new Uint8Array(data));\n            isBase64 = true;\n        } else if (data instanceof Uint8Array) {\n            payload = this.#arrayBufferToBase64(data);\n            isBase64 = true;\n        } else if (typeof data === 'string') {\n            // String data - chunk if needed\n            const chunks = this.#chunkString(data, this.#chunkSize);\n            for (const chunk of chunks) {\n                await this.#send({\n                    st: 'data',\n                    seq: this.#seq++,\n                    d: chunk,\n                    b64: false\n                });\n            }\n            return;\n        } else {\n            // Object - serialize to JSON\n            payload = JSON.stringify(data);\n        }\n\n        // Send (chunk if binary)\n        if (isBase64) {\n            const chunks = this.#chunkString(payload, this.#chunkSize);\n            for (const chunk of chunks) {\n                await this.#send({\n                    st: 'data',\n                    seq: this.#seq++,\n                    d: chunk,\n                    b64: true\n                });\n            }\n        } else {\n            await this.#send({\n                st: 'data',\n                seq: this.#seq++,\n                d: payload,\n                b64: false\n            });\n        }\n    }\n\n    /**\n     * Ends the stream.\n     * \n     * @param {Object} [finalMeta] - Final metadata.\n     * @returns {Promise<void>}\n     */\n    async end(finalMeta) {\n        if (this.#ended) return;\n\n        this.#ended = true;\n\n        await this.#send({\n            st: 'end',\n            seq: this.#seq,\n            meta: finalMeta\n        });\n    }\n\n    /**\n     * Aborts the stream with an error.\n     * \n     * @param {string} [reason] - Error reason.\n     * @returns {Promise<void>}\n     */\n    async abort(reason) {\n        if (this.#ended) return;\n\n        this.#ended = true;\n\n        await this.#send({\n            st: 'error',\n            reason: reason ?? 'Stream aborted'\n        });\n    }\n\n    /**\n     * Sends a stream message.\n     * \n     * @param {Object} payload - Stream payload.\n     */\n    async #send(payload) {\n        const message = {\n            [PROTOCOL_MARKER]: PROTOCOL_VERSION,\n            t: 'stream',\n            sid: this.#streamId,\n            ...payload\n        };\n\n        await this.#sendFn(message);\n    }\n\n    /**\n     * Chunks a string into smaller pieces.\n     * \n     * @param {string} str - String to chunk.\n     * @param {number} size - Chunk size.\n     * @returns {string[]}\n     */\n    #chunkString(str, size) {\n        const chunks = [];\n        for (let i = 0; i < str.length; i += size) {\n            chunks.push(str.slice(i, i + size));\n        }\n        return chunks;\n    }\n\n    /**\n     * Converts Uint8Array to base64.\n     * \n     * @param {Uint8Array} bytes \n     * @returns {string}\n     */\n    #arrayBufferToBase64(bytes) {\n        let binary = '';\n        for (let i = 0; i < bytes.length; i++) {\n            binary += String.fromCharCode(bytes[i]);\n        }\n        return btoa(binary);\n    }\n}\n\n/**\n * Readable stream for receiving large payloads.\n * \n * @example\n * streamManager.onStream('upload', async (stream) => {\n *   for await (const chunk of stream) {\n *     await processChunk(chunk);\n *   }\n * });\n */\nexport class ReadableSignalStream {\n    /** @type {string} */\n    #streamId;\n\n    /** @type {string} */\n    #name;\n\n    /** @type {Object} */\n    #meta;\n\n    /** @type {Array<any>} */\n    #buffer = [];\n\n    /** @type {Function|null} */\n    #resolveNext = null;\n\n    /** @type {boolean} */\n    #ended = false;\n\n    /** @type {Error|null} */\n    #error = null;\n\n    /** @type {number} */\n    // #expectedSeq = 0;\n\n    /**\n     * Creates a readable stream from open message.\n     * \n     * @param {string} streamId - Stream ID.\n     * @param {string} name - Stream name.\n     * @param {Object} [meta] - Stream metadata.\n     */\n    constructor(streamId, name, meta = {}) {\n        this.#streamId = streamId;\n        this.#name = name;\n        this.#meta = meta;\n    }\n\n    /**\n     * Gets the stream ID.\n     * @returns {string}\n     */\n    get streamId() {\n        return this.#streamId;\n    }\n\n    /**\n     * Gets the stream name.\n     * @returns {string}\n     */\n    get name() {\n        return this.#name;\n    }\n\n    /**\n     * Gets stream metadata.\n     * @returns {Object}\n     */\n    get meta() {\n        return this.#meta;\n    }\n\n    /**\n     * Gets whether stream has ended.\n     * @returns {boolean}\n     */\n    get ended() {\n        return this.#ended;\n    }\n\n    /**\n     * Pushes data chunk from message.\n     * \n     * @param {Object} message - Stream data message.\n     */\n    push(message) {\n        if (this.#ended) return;\n\n        // Decode data\n        let data = message.d;\n        if (message.b64) {\n            data = this.#base64ToUint8Array(data);\n        }\n\n        // Add to buffer\n        this.#buffer.push(data);\n\n        // Resolve waiting reader\n        if (this.#resolveNext) {\n            const resolve = this.#resolveNext;\n            this.#resolveNext = null;\n            resolve();\n        }\n    }\n\n    /**\n     * Marks stream as ended.\n     * \n     * @param {Object} [meta] - Final metadata.\n     */\n    end(meta) {\n        this.#ended = true;\n        if (meta) {\n            this.#meta = { ...this.#meta, ...meta };\n        }\n\n        // Resolve waiting reader\n        if (this.#resolveNext) {\n            const resolve = this.#resolveNext;\n            this.#resolveNext = null;\n            resolve();\n        }\n    }\n\n    /**\n     * Marks stream as errored.\n     * \n     * @param {string} reason - Error reason.\n     */\n    error(reason) {\n        this.#ended = true;\n        this.#error = new Error(reason);\n\n        if (this.#resolveNext) {\n            const resolve = this.#resolveNext;\n            this.#resolveNext = null;\n            resolve();\n        }\n    }\n\n    /**\n     * Async iterator for consuming stream.\n     * \n     * @returns {AsyncIterableIterator<any>}\n     */\n    async *[Symbol.asyncIterator]() {\n        while (true) {\n            // Return buffered data first\n            while (this.#buffer.length > 0) {\n                yield this.#buffer.shift();\n            }\n\n            // Check for end/error\n            if (this.#ended) {\n                if (this.#error) {\n                    throw this.#error;\n                }\n                return;\n            }\n\n            // Wait for more data\n            await new Promise(resolve => {\n                this.#resolveNext = resolve;\n            });\n        }\n    }\n\n    /**\n     * Collects all data into single result.\n     * \n     * @returns {Promise<Uint8Array | string>}\n     */\n    async collect() {\n        const chunks = [];\n        let isBinary = false;\n\n        for await (const chunk of this) {\n            chunks.push(chunk);\n            if (chunk instanceof Uint8Array) {\n                isBinary = true;\n            }\n        }\n\n        if (isBinary) {\n            // Combine binary chunks\n            const totalLength = chunks.reduce((acc, c) => acc + c.length, 0);\n            const result = new Uint8Array(totalLength);\n            let offset = 0;\n            for (const chunk of chunks) {\n                result.set(chunk, offset);\n                offset += chunk.length;\n            }\n            return result;\n        } else {\n            // Combine string chunks\n            return chunks.join('');\n        }\n    }\n\n    /**\n     * Decodes base64 to Uint8Array.\n     * \n     * @param {string} base64 \n     * @returns {Uint8Array}\n     */\n    #base64ToUint8Array(base64) {\n        const binary = atob(base64);\n        const bytes = new Uint8Array(binary.length);\n        for (let i = 0; i < binary.length; i++) {\n            bytes[i] = binary.charCodeAt(i);\n        }\n        return bytes;\n    }\n}\n\n/**\n * Stream manager for CrossBus.\n * Handles creating, sending, and receiving streams.\n * \n * @example\n * const streams = new StreamManager(bus);\n * \n * // Create and send stream\n * const stream = await streams.createStream('upload', 'peer-1', {\n *   meta: { filename: 'data.json' }\n * });\n * await stream.write(data);\n * await stream.end();\n * \n * // Receive streams\n * streams.onStream('upload', async (stream) => {\n *   const data = await stream.collect();\n * });\n */\nexport class StreamManager {\n    /** @type {Map<string, ReadableSignalStream>} */\n    #activeStreams = new Map();\n\n    /** @type {Map<string, Function>} */\n    #streamHandlers = new Map();\n\n    /** @type {Function} */\n    #sendFn;\n\n    /**\n     * Creates a StreamManager.\n     * \n     * @param {Function} sendFn - Function to send messages: (peerId, message) => Promise.\n     */\n    constructor(sendFn) {\n        this.#sendFn = sendFn;\n    }\n\n    /**\n     * Creates a writable stream to send to a peer.\n     * \n     * @param {string} name - Stream name/type.\n     * @param {string} peerId - Target peer ID.\n     * @param {StreamOptions & { meta?: Object }} [options] - Options.\n     * @returns {WritableSignalStream}\n     */\n    createStream(name, peerId, options = {}) {\n        const sendFn = async (message) => {\n            await this.#sendFn(peerId, message);\n        };\n\n        return new WritableSignalStream(sendFn, name, options);\n    }\n\n    /**\n     * Registers a handler for incoming streams.\n     * \n     * @param {string} name - Stream name to handle.\n     * @param {(stream: ReadableSignalStream) => Promise<void>} handler - Handler function.\n     * @returns {Function} Unregister function.\n     */\n    onStream(name, handler) {\n        this.#streamHandlers.set(name, handler);\n        return () => this.#streamHandlers.delete(name);\n    }\n\n    /**\n     * Handles incoming stream message.\n     * Call this from CrossBus message handler.\n     * \n     * @param {Object} message - Stream message.\n     * @param {string} peerId - Source peer ID.\n     */\n    handleMessage(message, peerId) {\n        if (message.t !== 'stream') return;\n\n        const streamId = message.sid;\n        const streamType = message.st;\n\n        switch (streamType) {\n            case 'open':\n                this.#handleOpen(streamId, message, peerId);\n                break;\n            case 'data':\n                this.#handleData(streamId, message);\n                break;\n            case 'end':\n                this.#handleEnd(streamId, message);\n                break;\n            case 'error':\n                this.#handleError(streamId, message);\n                break;\n        }\n    }\n\n    /**\n     * Handles stream open message.\n     */\n    #handleOpen(streamId, message, peerId) {\n        const handler = this.#streamHandlers.get(message.name);\n        if (!handler) {\n            console.warn(`[CrossBus] No handler for stream: ${message.name}`);\n            return;\n        }\n\n        const stream = new ReadableSignalStream(streamId, message.name, message.meta);\n        this.#activeStreams.set(streamId, stream);\n\n        // Call handler asynchronously\n        handler(stream).catch(err => {\n            console.error('[CrossBus] Stream handler error:', err);\n        });\n    }\n\n    /**\n     * Handles stream data message.\n     */\n    #handleData(streamId, message) {\n        const stream = this.#activeStreams.get(streamId);\n        if (!stream) return;\n\n        stream.push(message);\n    }\n\n    /**\n     * Handles stream end message.\n     */\n    #handleEnd(streamId, message) {\n        const stream = this.#activeStreams.get(streamId);\n        if (!stream) return;\n\n        stream.end(message.meta);\n        this.#activeStreams.delete(streamId);\n    }\n\n    /**\n     * Handles stream error message.\n     */\n    #handleError(streamId, message) {\n        const stream = this.#activeStreams.get(streamId);\n        if (!stream) return;\n\n        stream.error(message.reason);\n        this.#activeStreams.delete(streamId);\n    }\n\n    /**\n     * Gets count of active streams.\n     * @returns {number}\n     */\n    get activeStreamCount() {\n        return this.#activeStreams.size;\n    }\n}\n","/**\n * @fileoverview Presence system for CrossBus.\n * Tracks online peers with heartbeat-based detection.\n * @module core/presence\n */\n\nimport { EventEmitter } from './event-emitter.js';\nimport { PROTOCOL_MARKER, PROTOCOL_VERSION } from '../common/types.js';\n\n/**\n * @typedef {Object} PresenceOptions\n * @property {number} [heartbeatInterval=15000] - How often to send heartbeat (ms).\n * @property {number} [timeout=45000] - Time before peer considered offline (ms).\n * @property {boolean} [autoStart=true] - Start heartbeat automatically.\n */\n\n/**\n * @typedef {Object} PeerPresence\n * @property {string} peerId - Peer identifier.\n * @property {'online' | 'away' | 'offline'} status - Current status.\n * @property {number} lastSeen - Timestamp of last activity.\n * @property {Object} [meta] - Optional metadata (user info, etc).\n */\n\n/**\n * @typedef {'join' | 'leave' | 'update' | 'heartbeat'} PresenceEvent\n */\n\n/**\n * Presence manager for tracking online peers.\n * \n * Emits events:\n * - 'join' - Peer came online\n * - 'leave' - Peer went offline\n * - 'update' - Peer presence updated\n * \n * @example\n * const presence = new PresenceManager(sendFn, { peerId: 'my-peer' });\n * \n * presence.on('join', (peerId, meta) => console.log(`${peerId} is online`));\n * presence.on('leave', (peerId) => console.log(`${peerId} went offline`));\n * \n * // Get all online peers\n * const online = presence.getOnlinePeers();\n * \n * // Update own status\n * presence.setStatus('away');\n * \n * // Cleanup\n * presence.destroy();\n */\nexport class PresenceManager extends EventEmitter {\n    /** @type {string} */\n    #peerId;\n\n    /** @type {Function} */\n    #sendFn;\n\n    /** @type {Map<string, PeerPresence>} */\n    #peers = new Map();\n\n    /** @type {number} */\n    #heartbeatInterval;\n\n    /** @type {number} */\n    #timeout;\n\n    /** @type {ReturnType<typeof setInterval>|null} */\n    #heartbeatTimer = null;\n\n    /** @type {ReturnType<typeof setInterval>|null} */\n    #cleanupTimer = null;\n\n    /** @type {boolean} */\n    #destroyed = false;\n\n    /** @type {'online' | 'away' | 'offline'} */\n    #status = 'online';\n\n    /** @type {Object} */\n    #meta = {};\n\n    /**\n     * Creates a PresenceManager.\n     * \n     * @param {Function} sendFn - Function to broadcast messages: (message) => Promise.\n     * @param {{ peerId: string } & PresenceOptions} options - Options.\n     */\n    constructor(sendFn, options) {\n        super();\n\n        if (!options.peerId) {\n            throw new Error('peerId is required');\n        }\n\n        this.#peerId = options.peerId;\n        this.#sendFn = sendFn;\n        this.#heartbeatInterval = options.heartbeatInterval ?? 15000;\n        this.#timeout = options.timeout ?? 45000;\n\n        if (options.autoStart !== false) {\n            this.start();\n        }\n    }\n\n    /**\n     * Gets own peer ID.\n     * @returns {string}\n     */\n    get peerId() {\n        return this.#peerId;\n    }\n\n    /**\n     * Gets own status.\n     * @returns {'online' | 'away' | 'offline'}\n     */\n    get status() {\n        return this.#status;\n    }\n\n    /**\n     * Gets count of online peers.\n     * @returns {number}\n     */\n    get onlineCount() {\n        let count = 0;\n        for (const peer of this.#peers.values()) {\n            if (peer.status !== 'offline') count++;\n        }\n        return count;\n    }\n\n    /**\n     * Starts the presence system.\n     */\n    start() {\n        if (this.#heartbeatTimer) return;\n\n        // Send initial presence\n        this.#sendPresence('join');\n\n        // Start heartbeat\n        this.#heartbeatTimer = setInterval(() => {\n            this.#sendPresence('heartbeat');\n        }, this.#heartbeatInterval);\n\n        // Start cleanup timer\n        this.#cleanupTimer = setInterval(() => {\n            this.#cleanupOfflinePeers();\n        }, this.#heartbeatInterval);\n    }\n\n    /**\n     * Stops the presence system.\n     */\n    stop() {\n        if (this.#heartbeatTimer) {\n            clearInterval(this.#heartbeatTimer);\n            this.#heartbeatTimer = null;\n        }\n\n        if (this.#cleanupTimer) {\n            clearInterval(this.#cleanupTimer);\n            this.#cleanupTimer = null;\n        }\n\n        // Announce leaving\n        this.#sendPresence('leave');\n    }\n\n    /**\n     * Sets own presence status.\n     * \n     * @param {'online' | 'away' | 'offline'} status - New status.\n     * @param {Object} [meta] - Optional metadata update.\n     */\n    setStatus(status, meta) {\n        this.#status = status;\n        if (meta) {\n            this.#meta = { ...this.#meta, ...meta };\n        }\n        this.#sendPresence('update');\n    }\n\n    /**\n     * Sets own metadata.\n     * \n     * @param {Object} meta - Metadata to merge.\n     */\n    setMeta(meta) {\n        this.#meta = { ...this.#meta, ...meta };\n        this.#sendPresence('update');\n    }\n\n    /**\n     * Gets all online peer IDs.\n     * \n     * @returns {string[]}\n     */\n    getOnlinePeers() {\n        const result = [];\n        for (const [peerId, peer] of this.#peers) {\n            if (peer.status !== 'offline') {\n                result.push(peerId);\n            }\n        }\n        return result;\n    }\n\n    /**\n     * Gets all peer presences.\n     * \n     * @returns {PeerPresence[]}\n     */\n    getAllPeers() {\n        return Array.from(this.#peers.values());\n    }\n\n    /**\n     * Gets a specific peer's presence.\n     * \n     * @param {string} peerId - Peer ID.\n     * @returns {PeerPresence | undefined}\n     */\n    getPeer(peerId) {\n        return this.#peers.get(peerId);\n    }\n\n    /**\n     * Checks if a peer is online.\n     * \n     * @param {string} peerId - Peer ID to check.\n     * @returns {boolean}\n     */\n    isOnline(peerId) {\n        const peer = this.#peers.get(peerId);\n        return peer ? peer.status !== 'offline' : false;\n    }\n\n    /**\n     * Handles incoming presence message.\n     * Call this from CrossBus message handler.\n     * \n     * @param {Object} message - Presence message.\n     * @param {string} fromPeerId - Source peer ID.\n     */\n    handleMessage(message, fromPeerId) {\n        if (message.t !== 'presence') return;\n        if (fromPeerId === this.#peerId) return; // Ignore own messages\n\n        const { pt: presenceType, status, meta } = message;\n        const now = Date.now();\n\n        switch (presenceType) {\n            case 'join':\n                this.#handleJoin(fromPeerId, status, meta, now);\n                // Respond with own presence so they know we're here\n                this.#sendPresence('heartbeat');\n                break;\n\n            case 'leave':\n                this.#handleLeave(fromPeerId);\n                break;\n\n            case 'heartbeat':\n            case 'update':\n                this.#handleUpdate(fromPeerId, status, meta, now);\n                break;\n        }\n    }\n\n    /**\n     * Handles peer join.\n     */\n    #handleJoin(peerId, status, meta, now) {\n        const isNew = !this.#peers.has(peerId);\n\n        this.#peers.set(peerId, {\n            peerId,\n            status: status ?? 'online',\n            lastSeen: now,\n            meta: meta ?? {}\n        });\n\n        if (isNew) {\n            this.emitSync('join', { peerId, meta });\n        }\n    }\n\n    /**\n     * Handles peer leave.\n     */\n    #handleLeave(peerId) {\n        const peer = this.#peers.get(peerId);\n        if (!peer) return;\n\n        peer.status = 'offline';\n        this.#peers.delete(peerId);\n        this.emitSync('leave', { peerId });\n    }\n\n    /**\n     * Handles presence update/heartbeat.\n     */\n    #handleUpdate(peerId, status, meta, now) {\n        let peer = this.#peers.get(peerId);\n        const wasOffline = !peer || peer.status === 'offline';\n\n        if (!peer) {\n            peer = {\n                peerId,\n                status: status ?? 'online',\n                lastSeen: now,\n                meta: meta ?? {}\n            };\n            this.#peers.set(peerId, peer);\n        } else {\n            peer.lastSeen = now;\n            if (status) peer.status = status;\n            if (meta) peer.meta = { ...peer.meta, ...meta };\n        }\n\n        if (wasOffline && peer.status !== 'offline') {\n            this.emitSync('join', { peerId, meta: peer.meta });\n        } else {\n            this.emitSync('update', { peerId, peer });\n        }\n    }\n\n    /**\n     * Cleans up peers that haven't sent heartbeat.\n     */\n    #cleanupOfflinePeers() {\n        const now = Date.now();\n        const threshold = now - this.#timeout;\n\n        for (const [peerId, peer] of this.#peers) {\n            if (peer.lastSeen < threshold && peer.status !== 'offline') {\n                peer.status = 'offline';\n                this.#peers.delete(peerId);\n                this.emitSync('leave', { peerId });\n            }\n        }\n    }\n\n    /**\n     * Sends presence message.\n     */\n    async #sendPresence(type) {\n        if (this.#destroyed) return;\n\n        const message = {\n            [PROTOCOL_MARKER]: PROTOCOL_VERSION,\n            t: 'presence',\n            pt: type,\n            peerId: this.#peerId,\n            status: this.#status,\n            meta: this.#meta,\n            ts: Date.now()\n        };\n\n        try {\n            await this.#sendFn(message);\n        } catch (e) {\n            console.error('[CrossBus] Failed to send presence:', e);\n        }\n    }\n\n    /**\n     * Destroys the presence manager.\n     */\n    destroy() {\n        if (this.#destroyed) return;\n\n        this.#destroyed = true;\n        this.stop();\n        this.#peers.clear();\n    }\n\n    /**\n     * Gets whether manager is destroyed.\n     * @returns {boolean}\n     */\n    get isDestroyed() {\n        return this.#destroyed;\n    }\n}\n\n/**\n * Creates a presence manager integrated with CrossBus.\n * \n * @param {import('./cross-bus.js').CrossBus} bus - CrossBus instance.\n * @param {PresenceOptions} [options] - Options.\n * @returns {PresenceManager}\n * \n * @example\n * const bus = new CrossBus({ peerId: 'my-peer' });\n * const presence = createPresence(bus);\n * \n * presence.on('join', (peerId) => console.log(`${peerId} joined`));\n */\nexport function createPresence(bus, options = {}) {\n    const sendFn = async (message) => {\n        // Broadcast to all peers\n        await bus.signal('__presence__', message);\n    };\n\n    const presence = new PresenceManager(sendFn, {\n        peerId: bus.peerId,\n        ...options\n    });\n\n    // Register handler for presence messages\n    bus.on('__presence__', (message, ctx) => {\n        presence.handleMessage(message, ctx?.peerId ?? message.peerId);\n    });\n\n    return presence;\n}\n","/**\n * @fileoverview Serialization abstraction layer for CrossBus.\n * Uses JSON serialization for maximum compatibility.\n * @module common/serialization\n */\n\n/**\n * @typedef {Object} Serializer\n * @property {string} contentType - MIME type of the serialization format.\n * @property {function(*): string} serialize - Encodes data.\n * @property {function(string): *} deserialize - Decodes data.\n */\n\n/**\n * Standard JSON Serializer (Default).\n * Compatible with all browsers, native bridges (iOS/Android), and standard tooling.\n * @type {Serializer}\n */\nexport const JSONSerializer = {\n    contentType: 'application/json',\n    serialize: (data) => JSON.stringify(data),\n    deserialize: (data) => JSON.parse(/** @type {string} */(data))\n};\n\n/**\n * Registry of available serializers.\n * Extensible for future formats if needed.\n */\nconst serializers = new Map();\nserializers.set(JSONSerializer.contentType, JSONSerializer);\n\n/**\n * Gets a serializer by content type.\n * Defaults to JSON if not found.\n * \n * @param {string} contentType \n * @returns {Serializer}\n */\nexport function getSerializer(contentType) {\n    return serializers.get(contentType) || JSONSerializer;\n}\n\n/**\n * Returns the preferred content type for the given payload.\n * Always returns JSON for maximum compatibility with native bridges.\n * \n * @param {*} payload \n * @returns {string} Content-Type preferred\n */\nexport function detectPreferredContentType(payload) {\n    return JSONSerializer.contentType;\n}\n","/**\n * @fileoverview PostMessage transport for iframes, popups, and workers.\n * Handles message serialization, origin validation, and bidirectional communication.\n * @module transports/postmessage\n */\n\nimport {\n    PROTOCOL_MARKER,\n    PROTOCOL_VERSION,\n    isProtocolMessage,\n    findTransferables\n} from '../common/types.js';\nimport { CrossBusError, ErrorCode } from '../common/errors.js';\nimport { getSerializer, detectPreferredContentType } from '../common/serialization.js';\n\n/**\n * @typedef {Window|Worker|ServiceWorker|MessagePort} PostMessageTarget\n * Target that supports postMessage API.\n */\n\n/**\n * @typedef {Object} PostMessageTransportOptions\n * @property {string} [targetOrigin='*'] - Expected origin for outgoing messages.\n * @property {string[]} [allowedOrigins=[]] - Allowed origins for incoming messages.\n *                                            Empty = same origin only.\n * @property {boolean} [autoTransfer=false] - Auto-detect and transfer transferable objects.\n * @property {string} [contentType='application/json'] - Serialization format.\n */\n\n/**\n * @typedef {Object} MessageSource\n * @property {string} origin - Origin of the message.\n * @property {PostMessageTarget} source - The window/worker that sent the message.\n */\n\n/**\n * @callback MessageHandler\n * @param {Object} message - The received protocol message.\n * @param {MessageSource} source - Info about the message source.\n */\n\n/**\n * PostMessage-based transport for cross-context communication.\n * \n * Supports:\n * - Window to Window (iframe, popup)\n * - Main thread to Worker\n * - Main thread to ServiceWorker\n * \n * @example\n * // Connect to iframe\n * const iframe = document.getElementById('widget');\n * const transport = new PostMessageTransport(iframe.contentWindow, {\n *   targetOrigin: 'https://widget.example.com',\n *   allowedOrigins: ['https://widget.example.com']\n * });\n * \n * transport.onMessage((msg, source) => {\n *   console.log('Received:', msg, 'from:', source.origin);\n * });\n * \n * transport.send({ type: 'greeting', payload: { hello: 'world' } });\n * \n * // Cleanup\n * transport.destroy();\n */\nexport class PostMessageTransport {\n    /** @type {PostMessageTarget|null} */\n    #target = null;\n\n    /** @type {string} */\n    #targetOrigin;\n\n    /** @type {Set<string>} */\n    #allowedOrigins;\n\n    /** @type {boolean} */\n    #autoTransfer;\n\n    /** @type {import('../common/serialization.js').Serializer} */\n    #serializer;\n\n    /** @type {string} */\n    #contentType;\n\n    /** @type {MessageHandler|null} */\n    #messageHandler = null;\n\n    /** @type {Function|null} */\n    #boundListener = null;\n\n    /** @type {boolean} */\n    #destroyed = false;\n\n    /**\n     * Checks if PostMessage API is available.\n     * \n     * @returns {boolean} True if postMessage is supported.\n     */\n    static isSupported() {\n        return typeof globalThis.postMessage === 'function' ||\n            typeof Window !== 'undefined';\n    }\n\n    /**\n     * Creates a new PostMessage transport.\n     * \n     * @param {PostMessageTarget} target - The window/worker to communicate with.\n     * @param {PostMessageTransportOptions} [options={}] - Configuration options.\n     * @throws {TypeError} If target is not a valid postMessage target.\n     */\n    constructor(target, options = {}) {\n        if (!this.#isValidTarget(target)) {\n            throw new TypeError('Target must support postMessage');\n        }\n\n        this.#target = target;\n        this.#targetOrigin = options.targetOrigin ?? '*';\n        this.#allowedOrigins = new Set(options.allowedOrigins ?? []);\n        this.#autoTransfer = options.autoTransfer ?? false;\n        this.#contentType = options.contentType ?? 'application/json';\n        this.#serializer = getSerializer(this.#contentType);\n\n        // Development security warning\n        const isDev = typeof process !== 'undefined'\n            ? process.env?.NODE_ENV !== 'production'\n            : typeof window !== 'undefined' && window.location?.hostname === 'localhost';\n\n        if (isDev && this.#targetOrigin === '*') {\n            console.warn(\n                '[CrossBus Security]  targetOrigin: \"*\" broadcasts to ANY window.\\n' +\n                'This is INSECURE in production. Use specific origin:\\n' +\n                '  targetOrigin: \"https://iframe-domain.com\"\\n' +\n                'Suppress this warning with NODE_ENV=production'\n            );\n        }\n\n        // Set up message listener\n        this.#boundListener = this.#handleMessage.bind(this);\n        this.#getListenerTarget().addEventListener('message', /** @type {EventListener} */(this.#boundListener));\n    }\n\n    /**\n     * Sends a message to the target.\n     * \n     * @param {Object} message - Protocol message to send.\n     * @param {Transferable[]} [transfer] - Transferable objects to pass.\n     * @throws {CrossBusError} If transport is destroyed or target is closed.\n     * \n     * @example\n     * // Simple send\n     * transport.send({ t: 'sig', id: '123', p: { data: 'value' } });\n     * \n     * // With transferable\n     * const buffer = new ArrayBuffer(1024);\n     * transport.send({ t: 'sig', id: '456', p: buffer }, [buffer]);\n     */\n    send(message, transfer) {\n        if (this.#destroyed) {\n            throw CrossBusError.from(ErrorCode.DESTROYED, {\n                context: 'PostMessageTransport.send'\n            });\n        }\n\n        // Check if window is closed\n        if (this.#isWindowClosed()) {\n            throw CrossBusError.from(ErrorCode.PEER_DISCONNECTED, {\n                reason: 'Target window is closed'\n            });\n        }\n\n        // Ensure message has protocol marker\n        const envelope = {\n            [PROTOCOL_MARKER]: PROTOCOL_VERSION,\n            ...message\n        };\n\n        // Serialize if needed\n        // Note: PostMessage can handle objects natively. \n        // We only serialize if strictly requested (e.g. for consistency or size optimization)\n        // OR if the serializer is NOT JSON.\n        let dataToSend = envelope;\n        if (this.#contentType !== 'application/json') {\n            dataToSend = this.#serializer.serialize(envelope);\n        }\n\n        // Auto-detect transferables if enabled\n        let transferables = transfer;\n        if (this.#autoTransfer && !transfer) {\n            transferables = findTransferables(message);\n            if (transferables.length === 0) {\n                transferables = undefined;\n            }\n        }\n\n        // Send based on target type\n        if (this.#isWorker()) {\n            // Workers don't need origin\n            /** @type {Worker} */(this.#target).postMessage(dataToSend, /** @type {any} */(transferables));\n        } else {\n            // Windows need origin\n            /** @type {Window} */(this.#target).postMessage(envelope, this.#targetOrigin, transferables);\n        }\n    }\n\n    /**\n     * Registers a message handler.\n     * Only one handler can be registered; subsequent calls replace previous.\n     * \n     * @param {MessageHandler} handler - Function to handle incoming messages.\n     * \n     * @example\n     * transport.onMessage((msg, source) => {\n     *   if (msg.t === 'req') {\n     *     // Handle request\n     *   }\n     * });\n     */\n    onMessage(handler) {\n        if (typeof handler !== 'function') {\n            throw new TypeError('Handler must be a function');\n        }\n        this.#messageHandler = handler;\n    }\n\n    /**\n     * Removes the message handler.\n     */\n    offMessage() {\n        this.#messageHandler = null;\n    }\n\n    /**\n     * Destroys the transport, removing all listeners.\n     * After destruction, send() will throw.\n     */\n    destroy() {\n        if (this.#destroyed) return;\n\n        this.#destroyed = true;\n        this.#messageHandler = null;\n\n        if (this.#boundListener) {\n            this.#getListenerTarget().removeEventListener('message', /** @type {EventListener} */(this.#boundListener));\n            this.#boundListener = null;\n        }\n    }\n\n    /**\n     * Checks if transport has been destroyed.\n     * @returns {boolean}\n     */\n    get isDestroyed() {\n        return this.#destroyed;\n    }\n\n    /**\n     * Gets the target origin.\n     * @returns {string}\n     */\n    get targetOrigin() {\n        return this.#targetOrigin;\n    }\n\n    // \n    // Private methods\n    // \n\n    /**\n     * Handles incoming message events.\n     * \n     * @param {MessageEvent} event\n     */\n    #handleMessage(event) {\n        // Skip if no handler\n        if (!this.#messageHandler) return;\n\n        // Get message data\n        let data = event.data;\n\n        // Skip non-protocol messages\n        if (!isProtocolMessage(data)) return;\n\n        // Validate origin (skip for workers which don't have origin)\n        if (event.origin && !this.#isOriginAllowed(event.origin)) {\n            console.warn(`[CrossBus] Blocked message from unauthorized origin: ${event.origin}`);\n            return;\n        }\n\n        // Validate source matches target (if target is a Window/MessagePort)\n        // We can't strictly validate for Workers as event.source might be null or different in some contexts\n        if (this.#target && 'postMessage' in this.#target && !this.#isWorker()) {\n            if (event.source !== this.#target) return;\n        }\n\n        // Invoke handler\n        try {\n            this.#messageHandler(data, {\n                origin: event.origin ?? 'worker',\n                source: /** @type {PostMessageTarget} */(/** @type {any} */(event.source ?? event.currentTarget))\n            });\n        } catch (error) {\n            console.error('[CrossBus] Message handler error:', error);\n        }\n    }\n\n    /**\n     * Checks if an origin is allowed.\n     * \n     * @param {string} origin\n     * @returns {boolean}\n     */\n    #isOriginAllowed(origin) {\n        // If no origins specified, only allow same origin\n        if (this.#allowedOrigins.size === 0) {\n            return origin === globalThis.location?.origin;\n        }\n\n        // Check for wildcard\n        if (this.#allowedOrigins.has('*')) {\n            return true;\n        }\n\n        // Check exact match\n        if (this.#allowedOrigins.has(origin)) {\n            return true;\n        }\n\n        // Check wildcard pattern (e.g., https://*.example.com)\n        for (const pattern of this.#allowedOrigins) {\n            if (pattern.includes('*')) {\n                // Use bounded quantifier to prevent ReDoS\n                const regex = new RegExp('^' + pattern\n                    .replace(/[.+?^${}()|[\\]\\\\]/g, '\\\\$&')\n                    .replace(/\\\\\\*/g, '[a-zA-Z0-9.-]{0,253}') + '$');\n                if (regex.test(origin)) {\n                    return true;\n                }\n            }\n        }\n\n        return false;\n    }\n\n    /**\n     * Checks if target is a valid postMessage target.\n     * \n     * @param {*} target\n     * @returns {boolean}\n     */\n    #isValidTarget(target) {\n        if (!target) return false;\n        return typeof target.postMessage === 'function';\n    }\n\n    /**\n     * Checks if target is a Worker or ServiceWorker.\n     * \n     * @returns {boolean}\n     */\n    #isWorker() {\n        if (typeof Worker !== 'undefined' && this.#target instanceof Worker) {\n            return true;\n        }\n        if (typeof ServiceWorker !== 'undefined' && this.#target instanceof ServiceWorker) {\n            return true;\n        }\n        if (typeof MessagePort !== 'undefined' && this.#target instanceof MessagePort) {\n            return true;\n        }\n        return false;\n    }\n\n    /**\n     * Checks if the target window is closed.\n     * \n     * @returns {boolean}\n     */\n    #isWindowClosed() {\n        if (this.#isWorker()) return false;\n        return /** @type {Window} */(this.#target).closed === true;\n    }\n\n    /**\n     * Gets the object to attach message listener to.\n     * For workers, we listen on the worker itself.\n     * For windows, we listen on the current window.\n     * \n     * @returns {EventTarget}\n     */\n    #getListenerTarget() {\n        // If inside worker, listen on self\n        if (typeof DedicatedWorkerGlobalScope !== 'undefined' &&\n            globalThis instanceof DedicatedWorkerGlobalScope) {\n            return globalThis;\n        }\n\n        // Main thread listening to worker - listen on worker\n        if (this.#isWorker()) {\n            return /** @type {EventTarget} */(/** @type {any} */(this.#target));\n        }\n\n        // Window communication - listen on current window\n        if (typeof window !== 'undefined') {\n            return window;\n        }\n\n        return globalThis;\n    }\n}\n","/**\n * @fileoverview BroadcastChannel transport for same-origin tab communication.\n * Uses the BroadcastChannel API for efficient pub/sub across browser contexts.\n * @module transports/broadcast-channel\n */\n\nimport {\n    PROTOCOL_MARKER,\n    PROTOCOL_VERSION,\n    isProtocolMessage\n} from '../common/types.js';\nimport { CrossBusError, ErrorCode } from '../common/errors.js';\nimport { getSerializer, JSONSerializer } from '../common/serialization.js';\n\n/**\n * @typedef {Object} BroadcastChannelTransportOptions\n * @property {string} [channelName='crossbus:default'] - Name of the broadcast channel.\n * @property {string} [contentType='application/json'] - Serialization format.\n */\n\n/**\n * @typedef {Object} MessageContext\n * @property {string} origin - Always 'broadcast' for this transport.\n */\n\n/**\n * @callback MessageHandler\n * @param {Object} message - The received protocol message.\n * @param {MessageContext} context - Context information.\n */\n\n/**\n * BroadcastChannel-based transport for same-origin communication.\n * \n * Perfect for:\n * - Multiple tabs of the same app\n * - Communication without opening connections\n * - Pub/sub pattern across contexts\n * \n * Limitations:\n * - Same-origin only (no cross-origin)\n * - No guaranteed delivery order\n * - No acknowledgments (fire-and-forget)\n * \n * @example\n * // Create transport\n * const transport = new BroadcastChannelTransport({\n *   channelName: 'myapp:events'\n * });\n * \n * // Listen for messages\n * transport.onMessage((msg, ctx) => {\n *   console.log('Received:', msg);\n * });\n * \n * // Send message (to all other tabs)\n * transport.send({ type: 'notification', payload: { text: 'Hello!' } });\n * \n * // Cleanup\n * transport.destroy();\n */\nexport class BroadcastChannelTransport {\n    /** @type {BroadcastChannel} */\n    #channel;\n\n    /** @type {string} */\n    #channelName;\n\n    /** @type {import('../common/serialization.js').Serializer} */\n    #serializer;\n\n    /** @type {string} */\n    #contentType;\n\n    /** @type {MessageHandler|null} */\n    #messageHandler = null;\n\n    /** @type {boolean} */\n    #destroyed = false;\n\n    /**\n     * Checks if BroadcastChannel API is available.\n     * \n     * @returns {boolean} True if BroadcastChannel is supported.\n     */\n    static isSupported() {\n        return typeof BroadcastChannel !== 'undefined';\n    }\n\n    /**\n     * Creates a new BroadcastChannel transport.\n     * \n     * @param {BroadcastChannelTransportOptions} [options={}] - Configuration.\n     * @throws {CrossBusError} If BroadcastChannel is not supported.\n     */\n    constructor(options = {}) {\n        if (!BroadcastChannelTransport.isSupported()) {\n            throw CrossBusError.from(ErrorCode.UNSUPPORTED, {\n                api: 'BroadcastChannel'\n            });\n        }\n\n        this.#channelName = options.channelName ?? 'crossbus:default';\n        this.#channel = new BroadcastChannel(this.#channelName);\n        this.#contentType = options.contentType ?? 'application/json';\n        this.#serializer = getSerializer(this.#contentType);\n\n        // Set up message handler\n        this.#channel.onmessage = this.#handleMessage.bind(this);\n        this.#channel.onmessageerror = this.#handleError.bind(this);\n    }\n\n    /**\n     * Sends a message to all other tabs/windows.\n     * \n     * @param {Object} message - Protocol message to send.\n     * @throws {CrossBusError} If transport is destroyed.\n     * \n     * @example\n     * transport.send({\n     *   t: 'broadcast',\n     *   id: 'abc123',\n     *   p: { event: 'user:login' }\n     * });\n     */\n    send(message) {\n        if (this.#destroyed) {\n            throw CrossBusError.from(ErrorCode.DESTROYED, {\n                context: 'BroadcastChannelTransport.send'\n            });\n        }\n\n        // Ensure message has protocol marker\n        const envelope = {\n            [PROTOCOL_MARKER]: PROTOCOL_VERSION,\n            ...message\n        };\n\n        let dataToSend = envelope;\n        if (this.#contentType !== 'application/json') {\n            dataToSend = this.#serializer.serialize(envelope);\n        }\n\n        this.#channel.postMessage(dataToSend);\n    }\n\n    /**\n     * Registers a message handler.\n     * Only one handler can be registered; subsequent calls replace previous.\n     * \n     * @param {MessageHandler} handler - Function to handle incoming messages.\n     */\n    onMessage(handler) {\n        if (typeof handler !== 'function') {\n            throw new TypeError('Handler must be a function');\n        }\n        this.#messageHandler = handler;\n    }\n\n    /**\n     * Removes the message handler.\n     */\n    offMessage() {\n        this.#messageHandler = null;\n    }\n\n    /**\n     * Destroys the transport, closing the channel.\n     */\n    destroy() {\n        if (this.#destroyed) return;\n\n        this.#destroyed = true;\n        this.#messageHandler = null;\n\n        if (this.#channel) {\n            this.#channel.close();\n            this.#channel = /** @type {any} */(null);\n        }\n    }\n\n    /**\n     * Gets the channel name.\n     * @returns {string}\n     */\n    get channelName() {\n        return this.#channelName;\n    }\n\n    /**\n     * Checks if transport has been destroyed.\n     * @returns {boolean}\n     */\n    get isDestroyed() {\n        return this.#destroyed;\n    }\n\n    // \n    // Private methods\n    // \n\n    /**\n     * Handles incoming message events.\n     * \n     * @param {MessageEvent} event\n     */\n    #handleMessage(event) {\n        // Skip if no handler\n        if (!this.#messageHandler) return;\n\n        // Deserialize if binary (convert to string first)\n        let data = event.data;\n        if (data instanceof ArrayBuffer || data instanceof Uint8Array) {\n            try {\n                const text = new TextDecoder().decode(data instanceof ArrayBuffer ? new Uint8Array(data) : data);\n                data = JSONSerializer.deserialize(text);\n            } catch (e) {\n                console.warn('[CrossBus] Failed to deserialize binary message', e);\n                return;\n            }\n        }\n\n        // Skip non-protocol messages\n        if (!isProtocolMessage(data)) return;\n\n        // Invoke handler\n        try {\n            this.#messageHandler(data, {\n                origin: 'broadcast'\n            });\n        } catch (error) {\n            console.error('[CrossBus] BroadcastChannel handler error:', error);\n        }\n    }\n\n    /**\n     * Handles message errors (e.g., deserialization failures).\n     * \n     * @param {MessageEvent} event\n     */\n    #handleError(event) {\n        console.error('[CrossBus] BroadcastChannel message error:', event);\n    }\n}\n","/**\n * @fileoverview MessageChannel transport for direct 1:1 peer communication.\n * Uses the MessageChannel API for efficient, low-latency communication.\n * @module transports/message-channel\n */\n\nimport {\n    PROTOCOL_MARKER,\n    PROTOCOL_VERSION,\n    isProtocolMessage,\n    findTransferables\n} from '../common/types.js';\nimport { CrossBusError, ErrorCode } from '../common/errors.js';\nimport { getSerializer } from '../common/serialization.js';\n\n/**\n * @typedef {Object} MessageChannelTransportOptions\n * @property {boolean} [autoTransfer=false] - Auto-detect and transfer transferable objects.\n * @property {string} [contentType='application/json'] - Serialization format.\n */\n\n/**\n * @typedef {Object} ChannelPair\n * @property {MessagePort} local - Local port (we listen on this).\n * @property {MessagePort} remote - Remote port (send this to other context).\n */\n\n/**\n * @typedef {Object} MessageContext\n * @property {string} origin - Always 'channel' for this transport.\n */\n\n/**\n * @callback MessageHandler\n * @param {Object} message - The received protocol message.\n * @param {MessageContext} context - Context information.\n */\n\n/**\n * MessageChannel-based transport for direct peer-to-peer communication.\n * \n * This transport creates a direct communication channel that bypasses\n * the hub routing, providing lower latency for high-frequency peer pairs.\n * \n * Use cases:\n * - Direct iframe  worker communication\n * - High-frequency data streams\n * - Bypassing hub for performance\n * \n * @example\n * // On hub side: create channel and send to peer\n * const transport = new MessageChannelTransport();\n * iframe.contentWindow.postMessage(\n *   { type: 'channel', port: transport.remotePort },\n *   '*',\n *   [transport.remotePort]\n * );\n * \n * // On peer side: wrap received port\n * window.addEventListener('message', (e) => {\n *   if (e.data.type === 'channel') {\n *     const transport = MessageChannelTransport.fromPort(e.data.port);\n *     transport.onMessage((msg) => console.log('Received:', msg));\n *   }\n * });\n */\nexport class MessageChannelTransport {\n    /** @type {MessagePort} */\n    #localPort;\n\n    /** @type {MessagePort|null} */\n    #remotePort;\n\n    /** @type {boolean} */\n    #autoTransfer;\n\n    /** @type {import('../common/serialization.js').Serializer} */\n    #serializer;\n\n    /** @type {string} */\n    #contentType;\n\n    /** @type {MessageHandler|null} */\n    #messageHandler = null;\n\n    /** @type {boolean} */\n    #destroyed = false;\n\n    /** @type {boolean} */\n    #isInitiator;\n\n    /**\n     * Checks if MessageChannel API is available.\n     * \n     * @returns {boolean} True if MessageChannel is supported.\n     */\n    static isSupported() {\n        return typeof MessageChannel !== 'undefined';\n    }\n\n    /**\n     * Creates a MessageChannelTransport from an existing port.\n     * Use this when receiving a port from another context.\n     * \n     * @param {MessagePort} port - The received port.\n     * @param {MessageChannelTransportOptions} [options={}] - Configuration.\n     * @returns {MessageChannelTransport}\n     */\n    static fromPort(port, options = {}) {\n        if (!(port instanceof MessagePort)) {\n            throw new TypeError('Port must be a MessagePort');\n        }\n\n        const transport = Object.create(MessageChannelTransport.prototype);\n        transport.#localPort = port;\n        transport.#remotePort = null; // Not available when wrapping existing port\n        transport.#autoTransfer = options.autoTransfer ?? false;\n        transport.#contentType = options.contentType ?? 'application/json';\n        transport.#serializer = getSerializer(transport.#contentType);\n        transport.#destroyed = false;\n        transport.#isInitiator = false;\n        transport.#messageHandler = null;\n\n        // Set up message handler\n        transport.#localPort.onmessage = transport.#handleMessage.bind(transport);\n        transport.#localPort.onmessageerror = transport.#handleError.bind(transport);\n\n        return transport;\n    }\n\n    /**\n     * Creates a new MessageChannel transport (as initiator).\n     * The remote port should be sent to the other context via postMessage.\n     * \n     * @param {MessageChannelTransportOptions} [options={}] - Configuration.\n     * @throws {CrossBusError} If MessageChannel is not supported.\n     */\n    constructor(options = {}) {\n        if (!MessageChannelTransport.isSupported()) {\n            throw CrossBusError.from(ErrorCode.UNSUPPORTED, {\n                api: 'MessageChannel'\n            });\n        }\n\n        const channel = new MessageChannel();\n        this.#localPort = channel.port1;\n        this.#remotePort = channel.port2;\n        this.#autoTransfer = options.autoTransfer ?? false;\n        this.#contentType = options.contentType ?? 'application/json';\n        this.#serializer = getSerializer(this.#contentType);\n        this.#isInitiator = true;\n\n        // Set up message handler\n        this.#localPort.onmessage = this.#handleMessage.bind(this);\n        this.#localPort.onmessageerror = this.#handleError.bind(this);\n    }\n\n    /**\n     * Gets the remote port to send to the other context.\n     * This port can only be accessed once and becomes null after transfer.\n     * \n     * @returns {MessagePort|null} The remote port, or null if already transferred.\n     */\n    get remotePort() {\n        return this.#remotePort;\n    }\n\n    /**\n     * Marks the remote port as transferred (called automatically when used).\n     */\n    markRemoteTransferred() {\n        this.#remotePort = null;\n    }\n\n    /**\n     * Checks if this transport was created as the channel initiator.\n     * @returns {boolean}\n     */\n    get isInitiator() {\n        return this.#isInitiator;\n    }\n\n    /**\n     * Sends a message to the connected peer.\n     * \n     * @param {Object} message - Protocol message to send.\n     * @param {Transferable[]} [transfer] - Transferable objects to pass.\n     * @throws {CrossBusError} If transport is destroyed.\n     */\n    send(message, transfer) {\n        if (this.#destroyed) {\n            throw CrossBusError.from(ErrorCode.DESTROYED, {\n                context: 'MessageChannelTransport.send'\n            });\n        }\n\n        // Ensure message has protocol marker\n        const envelope = {\n            [PROTOCOL_MARKER]: PROTOCOL_VERSION,\n            ...message\n        };\n\n        let dataToSend = envelope;\n        if (this.#contentType !== 'application/json') {\n            dataToSend = this.#serializer.serialize(envelope);\n        }\n\n        // Auto-detect transferables if enabled\n        let transferables = transfer;\n        if (this.#autoTransfer && !transfer) {\n            transferables = findTransferables(message);\n            if (transferables.length === 0) {\n                transferables = undefined;\n            }\n        }\n\n        this.#localPort.postMessage(dataToSend, /** @type {any} */(transferables));\n    }\n\n    /**\n     * Registers a message handler.\n     * Only one handler can be registered; subsequent calls replace previous.\n     * \n     * @param {MessageHandler} handler - Function to handle incoming messages.\n     */\n    onMessage(handler) {\n        if (typeof handler !== 'function') {\n            throw new TypeError('Handler must be a function');\n        }\n        this.#messageHandler = handler;\n    }\n\n    /**\n     * Removes the message handler.\n     */\n    offMessage() {\n        this.#messageHandler = null;\n    }\n\n    /**\n     * Destroys the transport, closing ports.\n     */\n    destroy() {\n        if (this.#destroyed) return;\n\n        this.#destroyed = true;\n        this.#messageHandler = null;\n\n        if (this.#localPort) {\n            this.#localPort.close();\n            this.#localPort = /** @type {any} */(null);\n        }\n\n        if (this.#remotePort) {\n            this.#remotePort.close();\n            this.#remotePort = null;\n        }\n    }\n\n    /**\n     * Checks if transport has been destroyed.\n     * @returns {boolean}\n     */\n    get isDestroyed() {\n        return this.#destroyed;\n    }\n\n    // \n    // Private methods\n    // \n\n    /**\n     * Handles incoming message events.\n     * \n     * @param {MessageEvent} event\n     */\n    #handleMessage(event) {\n        // Skip if no handler\n        if (!this.#messageHandler) return;\n\n        // Get message data\n        let data = event.data;\n\n        // Skip non-protocol messages\n        if (!isProtocolMessage(data)) return;\n\n        // Invoke handler\n        try {\n            this.#messageHandler(data, {\n                origin: 'channel'\n            });\n        } catch (error) {\n            console.error('[CrossBus] MessageChannel handler error:', error);\n        }\n    }\n\n    /**\n     * Handles message errors.\n     * \n     * @param {MessageEvent} event\n     */\n    #handleError(event) {\n        console.error('[CrossBus] MessageChannel error:', event);\n    }\n}\n","/**\n * @fileoverview SharedWorker transport for tab communication via shared state.\n * Uses SharedWorker API for efficient cross-tab communication with shared context.\n * @module transports/shared-worker\n */\n\nimport {\n    PROTOCOL_MARKER,\n    PROTOCOL_VERSION,\n    isProtocolMessage\n} from '../common/types.js';\nimport { CrossBusError, ErrorCode } from '../common/errors.js';\n\n/**\n * @typedef {Object} SharedWorkerTransportOptions\n * @property {string} [workerUrl] - URL to the SharedWorker script.\n * @property {string} [name] - Optional name for the SharedWorker.\n */\n\n/**\n * @typedef {Object} MessageContext\n * @property {string} origin - Always 'sharedworker' for this transport.\n */\n\n/**\n * @callback MessageHandler\n * @param {Object} message - The received protocol message.\n * @param {MessageContext} context - Context information.\n */\n\n/**\n * SharedWorker-based transport for tab communication.\n * \n * SharedWorkers persist across page refreshes and are shared between\n * all tabs/windows of the same origin. This enables:\n * - Shared state across tabs\n * - Single connection to backend (via worker)\n * - Efficient broadcast to all tabs\n * \n * @example\n * // Create transport\n * const transport = new SharedWorkerTransport({\n *   workerUrl: '/crossbus-worker.js'\n * });\n * \n * // Listen for messages\n * transport.onMessage((msg, ctx) => {\n *   console.log('Received:', msg);\n * });\n * \n * // Send message (goes through shared worker to all tabs)\n * transport.send({ t: 'sig', p: { event: 'user:action' } });\n * \n * // Cleanup\n * transport.destroy();\n */\nexport class SharedWorkerTransport {\n    /** @type {SharedWorker|null} */\n    #worker = null;\n\n    /** @type {MessagePort|null} */\n    #port = null;\n\n    /** @type {string} */\n    #workerUrl;\n\n    /** @type {MessageHandler|null} */\n    #messageHandler = null;\n\n    /** @type {boolean} */\n    #destroyed = false;\n\n    /**\n     * Checks if SharedWorker API is available.\n     * \n     * @returns {boolean} True if SharedWorker is supported.\n     */\n    static isSupported() {\n        return typeof SharedWorker !== 'undefined';\n    }\n\n    /**\n     * Creates a new SharedWorker transport.\n     * \n     * @param {SharedWorkerTransportOptions} [options={}] - Configuration.\n     * @throws {CrossBusError} If SharedWorker is not supported.\n     */\n    constructor(options = {}) {\n        if (!SharedWorkerTransport.isSupported()) {\n            throw CrossBusError.from(ErrorCode.UNSUPPORTED, {\n                api: 'SharedWorker'\n            });\n        }\n\n        this.#workerUrl = options.workerUrl ?? '/crossbus-shared-worker.js';\n\n        // Create SharedWorker\n        this.#worker = new SharedWorker(this.#workerUrl, options.name);\n        this.#port = this.#worker.port;\n\n        // Set up message handler on port\n        this.#port.onmessage = this.#handleMessage.bind(this);\n        this.#port.onmessageerror = this.#handleError.bind(this);\n\n        // Handle worker errors\n        this.#worker.onerror = this.#handleWorkerError.bind(this);\n\n        // Start the port (required for SharedWorker)\n        this.#port.start();\n    }\n\n    /**\n     * Sends a message through the SharedWorker.\n     * \n     * @param {Object} message - Protocol message to send.\n     * @param {Transferable[]} [transfer] - Transferable objects.\n     * @throws {CrossBusError} If transport is destroyed.\n     */\n    send(message, transfer) {\n        if (this.#destroyed) {\n            throw CrossBusError.from(ErrorCode.DESTROYED, {\n                context: 'SharedWorkerTransport.send'\n            });\n        }\n\n        // Ensure message has protocol marker\n        const envelope = {\n            [PROTOCOL_MARKER]: PROTOCOL_VERSION,\n            ...message\n        };\n\n        if (!this.#port) return;\n\n        if (transfer && transfer.length > 0) {\n            this.#port.postMessage(envelope, transfer);\n        } else {\n            this.#port.postMessage(envelope);\n        }\n    }\n\n    /**\n     * Registers a message handler.\n     * Only one handler can be registered; subsequent calls replace previous.\n     * \n     * @param {MessageHandler} handler - Function to handle incoming messages.\n     */\n    onMessage(handler) {\n        if (typeof handler !== 'function') {\n            throw new TypeError('Handler must be a function');\n        }\n        this.#messageHandler = handler;\n    }\n\n    /**\n     * Removes the message handler.\n     */\n    offMessage() {\n        this.#messageHandler = null;\n    }\n\n    /**\n     * Destroys the transport, closing the port.\n     */\n    destroy() {\n        if (this.#destroyed) return;\n\n        this.#destroyed = true;\n        this.#messageHandler = null;\n\n        if (this.#port) {\n            this.#port.close();\n            this.#port = null;\n        }\n\n        this.#worker = null;\n    }\n\n    /**\n     * Gets the worker URL.\n     * @returns {string}\n     */\n    get workerUrl() {\n        return this.#workerUrl;\n    }\n\n    /**\n     * Checks if transport has been destroyed.\n     * @returns {boolean}\n     */\n    get isDestroyed() {\n        return this.#destroyed;\n    }\n\n    // \n    // Private methods\n    // \n\n    /**\n     * Handles incoming messages from the SharedWorker.\n     * \n     * @param {MessageEvent} event\n     */\n    #handleMessage(event) {\n        // Skip if no handler\n        if (!this.#messageHandler) return;\n\n        // Skip non-protocol messages\n        if (!isProtocolMessage(event.data)) return;\n\n        // Invoke handler\n        try {\n            this.#messageHandler(event.data, {\n                origin: 'sharedworker'\n            });\n        } catch (error) {\n            console.error('[CrossBus] SharedWorker handler error:', error);\n        }\n    }\n\n    /**\n     * Handles message errors.\n     * \n     * @param {MessageEvent} event\n     */\n    #handleError(event) {\n        console.error('[CrossBus] SharedWorker message error:', event);\n    }\n\n    /**\n     * Handles worker-level errors.\n     * \n     * @param {ErrorEvent} event\n     */\n    #handleWorkerError(event) {\n        console.error('[CrossBus] SharedWorker error:', event.message);\n    }\n}\n","/**\n * @fileoverview ServiceWorker transport for offline-capable communication.\n * Uses ServiceWorker API for background sync and offline messaging.\n * @module transports/service-worker\n */\n\nimport {\n    PROTOCOL_MARKER,\n    PROTOCOL_VERSION,\n    isProtocolMessage\n} from '../common/types.js';\nimport { CrossBusError, ErrorCode } from '../common/errors.js';\n\n/**\n * @typedef {Object} ServiceWorkerTransportOptions\n * @property {number} [timeout=5000] - Timeout waiting for ready state.\n */\n\n/**\n * @typedef {Object} MessageContext\n * @property {string} origin - Always 'serviceworker' for this transport.\n */\n\n/**\n * @callback MessageHandler\n * @param {Object} message - The received protocol message.\n * @param {MessageContext} context - Context information.\n */\n\n/**\n * ServiceWorker-based transport for offline-capable communication.\n * \n * ServiceWorkers run in the background and can:\n * - Handle messages even when page is not focused\n * - Queue messages for offline delivery\n * - Sync state across all tabs\n * \n * @example\n * const transport = new ServiceWorkerTransport();\n * \n * // Wait for ServiceWorker to be ready\n * await transport.ready;\n * \n * // Listen for messages\n * transport.onMessage((msg, ctx) => {\n *   console.log('Received from SW:', msg);\n * });\n * \n * // Send message to ServiceWorker\n * transport.send({ t: 'sig', id: 'abc', p: { event: 'sync' } });\n * \n * // Cleanup\n * transport.destroy();\n */\nexport class ServiceWorkerTransport {\n    /** @type {ServiceWorker|null} */\n    #controller = null;\n\n    /** @type {MessageHandler|null} */\n    #messageHandler = null;\n\n    /** @type {boolean} */\n    #destroyed = false;\n\n    /** @type {Promise<void>} */\n    #readyPromise;\n\n    /** @type {Function|null} */\n    #boundMessageHandler = null;\n\n    /**\n     * Checks if ServiceWorker API is available.\n     * \n     * @returns {boolean} True if ServiceWorker is supported.\n     */\n    static isSupported() {\n        return typeof navigator !== 'undefined' &&\n            'serviceWorker' in navigator;\n    }\n\n    /**\n     * Creates a new ServiceWorker transport.\n     * \n     * @param {ServiceWorkerTransportOptions} [options={}] - Configuration.\n     * @throws {CrossBusError} If ServiceWorker is not supported.\n     */\n    constructor(options = {}) {\n        if (!ServiceWorkerTransport.isSupported()) {\n            throw CrossBusError.from(ErrorCode.UNSUPPORTED, {\n                api: 'ServiceWorker'\n            });\n        }\n\n        // Initialize ready promise\n        this.#readyPromise = this.#initialize();\n    }\n\n    /**\n     * Promise that resolves when transport is ready.\n     * @returns {Promise<void>}\n     */\n    get ready() {\n        return this.#readyPromise;\n    }\n\n    /**\n     * Initializes the ServiceWorker connection.\n     * \n     */\n    async #initialize() {\n        // Wait for ServiceWorker to be ready\n        const registration = await navigator.serviceWorker.ready;\n\n        this.#controller = registration.active || navigator.serviceWorker.controller;\n\n        // Set up message handler\n        this.#boundMessageHandler = this.#handleMessage.bind(this);\n        navigator.serviceWorker.addEventListener('message', /** @type {EventListener} */(this.#boundMessageHandler));\n    }\n\n    /**\n     * Sends a message to the ServiceWorker.\n     * \n     * @param {Object} message - Protocol message to send.\n     * @param {Transferable[]} [transfer] - Transferable objects.\n     * @throws {CrossBusError} If transport is destroyed or no controller.\n     */\n    send(message, transfer) {\n        if (this.#destroyed) {\n            throw CrossBusError.from(ErrorCode.DESTROYED, {\n                context: 'ServiceWorkerTransport.send'\n            });\n        }\n\n        if (!this.#controller) {\n            throw CrossBusError.from(ErrorCode.NOT_CONNECTED, {\n                context: 'ServiceWorkerTransport.send',\n                reason: 'No active ServiceWorker'\n            });\n        }\n\n        // Ensure message has protocol marker\n        const envelope = {\n            [PROTOCOL_MARKER]: PROTOCOL_VERSION,\n            ...message\n        };\n\n        if (transfer && transfer.length > 0) {\n            this.#controller.postMessage(envelope, transfer);\n        } else {\n            this.#controller.postMessage(envelope);\n        }\n    }\n\n    /**\n     * Registers a message handler.\n     * \n     * @param {MessageHandler} handler - Function to handle incoming messages.\n     */\n    onMessage(handler) {\n        if (typeof handler !== 'function') {\n            throw new TypeError('Handler must be a function');\n        }\n        this.#messageHandler = handler;\n    }\n\n    /**\n     * Removes the message handler.\n     */\n    offMessage() {\n        this.#messageHandler = null;\n    }\n\n    /**\n     * Destroys the transport.\n     */\n    destroy() {\n        if (this.#destroyed) return;\n\n        this.#destroyed = true;\n        this.#messageHandler = null;\n\n        if (this.#boundMessageHandler) {\n            navigator.serviceWorker.removeEventListener('message', /** @type {EventListener} */(this.#boundMessageHandler));\n            this.#boundMessageHandler = null;\n        }\n\n        this.#controller = null;\n    }\n\n    /**\n     * Checks if transport has been destroyed.\n     * @returns {boolean}\n     */\n    get isDestroyed() {\n        return this.#destroyed;\n    }\n\n    // \n    // Private methods\n    // \n\n    /**\n     * Handles incoming messages from the ServiceWorker.\n     * \n     * @param {MessageEvent} event\n     */\n    #handleMessage(event) {\n        // Skip if no handler\n        if (!this.#messageHandler) return;\n\n        // Skip non-protocol messages\n        if (!isProtocolMessage(event.data)) return;\n\n        // Invoke handler\n        try {\n            this.#messageHandler(event.data, {\n                origin: 'serviceworker'\n            });\n        } catch (error) {\n            console.error('[CrossBus] ServiceWorker handler error:', error);\n        }\n    }\n}\n","/**\n * @fileoverview Native Bridge transport for Android/iOS WebView communication.\n * Enables CrossBus to communicate with native mobile apps through WebView bridges.\n * @module transports/native-bridge\n */\n\nimport {\n    PROTOCOL_MARKER,\n    PROTOCOL_VERSION,\n    isProtocolMessage\n} from '../common/types.js';\nimport { CrossBusError, ErrorCode } from '../common/errors.js';\n\n/**\n * @typedef {'android' | 'ios' | 'none'} BridgeType\n */\n\n/**\n * @typedef {Object} NativeBridgeTransportOptions\n * @property {string} [androidInterface='CrossBus'] - Name of Android JavascriptInterface.\n * @property {string} [iosHandler='crossbus'] - Name of iOS WKScriptMessageHandler.\n * @property {number} [initTimeout=5000] - Timeout waiting for native bridge (ms).\n * @property {number} [heartbeatInterval=30000] - Heartbeat interval (ms), 0 to disable.\n * @property {boolean} [queueWhileInit=true] - Queue messages while waiting for bridge.\n */\n\n/**\n * @callback MessageHandler\n * @param {Object} message - The received protocol message.\n * @param {{ bridgeType: BridgeType }} source - Bridge type info.\n */\n\n/**\n * Native Bridge transport for WebView  Native communication.\n * \n * Supports:\n * - Android WebView via JavascriptInterface\n * - iOS WKWebView via WKScriptMessageHandler\n * \n * @example\n * // In WebView context\n * const transport = new NativeBridgeTransport();\n * \n * transport.onMessage((msg, source) => {\n *   console.log('From native:', msg, 'via:', source.bridgeType);\n * });\n * \n * // Send to native\n * transport.send({ type: 'greeting', payload: { hello: 'native' } });\n * \n * // Cleanup\n * transport.destroy();\n */\nexport class NativeBridgeTransport {\n    /** @type {BridgeType} */\n    #bridgeType = 'none';\n\n    /** @type {string} */\n    #androidInterface;\n\n    /** @type {string} */\n    #iosHandler;\n\n    /** @type {MessageHandler|null} */\n    #messageHandler = null;\n\n    /** @type {boolean} */\n    #destroyed = false;\n\n    /** @type {boolean} */\n    #ready = false;\n\n    /** @type {Array<Object>} */\n    #messageQueue = [];\n\n    /** @type {boolean} */\n    #queueWhileInit;\n\n    /** @type {ReturnType<typeof setInterval>|null} */\n    #heartbeatTimer = null;\n\n    /** @type {number} */\n    #heartbeatInterval;\n\n    /** @type {Promise<void>} */\n    #readyPromise;\n\n    /** @type {((value?: void) => void)|undefined} */\n    #resolveReady;\n\n    /**\n     * Detects which native bridge is available.\n     * \n     * @returns {BridgeType} The detected bridge type.\n     */\n    static detectBridge() {\n        // Check for Android bridge (customizable name, default 'CrossBus')\n        if (globalThis.CrossBus && typeof globalThis.CrossBus.postMessage === 'function') {\n            return 'android';\n        }\n        // Also check common Android bridge patterns\n        if (globalThis.AndroidBridge && typeof globalThis.AndroidBridge.postMessage === 'function') {\n            return 'android';\n        }\n\n        // iOS: WKWebView injects webkit.messageHandlers\n        if (globalThis.webkit?.messageHandlers?.crossbus) {\n            return 'ios';\n        }\n\n        return 'none';\n    }\n\n    /**\n     * Checks if any native bridge is available.\n     * \n     * @returns {boolean} True if a native bridge is detected.\n     */\n    static isSupported() {\n        return NativeBridgeTransport.detectBridge() !== 'none';\n    }\n\n    /**\n     * Creates a new Native Bridge transport.\n     * \n     * @param {NativeBridgeTransportOptions} [options={}] - Configuration options.\n     */\n    constructor(options = {}) {\n        this.#androidInterface = options.androidInterface ?? 'CrossBus';\n        this.#iosHandler = options.iosHandler ?? 'crossbus';\n        this.#queueWhileInit = options.queueWhileInit ?? true;\n        this.#heartbeatInterval = options.heartbeatInterval ?? 30000;\n\n        // Create ready promise\n        this.#readyPromise = new Promise((resolve) => {\n            this.#resolveReady = resolve;\n        });\n\n        // Detect and initialize bridge\n        this.#initBridge(options.initTimeout ?? 5000);\n    }\n\n    /**\n     * Initializes the native bridge connection.\n     * \n     * @param {number} timeout - Timeout in ms.\n     */\n    async #initBridge(timeout) {\n        const startTime = Date.now();\n\n        // Poll for bridge availability\n        const checkBridge = () => {\n            this.#bridgeType = NativeBridgeTransport.detectBridge();\n\n            if (this.#bridgeType !== 'none') {\n                this.#onBridgeReady();\n                return;\n            }\n\n            if (Date.now() - startTime < timeout) {\n                setTimeout(checkBridge, 50);\n            } else {\n                // Timeout - no bridge found, but don't error\n                // Could be running in regular browser\n                console.warn('[CrossBus] No native bridge detected after timeout');\n                this.#ready = true;\n                this.#resolveReady?.();\n            }\n        };\n\n        checkBridge();\n\n        // Set up global callback for native  JS messages\n        this.#setupNativeCallback();\n    }\n\n    /**\n     * Called when bridge is detected and ready.\n     */\n    #onBridgeReady() {\n        this.#ready = true;\n        this.#resolveReady?.();\n\n        // Flush queued messages\n        this.#flushQueue();\n\n        // Start heartbeat if enabled\n        if (this.#heartbeatInterval > 0) {\n            this.#startHeartbeat();\n        }\n    }\n\n    /**\n     * Sets up callback for native  JS communication.\n     */\n    #setupNativeCallback() {\n        // Native should call this global function to send messages to JS\n        const callbackName = '__crossbus_receive__';\n\n        globalThis[callbackName] = (messageStr) => {\n            if (this.#destroyed || !this.#messageHandler) return;\n\n            try {\n                const data = typeof messageStr === 'string'\n                    ? JSON.parse(messageStr)\n                    : messageStr;\n\n                if (!isProtocolMessage(data)) return;\n\n                this.#messageHandler(data, { bridgeType: this.#bridgeType });\n            } catch (e) {\n                console.error('[CrossBus] Failed to parse native message:', e);\n            }\n        };\n    }\n\n    /**\n     * Sends a message to the native side.\n     * \n     * @param {Object} message - Protocol message to send.\n     * @throws {CrossBusError} If transport is destroyed.\n     */\n    send(message) {\n        if (this.#destroyed) {\n            throw CrossBusError.from(ErrorCode.DESTROYED, {\n                context: 'NativeBridgeTransport.send'\n            });\n        }\n\n        // Ensure message has protocol marker\n        const envelope = {\n            [PROTOCOL_MARKER]: PROTOCOL_VERSION,\n            ...message\n        };\n\n        // Queue if not ready\n        if (!this.#ready && this.#queueWhileInit) {\n            this.#messageQueue.push(envelope);\n            return;\n        }\n\n        this.#sendToNative(envelope);\n    }\n\n    /**\n     * Actually sends message to native bridge.\n     * \n     * @param {Object} envelope - Message envelope.\n     */\n    #sendToNative(envelope) {\n        const jsonStr = JSON.stringify(envelope);\n\n        try {\n            if (this.#bridgeType === 'android') {\n                // Try custom interface name first\n                const bridge = globalThis[this.#androidInterface] || globalThis.AndroidBridge;\n                if (bridge?.postMessage) {\n                    bridge.postMessage(jsonStr);\n                }\n            } else if (this.#bridgeType === 'ios') {\n                // iOS WKWebView\n                const handler = globalThis.webkit?.messageHandlers?.[this.#iosHandler];\n                if (handler?.postMessage) {\n                    handler.postMessage(envelope); // iOS can take objects directly\n                }\n            }\n            // If bridgeType is 'none', silently drop (or could throw)\n        } catch (e) {\n            console.error('[CrossBus] Failed to send to native:', e);\n        }\n    }\n\n    /**\n     * Flushes queued messages after bridge is ready.\n     */\n    #flushQueue() {\n        while (this.#messageQueue.length > 0) {\n            const msg = this.#messageQueue.shift();\n            this.#sendToNative(msg);\n        }\n    }\n\n    /**\n     * Starts heartbeat to keep native connection alive.\n     */\n    #startHeartbeat() {\n        this.#heartbeatTimer = setInterval(() => {\n            if (this.#destroyed) return;\n\n            this.#sendToNative({\n                [PROTOCOL_MARKER]: PROTOCOL_VERSION,\n                t: 'hb', // heartbeat\n                ts: Date.now()\n            });\n        }, this.#heartbeatInterval);\n    }\n\n    /**\n     * Registers a message handler.\n     * \n     * @param {MessageHandler} handler - Function to handle incoming messages.\n     */\n    onMessage(handler) {\n        if (typeof handler !== 'function') {\n            throw new TypeError('Handler must be a function');\n        }\n        this.#messageHandler = handler;\n    }\n\n    /**\n     * Removes the message handler.\n     */\n    offMessage() {\n        this.#messageHandler = null;\n    }\n\n    /**\n     * Destroys the transport, cleaning up resources.\n     */\n    destroy() {\n        if (this.#destroyed) return;\n\n        this.#destroyed = true;\n        this.#messageHandler = null;\n        this.#messageQueue = [];\n\n        if (this.#heartbeatTimer) {\n            clearInterval(this.#heartbeatTimer);\n            this.#heartbeatTimer = null;\n        }\n\n        // Clean up global callback\n        delete globalThis['__crossbus_receive__'];\n    }\n\n    /**\n     * Gets whether the transport is destroyed.\n     * @returns {boolean}\n     */\n    get isDestroyed() {\n        return this.#destroyed;\n    }\n\n    /**\n     * Gets the detected bridge type.\n     * @returns {BridgeType}\n     */\n    get bridgeType() {\n        return this.#bridgeType;\n    }\n\n    /**\n     * Gets whether the bridge is ready.\n     * @returns {boolean}\n     */\n    get isReady() {\n        return this.#ready;\n    }\n\n    /**\n     * Promise that resolves when bridge is ready.\n     * @returns {Promise<void>}\n     */\n    get ready() {\n        return this.#readyPromise;\n    }\n}\n","/**\n * @fileoverview WebSocket transport for CrossBus.\n * Enables communication with a server via WebSocket.\n * @module transports/websocket\n */\n\nimport { uuid } from '../common/utils.js';\nimport { PROTOCOL_MARKER, PROTOCOL_VERSION } from '../common/types.js';\n\n/**\n * @typedef {Object} WebSocketTransportOptions\n * @property {string} url - WebSocket server URL (ws:// or wss://)\n * @property {string} [peerId] - Local peer ID\n * @property {boolean} [autoReconnect=true] - Auto-reconnect on disconnect\n * @property {number} [reconnectDelayMs=1000] - Base delay for reconnection\n * @property {number} [maxReconnectDelayMs=30000] - Max delay with exponential backoff\n * @property {number} [heartbeatIntervalMs=30000] - Heartbeat interval (0 to disable)\n * @property {Object} [protocols] - WebSocket subprotocols\n */\n\n/**\n * WebSocket transport for server communication.\n * \n * @example\n * const transport = new WebSocketTransport({\n *   url: 'wss://api.example.com/crossbus',\n *   peerId: 'client-1'\n * });\n * \n * transport.onMessage((msg) => console.log('Received:', msg));\n * transport.onStateChange((state) => console.log('State:', state));\n * \n * await transport.connect();\n * transport.send({ type: 'hello', payload: { name: 'client' } });\n */\nexport class WebSocketTransport {\n    /** @type {string} */\n    #url;\n\n    /** @type {string} */\n    #peerId;\n\n    /** @type {WebSocket|null} */\n    #socket = null;\n\n    /** @type {boolean} */\n    #autoReconnect;\n\n    /** @type {number} */\n    #reconnectDelayMs;\n\n    /** @type {number} */\n    #maxReconnectDelayMs;\n\n    /** @type {number} */\n    #currentReconnectDelay;\n\n    /** @type {number} */\n    #heartbeatIntervalMs;\n\n    /** @type {ReturnType<typeof setInterval>|null} */\n    #heartbeatTimer = null;\n\n    /** @type {ReturnType<typeof setTimeout>|null} */\n    #reconnectTimer = null;\n\n    /** @type {((message: Object) => void)|null} */\n    #messageHandler = null;\n\n    /** @type {((state: 'connecting'|'connected'|'disconnected'|'error') => void)|null} */\n    #stateHandler = null;\n\n    /** @type {'connecting'|'connected'|'disconnected'|'error'} */\n    #state = 'disconnected';\n\n    /** @type {Object[]} */\n    #messageQueue = [];\n\n    /** @type {boolean} */\n    #intentionalClose = false;\n\n    /**\n     * Creates a new WebSocket transport.\n     * @param {WebSocketTransportOptions} options\n     */\n    constructor(options) {\n        this.#url = options.url;\n        this.#peerId = options.peerId ?? uuid();\n        this.#autoReconnect = options.autoReconnect ?? true;\n        this.#reconnectDelayMs = options.reconnectDelayMs ?? 1000;\n        this.#maxReconnectDelayMs = options.maxReconnectDelayMs ?? 30000;\n        this.#currentReconnectDelay = this.#reconnectDelayMs;\n        this.#heartbeatIntervalMs = options.heartbeatIntervalMs ?? 30000;\n    }\n\n    /** @returns {string} */\n    get peerId() {\n        return this.#peerId;\n    }\n\n    /** @returns {'connecting'|'connected'|'disconnected'|'error'} */\n    get state() {\n        return this.#state;\n    }\n\n    /** @returns {boolean} */\n    get isConnected() {\n        return this.#state === 'connected' && this.#socket?.readyState === WebSocket.OPEN;\n    }\n\n    /**\n     * Connects to the WebSocket server.\n     * @returns {Promise<void>}\n     */\n    async connect() {\n        if (this.#socket && this.#socket.readyState === WebSocket.OPEN) {\n            return;\n        }\n\n        this.#intentionalClose = false;\n        this.#setState('connecting');\n\n        return new Promise((resolve, reject) => {\n            try {\n                this.#socket = new WebSocket(this.#url);\n\n                this.#socket.onopen = () => {\n                    this.#setState('connected');\n                    this.#currentReconnectDelay = this.#reconnectDelayMs;\n                    this.#flushQueue();\n                    this.#startHeartbeat();\n                    resolve();\n                };\n\n                this.#socket.onmessage = (event) => {\n                    this.#handleMessage(event);\n                };\n\n                this.#socket.onclose = (event) => {\n                    this.#stopHeartbeat();\n                    this.#setState('disconnected');\n\n                    if (!this.#intentionalClose && this.#autoReconnect) {\n                        this.#scheduleReconnect();\n                    }\n                };\n\n                this.#socket.onerror = (error) => {\n                    this.#setState('error');\n                    if (this.#state === 'connecting') {\n                        reject(new Error('WebSocket connection failed'));\n                    }\n                };\n            } catch (e) {\n                this.#setState('error');\n                reject(e);\n            }\n        });\n    }\n\n    /**\n     * Disconnects from the server.\n     */\n    disconnect() {\n        this.#intentionalClose = true;\n        this.#stopHeartbeat();\n\n        if (this.#reconnectTimer) {\n            clearTimeout(this.#reconnectTimer);\n            this.#reconnectTimer = null;\n        }\n\n        if (this.#socket) {\n            this.#socket.close(1000, 'Client disconnect');\n            this.#socket = null;\n        }\n\n        this.#setState('disconnected');\n    }\n\n    /**\n     * Sends a message to the server.\n     * @param {Object} message - Message to send\n     * @returns {boolean} Whether the message was sent immediately\n     */\n    send(message) {\n        const envelope = {\n            _cb: PROTOCOL_VERSION,\n            _m: PROTOCOL_MARKER,\n            id: uuid(),\n            from: this.#peerId,\n            timestamp: Date.now(),\n            ...message\n        };\n\n        if (this.isConnected && this.#socket) {\n            this.#socket.send(JSON.stringify(envelope));\n            return true;\n        } else {\n            // Queue for later\n            this.#messageQueue.push(envelope);\n            return false;\n        }\n    }\n\n    /**\n     * Sets the message handler.\n     * @param {(message: Object) => void} handler\n     */\n    onMessage(handler) {\n        this.#messageHandler = handler;\n    }\n\n    /**\n     * Sets the state change handler.\n     * @param {(state: string) => void} handler\n     */\n    onStateChange(handler) {\n        this.#stateHandler = handler;\n    }\n\n    /**\n     * Handles incoming messages.\n     */\n    #handleMessage(event) {\n        try {\n            const data = JSON.parse(event.data);\n\n            // Handle pong (heartbeat response)\n            if (data.type === 'pong') {\n                return;\n            }\n\n            if (this.#messageHandler) {\n                this.#messageHandler(data);\n            }\n        } catch (e) {\n            console.error('[WebSocketTransport] Failed to parse message:', e);\n        }\n    }\n\n    /**\n     * Flushes queued messages.\n     */\n    #flushQueue() {\n        while (this.#messageQueue.length > 0 && this.isConnected && this.#socket) {\n            const message = this.#messageQueue.shift();\n            if (message) {\n                this.#socket.send(JSON.stringify(message));\n            }\n        }\n    }\n\n    /**\n     * Updates and emits state.\n     */\n    #setState(state) {\n        if (this.#state !== state) {\n            this.#state = state;\n            if (this.#stateHandler) {\n                this.#stateHandler(state);\n            }\n        }\n    }\n\n    /**\n     * Starts heartbeat timer.\n     */\n    #startHeartbeat() {\n        if (this.#heartbeatIntervalMs <= 0) return;\n\n        this.#heartbeatTimer = setInterval(() => {\n            if (this.isConnected && this.#socket) {\n                this.#socket.send(JSON.stringify({ type: 'ping', from: this.#peerId }));\n            }\n        }, this.#heartbeatIntervalMs);\n    }\n\n    /**\n     * Stops heartbeat timer.\n     */\n    #stopHeartbeat() {\n        if (this.#heartbeatTimer) {\n            clearInterval(this.#heartbeatTimer);\n            this.#heartbeatTimer = null;\n        }\n    }\n\n    /**\n     * Schedules a reconnection attempt.\n     */\n    #scheduleReconnect() {\n        if (this.#reconnectTimer) return;\n\n        this.#reconnectTimer = setTimeout(async () => {\n            this.#reconnectTimer = null;\n\n            try {\n                await this.connect();\n            } catch {\n                // Exponential backoff\n                this.#currentReconnectDelay = Math.min(\n                    this.#currentReconnectDelay * 2,\n                    this.#maxReconnectDelayMs\n                );\n\n                if (this.#autoReconnect && !this.#intentionalClose) {\n                    this.#scheduleReconnect();\n                }\n            }\n        }, this.#currentReconnectDelay);\n    }\n\n    /**\n     * Destroys the transport.\n     */\n    destroy() {\n        this.disconnect();\n        this.#messageHandler = null;\n        this.#stateHandler = null;\n        this.#messageQueue = [];\n    }\n}\n","/**\n * @fileoverview Vector Clock implementation for causal ordering.\n * \n * Vector clocks track logical time across distributed processes,\n * enabling detection of causal relationships between events.\n * \n * @module ordering/vector-clock\n */\n\n/**\n * Vector Clock for tracking causal order in distributed systems.\n * \n * Each node maintains a counter for every known node. When sending\n * a message, the sender increments its own counter and includes\n * the entire clock. When receiving, the receiver updates its clock\n * by taking the max of each component.\n * \n * @example\n * const clock = new VectorClock('node-1');\n * clock.tick(); // Increment before sending\n * const message = { data, clock: clock.toJSON() };\n * \n * // On receive:\n * const remoteClock = VectorClock.fromJSON(message.clock);\n * if (localClock.canDeliver(remoteClock, senderId)) {\n *   localClock.update(remoteClock);\n *   deliver(message);\n * }\n */\nexport class VectorClock {\n    /** @type {string} */\n    #ownId;\n\n    /** @type {Map<string, number>} */\n    #counters;\n\n    /**\n     * Creates a new vector clock.\n     * \n     * @param {string} ownId - This node's unique identifier\n     * @param {Object<string, number>} [initial={}] - Initial counter values\n     */\n    constructor(ownId, initial = {}) {\n        this.#ownId = ownId;\n        this.#counters = new Map(Object.entries(initial));\n\n        // Ensure own entry exists\n        if (!this.#counters.has(ownId)) {\n            this.#counters.set(ownId, 0);\n        }\n    }\n\n    /**\n     * Gets this node's ID.\n     * @returns {string}\n     */\n    get ownId() {\n        return this.#ownId;\n    }\n\n    /**\n     * Gets the counter value for a node.\n     * \n     * @param {string} nodeId - Node identifier\n     * @returns {number} Counter value (0 if unknown)\n     */\n    get(nodeId) {\n        return this.#counters.get(nodeId) ?? 0;\n    }\n\n    /**\n     * Increments this node's counter (call before sending).\n     * \n     * @returns {number} New counter value\n     */\n    tick() {\n        const current = this.get(this.#ownId);\n        const next = current + 1;\n        this.#counters.set(this.#ownId, next);\n        return next;\n    }\n\n    /**\n     * Updates this clock with values from another clock.\n     * Takes the max of each component (merge operation).\n     * \n     * @param {VectorClock} other - Clock to merge from\n     */\n    update(other) {\n        for (const [nodeId, value] of other.#counters) {\n            const current = this.get(nodeId);\n            if (value > current) {\n                this.#counters.set(nodeId, value);\n            }\n        }\n    }\n\n    /**\n     * Checks if this clock happened-before another.\n     * A happened-before B iff all(A[i] <= B[i]) and exists(A[j] < B[j])\n     * \n     * @param {VectorClock} other - Clock to compare against\n     * @returns {boolean} True if this clock causally precedes other\n     */\n    happenedBefore(other) {\n        let atLeastOneSmaller = false;\n        const allNodeIds = new Set([...this.#counters.keys(), ...other.#counters.keys()]);\n\n        for (const nodeId of allNodeIds) {\n            const thisVal = this.get(nodeId);\n            const otherVal = other.get(nodeId);\n\n            if (thisVal > otherVal) {\n                return false; // This has a greater component\n            }\n            if (thisVal < otherVal) {\n                atLeastOneSmaller = true;\n            }\n        }\n\n        return atLeastOneSmaller;\n    }\n\n    /**\n     * Checks if this clock is concurrent with another.\n     * Concurrent means neither happened-before the other.\n     * \n     * @param {VectorClock} other - Clock to compare against\n     * @returns {boolean} True if clocks are concurrent\n     */\n    isConcurrentWith(other) {\n        return !this.happenedBefore(other) &&\n            !other.happenedBefore(this) &&\n            !this.equals(other);\n    }\n\n    /**\n     * Checks if two clocks are identical.\n     * \n     * @param {VectorClock} other - Clock to compare against\n     * @returns {boolean} True if clocks have identical values\n     */\n    equals(other) {\n        const allNodeIds = new Set([...this.#counters.keys(), ...other.#counters.keys()]);\n\n        for (const nodeId of allNodeIds) {\n            if (this.get(nodeId) !== other.get(nodeId)) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    /**\n     * Checks if a message with the given clock can be delivered.\n     * \n     * Delivery condition: For the sender's component, the message clock\n     * should be exactly one more than our current knowledge. For all other\n     * components, the message clock should be <= our current knowledge.\n     * \n     * @param {VectorClock} msgClock - Clock attached to incoming message\n     * @param {string} senderId - ID of the message sender\n     * @returns {boolean} True if message can be delivered without breaking causal order\n     */\n    canDeliver(msgClock, senderId) {\n        const senderSeq = msgClock.get(senderId);\n        const ourKnowledge = this.get(senderId);\n\n        // Sender's sequence should be next in order (exactly +1)\n        if (senderSeq !== ourKnowledge + 1) {\n            return false;\n        }\n\n        // All other components should be <= what we know\n        for (const [nodeId, value] of msgClock.#counters) {\n            if (nodeId === senderId) continue;\n            if (value > this.get(nodeId)) {\n                return false; // We're missing messages from another node\n            }\n        }\n\n        return true;\n    }\n\n    /**\n     * Creates a copy of this clock.\n     * \n     * @returns {VectorClock} Cloned clock\n     */\n    clone() {\n        const counters = Object.fromEntries(this.#counters);\n        return new VectorClock(this.#ownId, counters);\n    }\n\n    /**\n     * Serializes to JSON-compatible object.\n     * \n     * @returns {{ ownId: string, counters: Object<string, number> }}\n     */\n    toJSON() {\n        return {\n            ownId: this.#ownId,\n            counters: Object.fromEntries(this.#counters)\n        };\n    }\n\n    /**\n     * Deserializes from JSON object.\n     * \n     * @param {{ ownId: string, counters: Object<string, number> }} json\n     * @returns {VectorClock}\n     */\n    static fromJSON(json) {\n        return new VectorClock(json.ownId, json.counters);\n    }\n\n    /**\n     * Returns human-readable representation.\n     * @returns {string}\n     */\n    toString() {\n        const entries = [...this.#counters.entries()]\n            .map(([k, v]) => `${k}:${v}`)\n            .join(', ');\n        return `VectorClock(${this.#ownId}){${entries}}`;\n    }\n}\n","/**\n * @fileoverview Causal Orderer for message delivery with causal consistency.\n * \n * Buffers out-of-order messages and delivers them only when their\n * causal dependencies have been satisfied.\n * \n * @module ordering/causal-orderer\n */\n\nimport { VectorClock } from './vector-clock.js';\n\n/**\n * @typedef {Object} CausalOrdererOptions\n * @property {Function} [onDeliver] - Callback when message is delivered\n * @property {number} [maxBufferSize=1000] - Maximum buffered messages\n * @property {Function} [onBufferOverflow] - Called when buffer is full\n */\n\n/**\n * @typedef {Object} BufferedMessage\n * @property {string} senderId - Message sender ID\n * @property {Object} message - Original message\n * @property {VectorClock} clock - Message's vector clock\n */\n\n/**\n * Causal Orderer ensures messages are delivered in causal order.\n * \n * When a message arrives out of order (missing dependencies), it's\n * buffered until its dependencies are satisfied. This guarantees\n * that if message B was sent after seeing message A, then B will\n * be delivered after A at all receivers.\n * \n * @example\n * const orderer = new CausalOrderer('my-node', {\n *   onDeliver: (msg) => processMessage(msg)\n * });\n * \n * // When receiving a message:\n * orderer.receive(senderId, message);\n * \n * // When sending:\n * const clock = orderer.tick();\n * send({ ...data, clock: clock.toJSON() });\n */\nexport class CausalOrderer {\n    /** @type {string} */\n    #ownId;\n\n    /** @type {VectorClock} */\n    #clock;\n\n    /** @type {BufferedMessage[]} */\n    #buffer;\n\n    /** @type {Function} */\n    #onDeliver;\n\n    /** @type {number} */\n    #maxBufferSize;\n\n    /** @type {Function|null} */\n    #onBufferOverflow;\n\n    /**\n     * Creates a new CausalOrderer.\n     * \n     * @param {string} ownId - This node's unique identifier\n     * @param {CausalOrdererOptions} options - Configuration options\n     */\n    constructor(ownId, options = {}) {\n        this.#ownId = ownId;\n        this.#clock = new VectorClock(ownId);\n        this.#buffer = [];\n        this.#onDeliver = options.onDeliver || (() => { });\n        this.#maxBufferSize = options.maxBufferSize ?? 1000;\n        this.#onBufferOverflow = options.onBufferOverflow || null;\n    }\n\n    /**\n     * Gets this node's ID.\n     * @returns {string}\n     */\n    get ownId() {\n        return this.#ownId;\n    }\n\n    /**\n     * Gets the current buffer size.\n     * @returns {number}\n     */\n    get bufferSize() {\n        return this.#buffer.length;\n    }\n\n    /**\n     * Receives a message and delivers it if deps are satisfied,\n     * otherwise buffers it.\n     * \n     * @param {string} senderId - ID of the message sender\n     * @param {Object} message - Message with clock property\n     */\n    receive(senderId, message) {\n        const msgClock = VectorClock.fromJSON(message.clock);\n\n        if (this.#clock.canDeliver(msgClock, senderId)) {\n            this.#deliver(senderId, message, msgClock);\n            this.#tryDeliverBuffered();\n        } else {\n            this.#bufferMessage(senderId, message, msgClock);\n        }\n    }\n\n    /**\n     * Delivers a message and updates local clock.\n     * \n     * @param {string} senderId\n     * @param {Object} message\n     * @param {VectorClock} msgClock\n     */\n    #deliver(senderId, message, msgClock) {\n        // Update local clock with received clock\n        this.#clock.update(msgClock);\n\n        // Invoke delivery callback\n        this.#onDeliver(message);\n    }\n\n    /**\n     * Buffers a message for later delivery.\n     * \n     * @param {string} senderId\n     * @param {Object} message\n     * @param {VectorClock} clock\n     */\n    #bufferMessage(senderId, message, clock) {\n        if (this.#buffer.length >= this.#maxBufferSize) {\n            if (this.#onBufferOverflow) {\n                this.#onBufferOverflow({\n                    senderId,\n                    message,\n                    bufferSize: this.#buffer.length\n                });\n            }\n            return; // Drop message if buffer full\n        }\n\n        this.#buffer.push({ senderId, message, clock });\n    }\n\n    /**\n     * Tries to deliver buffered messages whose deps are now satisfied.\n     * Repeats until no more messages can be delivered.\n     */\n    #tryDeliverBuffered() {\n        let delivered = true;\n\n        while (delivered) {\n            delivered = false;\n\n            for (let i = this.#buffer.length - 1; i >= 0; i--) {\n                const { senderId, message, clock } = this.#buffer[i];\n\n                if (this.#clock.canDeliver(clock, senderId)) {\n                    // Remove from buffer\n                    this.#buffer.splice(i, 1);\n                    // Deliver\n                    this.#deliver(senderId, message, clock);\n                    delivered = true;\n                }\n            }\n        }\n    }\n\n    /**\n     * Increments local clock for sending a message.\n     * Returns the clock to attach to outgoing message.\n     * \n     * @returns {VectorClock} Clock to include in message\n     */\n    tick() {\n        this.#clock.tick();\n        return this.#clock.clone();\n    }\n\n    /**\n     * Gets a copy of the current vector clock.\n     * \n     * @returns {VectorClock}\n     */\n    getVectorClock() {\n        return this.#clock.clone();\n    }\n\n    /**\n     * Clears the buffer (e.g., on disconnect).\n     */\n    clear() {\n        this.#buffer = [];\n    }\n}\n"],"names":["PROTOCOL_PREFIX"],"mappings":"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"}