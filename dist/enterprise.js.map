{"version":3,"file":"enterprise.js","sources":["../src/common/utils.js","../src/enterprise/tracing.js","../src/enterprise/metrics.js","../src/enterprise/backpressure.js","../src/enterprise/versioning.js"],"sourcesContent":["/**\n * @fileoverview Utility functions shared across modules.\n * @module common/utils\n */\n\n/**\n * Generates a UUID v4.\n * Uses crypto.randomUUID() when available, falls back to manual generation.\n * \n * @returns {string} UUID v4 string.\n */\nexport function uuid() {\n    if (typeof crypto !== 'undefined' && crypto.randomUUID) {\n        return crypto.randomUUID();\n    }\n    // Fallback for older browsers\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\n        const r = Math.random() * 16 | 0;\n        const v = c === 'x' ? r : (r & 0x3 | 0x8);\n        return v.toString(16);\n    });\n}\n\n/**\n * Checks if data can be structured cloned.\n * \n * @param {*} data - Data to check.\n * @returns {boolean} True if cloneable.\n */\nexport function isCloneable(data) {\n    if (data === null || data === undefined) return true;\n\n    const type = typeof data;\n\n    // Primitives are always cloneable\n    if (type === 'boolean' || type === 'number' || type === 'string') {\n        return true;\n    }\n\n    // Functions and symbols are not cloneable\n    if (type === 'function' || type === 'symbol') {\n        return false;\n    }\n\n    // Check for DOM nodes\n    if (typeof Node !== 'undefined' && data instanceof Node) {\n        return false;\n    }\n\n    // Check for WeakMap/WeakSet\n    if (data instanceof WeakMap || data instanceof WeakSet) {\n        return false;\n    }\n\n    // For objects/arrays, we'd need to recursively check\n    // For performance, we assume they're cloneable and let postMessage fail\n    return true;\n}\n\n/**\n * Creates a deferred promise (Promise.withResolvers polyfill).\n * Uses native Promise.withResolvers() when available (ES2024+).\n * \n * @template T\n * @returns {{promise: Promise<T>, resolve: (value: T) => void, reject: (reason: any) => void}}\n */\nexport function deferred() {\n    // Use native Promise.withResolvers if available (ES2024+, ~10x faster)\n    // @ts-ignore\n    if (typeof Promise.withResolvers === 'function') {\n        // @ts-ignore\n        return Promise.withResolvers();\n    }\n    // Fallback for older engines\n    let resolve, reject;\n    const promise = new Promise((res, rej) => {\n        resolve = res;\n        reject = rej;\n    });\n    // @ts-ignore\n    return { promise, resolve, reject };\n}\n\n/**\n * Creates a promise that resolves after a timeout.\n * \n * @param {number} ms - Timeout in milliseconds.\n * @param {AbortSignal} [signal] - Optional abort signal.\n * @returns {Promise<void>}\n */\nexport function sleep(ms, signal) {\n    return new Promise((resolve, reject) => {\n        if (signal?.aborted) {\n            reject(signal.reason ?? new Error('Aborted'));\n            return;\n        }\n\n        const timeoutId = setTimeout(resolve, ms);\n\n        if (signal) {\n            signal.addEventListener('abort', () => {\n                clearTimeout(timeoutId);\n                reject(signal.reason ?? new Error('Aborted'));\n            }, { once: true });\n        }\n    });\n}\n\n/**\n * Creates a promise that rejects after a timeout.\n * \n * @template T\n * @param {Promise<T>} promise - Promise to race against.\n * @param {number} ms - Timeout in milliseconds.\n * @param {string} [message='Operation timed out'] - Timeout error message.\n * @returns {Promise<T>}\n */\nexport function withTimeout(promise, ms, message = 'Operation timed out') {\n    return Promise.race([\n        promise,\n        new Promise((_, reject) => {\n            setTimeout(() => reject(new Error(message)), ms);\n        })\n    ]);\n}\n\n\n\n/**\n * Detects the type of a peer target.\n * \n * @param {*} target - Target to check.\n * @returns {'iframe'|'worker'|'sw'|'window'|'port'|'unknown'}\n */\nexport function detectPeerType(target) {\n    // MessagePort\n    if (target instanceof MessagePort) {\n        return 'port';\n    }\n\n    // Worker\n    if (typeof Worker !== 'undefined' && target instanceof Worker) {\n        return 'worker';\n    }\n\n    // ServiceWorker\n    if (typeof ServiceWorker !== 'undefined' && target instanceof ServiceWorker) {\n        return 'sw';\n    }\n\n    // Window (iframe or popup)\n    if (typeof Window !== 'undefined' && target instanceof Window) {\n        return 'window';\n    }\n\n    // HTMLIFrameElement\n    if (typeof HTMLIFrameElement !== 'undefined' && target instanceof HTMLIFrameElement) {\n        return 'iframe';\n    }\n\n    // DedicatedWorkerGlobalScope (inside worker)\n    if (typeof DedicatedWorkerGlobalScope !== 'undefined' &&\n        target instanceof DedicatedWorkerGlobalScope) {\n        return 'worker';\n    }\n\n    return 'unknown';\n}\n\n\n\n/**\n * Creates a frozen timestamp object.\n * \n * @returns {{timestamp: number, iso: string}}\n */\nexport function timestamp() {\n    const ts = Date.now();\n    return Object.freeze({\n        timestamp: ts,\n        iso: new Date(ts).toISOString()\n    });\n}\n\n\n","/**\n * @fileoverview Distributed tracing for CrossBus.\n * W3C Trace Context compatible for cross-context message tracing.\n * @module enterprise/tracing\n */\n\nimport { uuid } from '../common/utils.js';\n\n/**\n * @typedef {Object} SpanContext\n * @property {string} traceId - 32-char hex trace ID\n * @property {string} spanId - 16-char hex span ID\n * @property {string} [parentSpanId] - Parent span ID\n * @property {number} traceFlags - Trace flags (1 = sampled)\n */\n\n/**\n * @typedef {Object} SpanEvent\n * @property {string} name - Event name\n * @property {number} timestamp - Unix timestamp in ms\n * @property {Object} [attributes] - Event attributes\n */\n\n/**\n * @typedef {'unset'|'ok'|'error'} SpanStatus\n */\n\n/**\n * Represents a single span in a distributed trace.\n */\nexport class Span {\n    /** @type {SpanContext} */\n    #context;\n\n    /** @type {string} */\n    #name;\n\n    /** @type {number} */\n    #startTime;\n\n    /** @type {number|null} */\n    #endTime = null;\n\n    /** @type {SpanStatus} */\n    #status = 'unset';\n\n    /** @type {string|null} */\n    #statusMessage = null;\n\n    /** @type {SpanEvent[]} */\n    #events = [];\n\n    /** @type {Object} */\n    #attributes = {};\n\n    /** @type {Tracer} */\n    #tracer;\n\n    /**\n     * @param {Tracer} tracer - Parent tracer\n     * @param {string} name - Span name\n     * @param {SpanContext} context - Span context\n     */\n    constructor(tracer, name, context) {\n        this.#tracer = tracer;\n        this.#name = name;\n        this.#context = context;\n        this.#startTime = Date.now();\n    }\n\n    /** @returns {SpanContext} */\n    get context() {\n        return this.#context;\n    }\n\n    /** @returns {string} */\n    get name() {\n        return this.#name;\n    }\n\n    /** @returns {boolean} */\n    get isEnded() {\n        return this.#endTime !== null;\n    }\n\n    /**\n     * Sets a span attribute.\n     * @param {string} key - Attribute key\n     * @param {string|number|boolean} value - Attribute value\n     * @returns {this}\n     */\n    setAttribute(key, value) {\n        if (!this.isEnded) {\n            this.#attributes[key] = value;\n        }\n        return this;\n    }\n\n    /**\n     * Sets multiple attributes.\n     * @param {Object} attributes - Key-value pairs\n     * @returns {this}\n     */\n    setAttributes(attributes) {\n        if (!this.isEnded) {\n            Object.assign(this.#attributes, attributes);\n        }\n        return this;\n    }\n\n    /**\n     * Adds an event to the span.\n     * @param {string} name - Event name\n     * @param {Object} [attributes] - Event attributes\n     * @returns {this}\n     */\n    addEvent(name, attributes) {\n        if (!this.isEnded) {\n            this.#events.push({\n                name,\n                timestamp: Date.now(),\n                attributes\n            });\n        }\n        return this;\n    }\n\n    /**\n     * Sets the span status.\n     * @param {SpanStatus} status - Status code\n     * @param {string} [message] - Status message (for errors)\n     * @returns {this}\n     */\n    setStatus(status, message) {\n        if (!this.isEnded) {\n            this.#status = status;\n            this.#statusMessage = message ?? null;\n        }\n        return this;\n    }\n\n    /**\n     * Records an exception on the span.\n     * @param {Error} error - The exception\n     * @returns {this}\n     */\n    recordException(error) {\n        this.addEvent('exception', {\n            'exception.type': error.name,\n            'exception.message': error.message,\n            'exception.stacktrace': error.stack\n        });\n        this.setStatus('error', error.message);\n        return this;\n    }\n\n    /**\n     * Ends the span.\n     */\n    end() {\n        if (!this.isEnded) {\n            this.#endTime = Date.now();\n            this.#tracer._onSpanEnd(this);\n        }\n    }\n\n    /**\n     * Returns the W3C traceparent header value.\n     * @returns {string}\n     */\n    toTraceparent() {\n        const version = '00';\n        const flags = this.#context.traceFlags.toString(16).padStart(2, '0');\n        return `${version}-${this.#context.traceId}-${this.#context.spanId}-${flags}`;\n    }\n\n    /**\n     * Exports the span as a JSON object.\n     * @returns {Object}\n     */\n    toJSON() {\n        return {\n            traceId: this.#context.traceId,\n            spanId: this.#context.spanId,\n            parentSpanId: this.#context.parentSpanId,\n            name: this.#name,\n            startTime: this.#startTime,\n            endTime: this.#endTime,\n            duration: this.#endTime ? this.#endTime - this.#startTime : null,\n            status: this.#status,\n            statusMessage: this.#statusMessage,\n            attributes: { ...this.#attributes },\n            events: [...this.#events]\n        };\n    }\n}\n\n/**\n * Distributed tracer for CrossBus.\n * \n * @example\n * const tracer = new Tracer('my-service');\n * \n * const span = tracer.startSpan('user:save');\n * span.setAttribute('user.id', 123);\n * span.addEvent('validated');\n * \n * try {\n *   await saveUser();\n *   span.setStatus('ok');\n * } catch (e) {\n *   span.recordException(e);\n * } finally {\n *   span.end();\n * }\n */\nexport class Tracer {\n    /** @type {string} */\n    #serviceName;\n\n    /** @type {Map<string, Span[]>} Traces by traceId */\n    #traces = new Map();\n\n    /** @type {Span[]} All completed spans */\n    #completedSpans = [];\n\n    /** @type {number} Max completed spans to keep */\n    #maxSpans;\n\n    /** @type {boolean} Whether to sample (record) traces */\n    #sampled;\n\n    /** @type {((span: Span) => void)[]} */\n    #spanEndCallbacks = [];\n\n    /**\n     * Creates a new tracer.\n     * @param {string} [serviceName='crossbus'] - Service name for traces\n     * @param {Object} [options={}] - Tracer options\n     * @param {number} [options.maxSpans=1000] - Max completed spans to keep\n     * @param {boolean} [options.sampled=true] - Whether to record traces\n     */\n    constructor(serviceName = 'crossbus', options = {}) {\n        this.#serviceName = serviceName;\n        this.#maxSpans = options.maxSpans ?? 1000;\n        this.#sampled = options.sampled ?? true;\n    }\n\n    /**\n     * Starts a new span.\n     * @param {string} name - Span name (e.g., 'user:save', 'widget:init')\n     * @param {Object} [options={}] - Span options\n     * @param {Span} [options.parent] - Parent span for context propagation\n     * @param {Object} [options.attributes] - Initial attributes\n     * @returns {Span}\n     */\n    startSpan(name, options = {}) {\n        const parent = options.parent;\n\n        const context = {\n            traceId: parent?.context.traceId ?? this.#generateTraceId(),\n            spanId: this.#generateSpanId(),\n            parentSpanId: parent?.context.spanId,\n            traceFlags: this.#sampled ? 1 : 0\n        };\n\n        const span = new Span(this, name, context);\n\n        if (options.attributes) {\n            span.setAttributes(options.attributes);\n        }\n\n        // Add to active traces\n        if (!this.#traces.has(context.traceId)) {\n            this.#traces.set(context.traceId, []);\n        }\n        const traceSpans = this.#traces.get(context.traceId);\n        if (traceSpans) {\n            traceSpans.push(span);\n        }\n\n        return span;\n    }\n\n    /**\n     * Creates a span from a W3C traceparent header.\n     * @param {string} name - Span name\n     * @param {string} traceparent - W3C traceparent header value\n     * @returns {Span}\n     */\n    startSpanFromTraceparent(name, traceparent) {\n        const context = this.parseTraceparent(traceparent);\n        if (!context) {\n            return this.startSpan(name);\n        }\n\n        const span = new Span(this, name, {\n            traceId: context.traceId,\n            spanId: this.#generateSpanId(),\n            parentSpanId: context.spanId,\n            traceFlags: context.traceFlags\n        });\n\n        if (!this.#traces.has(context.traceId)) {\n            this.#traces.set(context.traceId, []);\n        }\n        const traceSpans = this.#traces.get(context.traceId);\n        if (traceSpans) {\n            traceSpans.push(span);\n        }\n\n        return span;\n    }\n\n    /**\n     * Parses a W3C traceparent header.\n     * @param {string} traceparent - Header value\n     * @returns {SpanContext|null}\n     */\n    parseTraceparent(traceparent) {\n        if (!traceparent || typeof traceparent !== 'string') {\n            return null;\n        }\n\n        const parts = traceparent.split('-');\n        if (parts.length !== 4) {\n            return null;\n        }\n\n        const [version, traceId, spanId, flags] = parts;\n\n        // Validate format\n        if (version !== '00' || traceId.length !== 32 || spanId.length !== 16) {\n            return null;\n        }\n\n        return {\n            traceId,\n            spanId,\n            traceFlags: parseInt(flags, 16)\n        };\n    }\n\n    /**\n     * Gets all spans for a trace.\n     * @param {string} traceId - Trace ID\n     * @returns {Span[]}\n     */\n    getTrace(traceId) {\n        return this.#traces.get(traceId) ?? [];\n    }\n\n    /**\n     * Gets all completed spans.\n     * @returns {Span[]}\n     */\n    getCompletedSpans() {\n        return [...this.#completedSpans];\n    }\n\n    /**\n     * Exports traces in JSON format.\n     * @param {Object} [options={}] - Export options\n     * @param {string} [options.traceId] - Export specific trace only\n     * @returns {Object}\n     */\n    exportTraces(options = {}) {\n        const spans = options.traceId\n            ? this.getTrace(options.traceId)\n            : this.#completedSpans;\n\n        return {\n            serviceName: this.#serviceName,\n            exportedAt: new Date().toISOString(),\n            spanCount: spans.length,\n            spans: spans.map(s => s.toJSON())\n        };\n    }\n\n    /**\n     * Clears all traces.\n     */\n    clear() {\n        this.#traces.clear();\n        this.#completedSpans = [];\n    }\n\n    /**\n     * Registers a callback for when spans end.\n     * @param {(span: Span) => void} callback\n     * @returns {() => void} Unsubscribe function\n     */\n    onSpanEnd(callback) {\n        this.#spanEndCallbacks.push(callback);\n        return () => {\n            const idx = this.#spanEndCallbacks.indexOf(callback);\n            if (idx !== -1) this.#spanEndCallbacks.splice(idx, 1);\n        };\n    }\n\n    /**\n     * Internal: Called when a span ends.\n     * @param {Span} span\n     */\n    _onSpanEnd(span) {\n        this.#completedSpans.push(span);\n\n        // Trim if over limit\n        if (this.#completedSpans.length > this.#maxSpans) {\n            this.#completedSpans.shift();\n        }\n\n        // Notify callbacks\n        for (const cb of this.#spanEndCallbacks) {\n            try {\n                cb(span);\n            } catch (e) {\n                console.error('[Tracer] Span end callback error:', e);\n            }\n        }\n    }\n\n    /**\n     * Generates a 32-char hex trace ID.\n     * @returns {string}\n     */\n    #generateTraceId() {\n        return uuid().replace(/-/g, '');\n    }\n\n    /**\n     * Generates a 16-char hex span ID.\n     * @returns {string}\n     */\n    #generateSpanId() {\n        return uuid().replace(/-/g, '').slice(0, 16);\n    }\n}\n\n/**\n * Creates a CrossBus plugin that automatically traces messages.\n * \n * @param {Tracer} tracer - Tracer instance\n * @returns {Object} Plugin with inbound/outbound hooks\n * \n * @example\n * const tracer = new Tracer('my-app');\n * const unhook = bus.addOutboundHook(tracingPlugin(tracer).outbound);\n */\nexport function tracingPlugin(tracer) {\n    return {\n        /**\n         * Outbound hook: adds traceparent header to messages\n         */\n        outbound: (payload, context) => {\n            const span = tracer.startSpan(`${context.type}:${context.handlerName || 'signal'}`, {\n                attributes: {\n                    'crossbus.type': context.type,\n                    'crossbus.direction': 'outbound',\n                    'crossbus.peer': context.peerId\n                }\n            });\n\n            // Add traceparent to payload metadata\n            const tracedPayload = {\n                ...payload,\n                _trace: span.toTraceparent()\n            };\n\n            span.end();\n            return tracedPayload;\n        },\n\n        /**\n         * Inbound hook: extracts traceparent and creates child span\n         */\n        inbound: (payload, context) => {\n            if (payload && payload._trace) {\n                const span = tracer.startSpanFromTraceparent(\n                    `${context.type}:${context.handlerName || 'signal'}`,\n                    payload._trace\n                );\n                span.setAttributes({\n                    'crossbus.type': context.type,\n                    'crossbus.direction': 'inbound',\n                    'crossbus.peer': context.peerId\n                });\n                span.end();\n\n                // Remove trace metadata from payload\n                const { _trace, ...cleanPayload } = payload;\n                return cleanPayload;\n            }\n            return payload;\n        }\n    };\n}\n\n/**\n * Default global tracer instance.\n */\nexport const globalTracer = new Tracer('crossbus');\n","/**\n * @fileoverview Metrics and telemetry for CrossBus.\n * Provides counters, histograms, and event hooks for monitoring.\n * @module enterprise/metrics\n */\n\n/**\n * @typedef {Object} MetricEvent\n * @property {string} name - Metric name\n * @property {string} type - 'counter' | 'histogram' | 'gauge'\n * @property {number} value - Metric value\n * @property {Object} [labels] - Metric labels\n * @property {number} timestamp - Unix timestamp in ms\n */\n\n/**\n * @typedef {Object} HistogramBucket\n * @property {number} le - Less than or equal boundary\n * @property {number} count - Count in bucket\n */\n\n/**\n * Simple histogram implementation for latency tracking.\n */\nclass Histogram {\n    /** @type {number[]} */\n    #boundaries;\n\n    /** @type {number[]} */\n    #buckets;\n\n    /** @type {number} */\n    #sum = 0;\n\n    /** @type {number} */\n    #count = 0;\n\n    /**\n     * @param {number[]} boundaries - Bucket boundaries (e.g., [0.005, 0.01, 0.025, 0.05, 0.1])\n     */\n    constructor(boundaries = [0.001, 0.005, 0.01, 0.025, 0.05, 0.1, 0.25, 0.5, 1, 2.5, 5, 10]) {\n        this.#boundaries = [...boundaries].sort((a, b) => a - b);\n        this.#buckets = new Array(this.#boundaries.length + 1).fill(0);\n    }\n\n    /**\n     * Records a value.\n     * @param {number} value - Value to record (in seconds for latency)\n     */\n    observe(value) {\n        this.#sum += value;\n        this.#count++;\n\n        // Find bucket\n        for (let i = 0; i < this.#boundaries.length; i++) {\n            if (value <= this.#boundaries[i]) {\n                this.#buckets[i]++;\n                return;\n            }\n        }\n        // +Inf bucket\n        this.#buckets[this.#buckets.length - 1]++;\n    }\n\n    /**\n     * Gets histogram data.\n     */\n    getData() {\n        const buckets = this.#boundaries.map((le, i) => ({\n            le,\n            count: this.#buckets[i]\n        }));\n        buckets.push({ le: Infinity, count: this.#buckets[this.#buckets.length - 1] });\n\n        return {\n            buckets,\n            sum: this.#sum,\n            count: this.#count\n        };\n    }\n\n    /**\n     * Calculates percentile.\n     * @param {number} p - Percentile (0-1)\n     */\n    percentile(p) {\n        if (this.#count === 0) return 0;\n\n        const target = p * this.#count;\n        let cumulative = 0;\n\n        for (let i = 0; i < this.#buckets.length; i++) {\n            cumulative += this.#buckets[i];\n            if (cumulative >= target) {\n                return i < this.#boundaries.length ? this.#boundaries[i] : Infinity;\n            }\n        }\n        return Infinity;\n    }\n\n    reset() {\n        this.#buckets.fill(0);\n        this.#sum = 0;\n        this.#count = 0;\n    }\n}\n\n/**\n * Metrics collector for CrossBus.\n * \n * @example\n * const metrics = new Metrics();\n * \n * // Subscribe to metric events\n * metrics.on('metric', (event) => {\n *   console.log(event.name, event.value);\n * });\n * \n * // Use as CrossBus plugin\n * bus.addOutboundHook(metrics.outboundHook);\n * bus.addInboundHook(metrics.inboundHook);\n */\nexport class Metrics {\n    /** @type {Map<string, number>} */\n    #counters = new Map();\n\n    /** @type {Map<string, Histogram>} */\n    #histograms = new Map();\n\n    /** @type {Map<string, number>} */\n    #gauges = new Map();\n\n    /** @type {((event: MetricEvent) => void)[]} */\n    #listeners = [];\n\n    /** @type {string} */\n    #prefix;\n\n    /** @type {Map<string, number>} Request start times for latency tracking */\n    #requestStarts = new Map();\n\n    /**\n     * Creates a new metrics collector.\n     * @param {Object} [options={}] - Options\n     * @param {string} [options.prefix='crossbus'] - Metric name prefix\n     */\n    constructor(options = {}) {\n        this.#prefix = options.prefix ?? 'crossbus';\n\n        // Initialize default histograms\n        this.#histograms.set('latency', new Histogram());\n    }\n\n    // ─────────────────────────────────────────────────────────────────\n    // Counter methods\n    // ─────────────────────────────────────────────────────────────────\n\n    /**\n     * Increments a counter.\n     * @param {string} name - Counter name\n     * @param {number} [value=1] - Increment value\n     * @param {Object} [labels={}] - Labels\n     */\n    increment(name, value = 1, labels = {}) {\n        const key = this.#makeKey(name, labels);\n        const current = this.#counters.get(key) ?? 0;\n        this.#counters.set(key, current + value);\n\n        this.#emit({\n            name: `${this.#prefix}_${name}`,\n            type: 'counter',\n            value: current + value,\n            labels,\n            timestamp: Date.now()\n        });\n    }\n\n    /**\n     * Gets a counter value.\n     * @param {string} name - Counter name\n     * @param {Object} [labels={}] - Labels\n     * @returns {number}\n     */\n    getCounter(name, labels = {}) {\n        return this.#counters.get(this.#makeKey(name, labels)) ?? 0;\n    }\n\n    // ─────────────────────────────────────────────────────────────────\n    // Histogram methods\n    // ─────────────────────────────────────────────────────────────────\n\n    /**\n     * Records a histogram observation.\n     * @param {string} name - Histogram name\n     * @param {number} value - Value to record\n     * @param {Object} [labels={}] - Labels\n     */\n    observe(name, value, labels = {}) {\n        const key = this.#makeKey(name, labels);\n        if (!this.#histograms.has(key)) {\n            this.#histograms.set(key, new Histogram());\n        }\n        const histogram = this.#histograms.get(key);\n        if (histogram) {\n            histogram.observe(value);\n        }\n\n        this.#emit({\n            name: `${this.#prefix}_${name}`,\n            type: 'histogram',\n            value,\n            labels,\n            timestamp: Date.now()\n        });\n    }\n\n    /**\n     * Gets histogram data.\n     * @param {string} name - Histogram name\n     * @param {Object} [labels={}] - Labels\n     */\n    getHistogram(name, labels = {}) {\n        const histogram = this.#histograms.get(this.#makeKey(name, labels));\n        return histogram?.getData() ?? { buckets: [], sum: 0, count: 0 };\n    }\n\n    // ─────────────────────────────────────────────────────────────────\n    // Gauge methods\n    // ─────────────────────────────────────────────────────────────────\n\n    /**\n     * Sets a gauge value.\n     * @param {string} name - Gauge name\n     * @param {number} value - Value\n     * @param {Object} [labels={}] - Labels\n     */\n    set(name, value, labels = {}) {\n        const key = this.#makeKey(name, labels);\n        this.#gauges.set(key, value);\n\n        this.#emit({\n            name: `${this.#prefix}_${name}`,\n            type: 'gauge',\n            value,\n            labels,\n            timestamp: Date.now()\n        });\n    }\n\n    /**\n     * Gets a gauge value.\n     * @param {string} name - Gauge name\n     * @param {Object} [labels={}] - Labels\n     * @returns {number}\n     */\n    getGauge(name, labels = {}) {\n        return this.#gauges.get(this.#makeKey(name, labels)) ?? 0;\n    }\n\n    // ─────────────────────────────────────────────────────────────────\n    // Event subscription\n    // ─────────────────────────────────────────────────────────────────\n\n    /**\n     * Subscribes to metric events.\n     * @param {'metric'} event - Event type\n     * @param {(event: MetricEvent) => void} callback - Callback\n     * @returns {() => void} Unsubscribe function\n     */\n    on(event, callback) {\n        if (event === 'metric') {\n            this.#listeners.push(callback);\n            return () => {\n                const idx = this.#listeners.indexOf(callback);\n                if (idx !== -1) this.#listeners.splice(idx, 1);\n            };\n        }\n        return () => { };\n    }\n\n    // ─────────────────────────────────────────────────────────────────\n    // CrossBus hooks\n    // ─────────────────────────────────────────────────────────────────\n\n    /**\n     * Outbound hook for CrossBus.\n     * Tracks messages sent and request starts.\n     */\n    get outboundHook() {\n        return (payload, context) => {\n            this.increment('messages_sent_total', 1, { type: context.type });\n\n            // Track request start time\n            if (context.type === 'request' && payload?.id) {\n                this.#requestStarts.set(payload.id, Date.now());\n            }\n\n            return payload;\n        };\n    }\n\n    /**\n     * Inbound hook for CrossBus.\n     * Tracks messages received and response latency.\n     */\n    get inboundHook() {\n        return (payload, context) => {\n            this.increment('messages_received_total', 1, { type: context.type });\n\n            // Track response latency\n            if (context.type === 'response' && payload?.requestId) {\n                const startTime = this.#requestStarts.get(payload.requestId);\n                if (startTime) {\n                    const latencyMs = Date.now() - startTime;\n                    this.observe('latency_seconds', latencyMs / 1000);\n                    this.#requestStarts.delete(payload.requestId);\n                }\n            }\n\n            return payload;\n        };\n    }\n\n    // ─────────────────────────────────────────────────────────────────\n    // Export\n    // ─────────────────────────────────────────────────────────────────\n\n    /**\n     * Exports all metrics in Prometheus text format.\n     * @returns {string}\n     */\n    toPrometheus() {\n        const lines = [];\n\n        // Counters\n        for (const [key, value] of this.#counters) {\n            lines.push(`${this.#prefix}_${key} ${value}`);\n        }\n\n        // Gauges\n        for (const [key, value] of this.#gauges) {\n            lines.push(`${this.#prefix}_${key} ${value}`);\n        }\n\n        // Histograms\n        for (const [key, histogram] of this.#histograms) {\n            const data = histogram.getData();\n            for (const bucket of data.buckets) {\n                const le = bucket.le === Infinity ? '+Inf' : bucket.le;\n                lines.push(`${this.#prefix}_${key}_bucket{le=\"${le}\"} ${bucket.count}`);\n            }\n            lines.push(`${this.#prefix}_${key}_sum ${data.sum}`);\n            lines.push(`${this.#prefix}_${key}_count ${data.count}`);\n        }\n\n        return lines.join('\\n');\n    }\n\n    /**\n     * Exports all metrics as JSON.\n     * @returns {Object}\n     */\n    toJSON() {\n        const counters = {};\n        for (const [key, value] of this.#counters) {\n            counters[key] = value;\n        }\n\n        const gauges = {};\n        for (const [key, value] of this.#gauges) {\n            gauges[key] = value;\n        }\n\n        const histograms = {};\n        for (const [key, histogram] of this.#histograms) {\n            histograms[key] = histogram.getData();\n        }\n\n        return {\n            exportedAt: new Date().toISOString(),\n            prefix: this.#prefix,\n            counters,\n            gauges,\n            histograms\n        };\n    }\n\n    /**\n     * Resets all metrics.\n     */\n    reset() {\n        this.#counters.clear();\n        this.#gauges.clear();\n        for (const histogram of this.#histograms.values()) {\n            histogram.reset();\n        }\n        this.#requestStarts.clear();\n    }\n\n    // ─────────────────────────────────────────────────────────────────\n    // Private helpers\n    // ─────────────────────────────────────────────────────────────────\n\n    /**\n     * Creates a unique key from name and labels.\n     */\n    #makeKey(name, labels) {\n        if (Object.keys(labels).length === 0) {\n            return name;\n        }\n        const labelStr = Object.entries(labels)\n            .sort(([a], [b]) => a.localeCompare(b))\n            .map(([k, v]) => `${k}=\"${v}\"`)\n            .join(',');\n        return `${name}{${labelStr}}`;\n    }\n\n    /**\n     * Emits a metric event.\n     */\n    #emit(event) {\n        for (const listener of this.#listeners) {\n            try {\n                listener(event);\n            } catch (e) {\n                console.error('[Metrics] Listener error:', e);\n            }\n        }\n    }\n}\n\n/**\n * Default global metrics instance.\n */\nexport const globalMetrics = new Metrics();\n","/**\n * @fileoverview Backpressure and flow control for CrossBus.\n * Prevents slow receivers from causing memory issues.\n * @module enterprise/backpressure\n */\n\n/**\n * @typedef {'drop-oldest'|'drop-newest'|'reject'|'pause'} BackpressureStrategy\n */\n\n/**\n * @typedef {Object} QueueStats\n * @property {number} size - Current queue size\n * @property {number} maxSize - Maximum queue size\n * @property {number} dropped - Messages dropped\n * @property {number} processed - Messages processed\n * @property {boolean} isPaused - Whether queue is paused\n */\n\n/**\n * Per-peer message queue with backpressure support.\n */\nclass PeerQueue {\n    /** @type {Object[]} */\n    #queue = [];\n\n    /** @type {number} */\n    #maxSize;\n\n    /** @type {BackpressureStrategy} */\n    #strategy;\n\n    /** @type {number} */\n    #dropped = 0;\n\n    /** @type {number} */\n    #processed = 0;\n\n    /** @type {boolean} */\n    #paused = false;\n\n    /** @type {((message: Object) => void)|null} */\n    #sendFn = null;\n\n    /** @type {string} */\n    // #peerId;\n\n    /**\n     * @param {string} peerId - Peer ID\n     * @param {Object} options - Queue options\n     * @param {number} options.maxSize - Maximum queue size\n     * @param {BackpressureStrategy} options.strategy - Backpressure strategy\n     */\n    constructor(peerId, options) {\n        // this.#peerId = peerId;\n        this.#maxSize = options.maxSize;\n        this.#strategy = options.strategy;\n    }\n\n    /**\n     * Sets the send function.\n     * @param {(message: Object) => void} sendFn\n     */\n    setSendFn(sendFn) {\n        this.#sendFn = sendFn;\n    }\n\n    /**\n     * Enqueues a message.\n     * @param {Object} message - Message to enqueue\n     * @returns {{ success: boolean, queued: boolean, dropped: boolean }}\n     */\n    enqueue(message) {\n        // If not paused and queue is empty, send immediately\n        if (!this.#paused && this.#queue.length === 0 && this.#sendFn) {\n            try {\n                this.#sendFn(message);\n                this.#processed++;\n                return { success: true, queued: false, dropped: false };\n            } catch {\n                // Send failed, queue the message\n            }\n        }\n\n        // Check if queue is full\n        if (this.#queue.length >= this.#maxSize) {\n            return this.#handleBackpressure(message);\n        }\n\n        // Add to queue\n        this.#queue.push(message);\n        return { success: true, queued: true, dropped: false };\n    }\n\n    /**\n     * Handles backpressure when queue is full.\n     */\n    #handleBackpressure(message) {\n        switch (this.#strategy) {\n            case 'drop-oldest':\n                this.#queue.shift();\n                this.#queue.push(message);\n                this.#dropped++;\n                return { success: true, queued: true, dropped: true };\n\n            case 'drop-newest':\n                this.#dropped++;\n                return { success: false, queued: false, dropped: true };\n\n            case 'reject':\n                return { success: false, queued: false, dropped: false };\n\n            case 'pause':\n                this.#paused = true;\n                return { success: false, queued: false, dropped: false };\n\n            default:\n                return { success: false, queued: false, dropped: false };\n        }\n    }\n\n    /**\n     * Processes queued messages.\n     * @param {number} [count] - Max messages to process (default: all)\n     * @returns {number} Number of messages processed\n     */\n    flush(count) {\n        if (!this.#sendFn) return 0;\n\n        const toProcess = count ?? this.#queue.length;\n        let processed = 0;\n\n        for (let i = 0; i < toProcess && this.#queue.length > 0; i++) {\n            const message = this.#queue.shift();\n            try {\n                this.#sendFn(message);\n                processed++;\n                this.#processed++;\n            } catch {\n                // Put back at front of queue\n                this.#queue.unshift(message);\n                break;\n            }\n        }\n\n        return processed;\n    }\n\n    /**\n     * Resumes a paused queue.\n     */\n    resume() {\n        this.#paused = false;\n        this.flush();\n    }\n\n    /**\n     * Pauses the queue.\n     */\n    pause() {\n        this.#paused = true;\n    }\n\n    /**\n     * Clears the queue.\n     */\n    clear() {\n        this.#queue = [];\n    }\n\n    /**\n     * Gets queue statistics.\n     * @returns {QueueStats}\n     */\n    getStats() {\n        return {\n            size: this.#queue.length,\n            maxSize: this.#maxSize,\n            dropped: this.#dropped,\n            processed: this.#processed,\n            isPaused: this.#paused\n        };\n    }\n}\n\n/**\n * Backpressure controller for CrossBus.\n * Manages per-peer message queues with configurable strategies.\n * \n * @example\n * const bp = new BackpressureController({\n *   maxQueueSize: 100,\n *   strategy: 'drop-oldest'\n * });\n * \n * // Wrap peer send functions\n * const wrappedSend = bp.wrap('widget-1', originalSendFn);\n * \n * // Check if peer is slow\n * if (bp.getStats('widget-1').size > 50) {\n *   console.warn('widget-1 is falling behind');\n * }\n */\nexport class BackpressureController {\n    /** @type {Map<string, PeerQueue>} */\n    #queues = new Map();\n\n    /** @type {number} */\n    #defaultMaxSize;\n\n    /** @type {BackpressureStrategy} */\n    #defaultStrategy;\n\n    /** @type {((peerId: string, stats: QueueStats) => void)[]} */\n    #backpressureListeners = [];\n\n    /** @type {number} */\n    #checkInterval;\n\n    /** @type {ReturnType<typeof setInterval>|null} */\n    #intervalId = null;\n\n    /**\n     * Creates a new backpressure controller.\n     * @param {Object} [options={}] - Options\n     * @param {number} [options.maxQueueSize=100] - Default max queue size\n     * @param {BackpressureStrategy} [options.strategy='drop-oldest'] - Default strategy\n     * @param {number} [options.checkIntervalMs=1000] - Interval to check queues\n     */\n    constructor(options = {}) {\n        this.#defaultMaxSize = options.maxQueueSize ?? 100;\n        this.#defaultStrategy = options.strategy ?? 'drop-oldest';\n        this.#checkInterval = options.checkIntervalMs ?? 1000;\n    }\n\n    /**\n     * Wraps a peer's send function with backpressure control.\n     * @param {string} peerId - Peer ID\n     * @param {(message: Object) => void} sendFn - Original send function\n     * @param {Object} [options={}] - Per-peer options\n     * @param {number} [options.maxQueueSize] - Max queue size for this peer\n     * @param {BackpressureStrategy} [options.strategy] - Strategy for this peer\n     * @returns {(message: Object) => { success: boolean, queued: boolean, dropped: boolean }}\n     */\n    wrap(peerId, sendFn, options = {}) {\n        const queue = new PeerQueue(peerId, {\n            maxSize: options.maxQueueSize ?? this.#defaultMaxSize,\n            strategy: options.strategy ?? this.#defaultStrategy\n        });\n        queue.setSendFn(sendFn);\n        this.#queues.set(peerId, queue);\n\n        this.#startMonitoring();\n\n        return (message) => queue.enqueue(message);\n    }\n\n    /**\n     * Configures backpressure for a specific peer.\n     * @param {string} peerId - Peer ID\n     * @param {Object} options - Options\n     */\n    configure(peerId, options) {\n        let queue = this.#queues.get(peerId);\n        if (!queue) {\n            queue = new PeerQueue(peerId, {\n                maxSize: options.maxQueueSize ?? this.#defaultMaxSize,\n                strategy: options.strategy ?? this.#defaultStrategy\n            });\n            this.#queues.set(peerId, queue);\n        }\n    }\n\n    /**\n     * Flushes queued messages for a peer.\n     * @param {string} peerId - Peer ID\n     * @param {number} [count] - Max messages to flush\n     * @returns {number} Messages processed\n     */\n    flush(peerId, count) {\n        return this.#queues.get(peerId)?.flush(count) ?? 0;\n    }\n\n    /**\n     * Flushes all queues.\n     * @returns {number} Total messages processed\n     */\n    flushAll() {\n        let total = 0;\n        for (const queue of this.#queues.values()) {\n            total += queue.flush();\n        }\n        return total;\n    }\n\n    /**\n     * Pauses a peer's queue.\n     * @param {string} peerId - Peer ID\n     */\n    pause(peerId) {\n        this.#queues.get(peerId)?.pause();\n    }\n\n    /**\n     * Resumes a peer's queue.\n     * @param {string} peerId - Peer ID\n     */\n    resume(peerId) {\n        this.#queues.get(peerId)?.resume();\n    }\n\n    /**\n     * Gets stats for a peer.\n     * @param {string} peerId - Peer ID\n     * @returns {QueueStats|null}\n     */\n    getStats(peerId) {\n        return this.#queues.get(peerId)?.getStats() ?? null;\n    }\n\n    /**\n     * Gets stats for all peers.\n     * @returns {Object<string, QueueStats>}\n     */\n    getAllStats() {\n        /** @type {Object<string, QueueStats>} */\n        const stats = {};\n        for (const [peerId, queue] of this.#queues) {\n            stats[peerId] = queue.getStats();\n        }\n        return stats;\n    }\n\n    /**\n     * Subscribes to backpressure events.\n     * @param {(peerId: string, stats: QueueStats) => void} callback\n     * @returns {() => void} Unsubscribe function\n     */\n    onBackpressure(callback) {\n        this.#backpressureListeners.push(callback);\n        return () => {\n            const idx = this.#backpressureListeners.indexOf(callback);\n            if (idx !== -1) this.#backpressureListeners.splice(idx, 1);\n        };\n    }\n\n    /**\n     * Removes a peer's queue.\n     * @param {string} peerId - Peer ID\n     */\n    remove(peerId) {\n        const queue = this.#queues.get(peerId);\n        if (queue) {\n            queue.clear();\n            this.#queues.delete(peerId);\n        }\n    }\n\n    /**\n     * Clears all queues and stops monitoring.\n     */\n    destroy() {\n        if (this.#intervalId) {\n            clearInterval(this.#intervalId);\n            this.#intervalId = null;\n        }\n        for (const queue of this.#queues.values()) {\n            queue.clear();\n        }\n        this.#queues.clear();\n        this.#backpressureListeners = [];\n    }\n\n    /**\n     * Starts monitoring queues for backpressure.\n     */\n    #startMonitoring() {\n        if (this.#intervalId) return;\n\n        this.#intervalId = setInterval(() => {\n            for (const [peerId, queue] of this.#queues) {\n                const stats = queue.getStats();\n                // Notify if queue is over 50% full or paused\n                if (stats.size > stats.maxSize * 0.5 || stats.isPaused) {\n                    for (const listener of this.#backpressureListeners) {\n                        try {\n                            listener(peerId, stats);\n                        } catch (e) {\n                            console.error('[Backpressure] Listener error:', e);\n                        }\n                    }\n                }\n            }\n        }, this.#checkInterval);\n    }\n}\n","/**\n * @fileoverview Message versioning for CrossBus.\n * Supports schema evolution with migration functions.\n * @module enterprise/versioning\n */\n\n/**\n * @typedef {Object} VersionedMessage\n * @property {number} _v - Message version\n * @property {Object} payload - Message payload\n */\n\n/**\n * @typedef {(oldPayload: Object) => Object} MigrationFn\n */\n\n/**\n * Message versioning system for CrossBus.\n * Handles schema evolution with automatic migrations.\n * \n * @example\n * const versioning = new MessageVersioning();\n * \n * // Register migrations\n * versioning.registerMigration('user:updated', 1, 2, (old) => ({\n *   ...old,\n *   fullName: `${old.firstName} ${old.lastName}`\n * }));\n * \n * // Migrate a message\n * const migrated = versioning.migrate('user:updated', oldPayload, 1, 2);\n */\nexport class MessageVersioning {\n    /** @type {Map<string, Map<string, MigrationFn>>} Type -> \"from:to\" -> migrator */\n    #migrations = new Map();\n\n    /** @type {Map<string, number>} Type -> current version */\n    #currentVersions = new Map();\n\n    /** @type {number} */\n    #defaultVersion;\n\n    /**\n     * Creates a new versioning system.\n     * @param {Object} [options={}] - Options\n     * @param {number} [options.defaultVersion=1] - Default version for new messages\n     */\n    constructor(options = {}) {\n        this.#defaultVersion = options.defaultVersion ?? 1;\n    }\n\n    /**\n     * Registers a migration from one version to another.\n     * @param {string} type - Message type (e.g., 'user:updated')\n     * @param {number} fromVersion - Source version\n     * @param {number} toVersion - Target version\n     * @param {MigrationFn} migrateFn - Migration function\n     */\n    registerMigration(type, fromVersion, toVersion, migrateFn) {\n        if (!this.#migrations.has(type)) {\n            this.#migrations.set(type, new Map());\n        }\n        const typeMigrations = this.#migrations.get(type);\n        if (typeMigrations) {\n            typeMigrations.set(`${fromVersion}:${toVersion}`, migrateFn);\n        }\n    }\n\n    /**\n     * Sets the current version for a message type.\n     * @param {string} type - Message type\n     * @param {number} version - Current version\n     */\n    setCurrentVersion(type, version) {\n        this.#currentVersions.set(type, version);\n    }\n\n    /**\n     * Gets the current version for a message type.\n     * @param {string} type - Message type\n     * @returns {number}\n     */\n    getCurrentVersion(type) {\n        return this.#currentVersions.get(type) ?? this.#defaultVersion;\n    }\n\n    /**\n     * Migrates a payload from one version to another.\n     * @param {string} type - Message type\n     * @param {Object} payload - Payload to migrate\n     * @param {number} fromVersion - Source version\n     * @param {number} toVersion - Target version\n     * @returns {Object} Migrated payload\n     * @throws {Error} If no migration path exists\n     */\n    migrate(type, payload, fromVersion, toVersion) {\n        if (fromVersion === toVersion) {\n            return payload;\n        }\n\n        const migrations = this.#migrations.get(type);\n        if (!migrations) {\n            throw new Error(`No migrations registered for type: ${type}`);\n        }\n\n        // Find migration path\n        let current = payload;\n        let currentVersion = fromVersion;\n\n        while (currentVersion !== toVersion) {\n            const nextVersion = currentVersion < toVersion ? currentVersion + 1 : currentVersion - 1;\n            const key = `${currentVersion}:${nextVersion}`;\n            const migrateFn = migrations.get(key);\n\n            if (!migrateFn) {\n                throw new Error(`No migration path from v${currentVersion} to v${nextVersion} for type: ${type}`);\n            }\n\n            current = migrateFn(current);\n            currentVersion = nextVersion;\n        }\n\n        return current;\n    }\n\n    /**\n     * Checks if a message needs migration.\n     * @param {string} type - Message type\n     * @param {number} version - Message version\n     * @returns {boolean}\n     */\n    needsMigration(type, version) {\n        return version !== this.getCurrentVersion(type);\n    }\n\n    /**\n     * Creates a versioned message.\n     * @param {string} type - Message type\n     * @param {Object} payload - Message payload\n     * @param {number} [version] - Version (defaults to current)\n     * @returns {VersionedMessage}\n     */\n    createMessage(type, payload, version) {\n        return {\n            _v: version ?? this.getCurrentVersion(type),\n            ...payload\n        };\n    }\n\n    /**\n     * Extracts version from a message.\n     * @param {Object} message - Message\n     * @returns {number}\n     */\n    getVersion(message) {\n        return message?._v ?? this.#defaultVersion;\n    }\n\n    /**\n     * Creates a CrossBus hook for automatic version migration.\n     * @returns {(payload: Object, context: Object) => Object}\n     */\n    createInboundHook() {\n        return (payload, context) => {\n            if (!payload || typeof payload !== 'object') {\n                return payload;\n            }\n\n            const version = this.getVersion(payload);\n            const type = context.handlerName || context.type;\n            const currentVersion = this.getCurrentVersion(type);\n\n            if (version !== currentVersion && this.#migrations.has(type)) {\n                try {\n                    const { _v, ...rest } = payload;\n                    const migrated = this.migrate(type, rest, version, currentVersion);\n                    return { _v: currentVersion, ...migrated };\n                } catch (e) {\n                    console.warn(`[Versioning] Migration failed for ${type}: ${e instanceof Error ? e.message : String(e)}`);\n                    return payload;\n                }\n            }\n\n            return payload;\n        };\n    }\n\n    /**\n     * Creates a CrossBus hook for automatic version stamping.\n     * @returns {(payload: Object, context: Object) => Object}\n     */\n    createOutboundHook() {\n        return (payload, context) => {\n            if (!payload || typeof payload !== 'object') {\n                return payload;\n            }\n\n            // Don't overwrite existing version\n            if (payload._v !== undefined) {\n                return payload;\n            }\n\n            const type = context.handlerName || context.type;\n            const version = this.getCurrentVersion(type);\n\n            return { _v: version, ...payload };\n        };\n    }\n\n    /**\n     * Gets all registered migrations.\n     * @returns {Object}\n     */\n    getMigrations() {\n        const result = {};\n        for (const [type, migrations] of this.#migrations) {\n            result[type] = Array.from(migrations.keys());\n        }\n        return result;\n    }\n\n    /**\n     * Clears all migrations.\n     */\n    clear() {\n        this.#migrations.clear();\n        this.#currentVersions.clear();\n    }\n}\n\n/**\n * Default global versioning instance.\n */\nexport const globalVersioning = new MessageVersioning();\n"],"names":[],"mappings":"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"}